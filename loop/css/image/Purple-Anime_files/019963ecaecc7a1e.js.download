(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[25470],{

/***/ 231174:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(813110);__web_req__(248167);__web_req__(513218);self._5880d4398c473aa67256e87589eaef11 = self._5880d4398c473aa67256e87589eaef11 || {};(function(__c) {var Vt;var St;var Mt;var zs;var xs;var ys;var cs;var pt;var ut;var qs;var qt;var Xr;var Kr;var $r;var Jt;var Or;var as;var Mr;var Gt;var ur;var gs;var fs;var Ct;var Bt;var ds;var bs;var xt;var fa=__c.fa;var Yr;var Ir;var ft;var jt;var lt;var ht;var it;var mt;var Lr;var Pr;var dt;var gt;var at;var N=__c.N;var et;var ct;var Us;var Yh=__c.Yh;var Ks;var Js;var Is;var Hs;var Gs;var Es;var ra=__c.ra;var ks;var js;var hs;var Hr;var Gr;var Vr;var Wr;var Ur;var Jr;var pa=__c.pa;var m=__c.m;var r=__c.r;
var ma=__c.ma;
var mib,vr,wr,pib,rib,xr,yr,uib,sib,tib,wib,zr,Aib,Bib,Cib,Dib,Eib,Fib,Gib,Hib,Ar,Br,Cr,Iib,Jib,Dr,Mib,Fr,Qib,Sib,Tib,Rib,Vib,Wib,Xib,Yib,Zib,$ib,kjb,pjb,tjb,ujb,vjb,zjb,Ajb,Bjb,Cjb,Djb,Gjb,Hjb,Jjb,Kjb,Mjb,Ojb,Pjb,Qjb,Sjb,Ujb,Vjb,Yjb,Zjb,ns,$jb,akb,bkb,ps,dkb,ekb,fkb,hkb,ikb,jkb,rs,kkb,okb,pkb,As,Bkb,Bs,Cs,Dkb,Ekb,Ds,Hkb,Jkb,Ikb,Kkb,Lkb,Nkb,Pkb,Gkb,Rkb,Qkb,Skb,Ukb,Vkb,Ls,Wkb,Zkb,Xkb,Ykb,Ns,blb,dlb,alb,clb,elb,flb,$kb,glb,hlb,Ps,jlb,klb,llb,Qs,mlb,nlb,olb,plb,tlb,Xs,Ws,ulb,Ys,vlb,wlb,xlb,ylb,zlb,$s,
Alb,Clb,bt,Dlb;ur=__c.ur=function(a,b){ma(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const d in a)c[d]=b(a[d],d);return c};mib=function(a,b){ma(0<b.length);switch(b.length){case 1:return b[0];case 2:return a.compose(b[0],b[1]);case 3:return a.compose(a.compose(b[0],b[1]),b[2]);case 4:return a.compose(a.compose(b[0],b[1]),a.compose(b[2],b[3]));default:const c=b.slice();for(b=b.length;1<b;){let d=0;for(let e=0;e<b;e+=2)c[d++]=e+1<b?a.compose(c[e],c[e+1]):c[e];b=d}return c[0]}};
vr=function(a,b,c){ma(a.Oh(b,c),"{} != {}",b,c)};wr=function(a){return 1===a?nib:{type:0,length:a}};pib=function(a){return 1===a?oib:{type:1,length:a}};rib=function(a){return 1===a?qib:{type:2,length:a}};xr=function(a,b){return{type:3,state:a,shift:b}};yr=function(a,b){return{type:4,delta:a,shift:b}};
uib=function(a){switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;case 2:return`T(${a.length})`;case 3:return`I(${sib(a.state)})${tib(a.shift)}`;case 4:return`U(${sib(a.delta)})${tib(a.shift)}`;default:throw new r(a);}};sib=function(a){return null!=a?a:"\u22a5"};tib=function(a){return null!=a?`[${a.Fh},${a.jl}]`:""};
wib=function(a,b){return b&&a.LIa?new vib(a.ops.map(c=>3===c.type&&c.shift?xr(c.state,{Fh:c.shift.Fh+b,jl:c.shift.jl+b}):4===c.type&&c.shift?yr(c.delta,{Fh:c.shift.Fh+b,jl:c.shift.jl+b}):c),a.pre,a.post,a.LIa):a};zr=function(a,b){const c=m(a.ql);if(0===c.type)return a.JB(0,1),xib;if(1===c.type)return a.JB(1,1),yib;if(2===c.type)return a.JB(2,1),zib;if(c.type!==b)throw Error();a.ql=a.ops[a.i++];return c};Aib=function(a){return a.every(()=>!1)};
Bib=function(a,b){ma(0<b.length);const c=a.length;b.forEach((d,e)=>a.list[c+e]=d);a.length+=b.length};Cib=function(a){ma(a.Nta<a.input.length,"{} >= {}",a.Nta,a.input.length);return a.input[a.Nta++]};Dib=function(a,b){b=a.Nta+b;ma(b<=a.input.length);const c=a.input.slice(a.Nta,b);a.Nta=b;return c};Eib=function(a,b){a.ocb||(a.ocb=new Set);ma(!a.ocb.has(b),"duplicate modification: {}",b);a.ocb.add(b)};Fib=function(a,b,c){Eib(a,b);(a.jnc||(a.jnc=new Map)).set(b,c)};
Gib=function(a,b,c){Eib(a,b);(a.inc||(a.inc=new Map)).set(b,c)};Hib=function(a,b){let {Fh:c,jl:d}=b;var e=a.jnc;a=a.inc;if(e){const f=e.get(c);null!=f&&(c=f,e.delete(c))}a&&(e=a.get(d),null!=e&&(d=e,a.delete(d)));return c!==b.Fh||d!==b.jl?{Fh:c,jl:d}:b};Ar=function(a,b,c){Eib(a,b);null!=c&&(a.i_a||(a.i_a=new Map)).set(b,c)};Br=function(a,b,c){(a.fKa||(a.fKa=new Map)).set(b,c)};Cr=function(a,b,c){(a.yJa||(a.yJa=new Map)).set(c,b)};Iib=function({Fh:a,jl:b}){return{Fh:b,jl:a}};
Jib=function(a,b){return a?!!b&&a.Fh===b.Fh&&a.jl===b.jl:!b};__c.Kib=function(a){return a.filter(()=>!0)};Dr=function(a,b){ma(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const d in a)c[d]=b(a[d],d);return c};Mib=function(a,b){return a===Er?b:b===Er?a:new Lib(a,b)};Fr=function(a,b){return b===Er?Er:new a(b)};Qib=function(a){a:{a={items:Fr(Nib,a),mj:Er};for(b in a)if(a[b]!==Er){var b=new Oib(a);break a}b=Er}return Mib(Pib,b)};
Sib=function(a,b){pa(null!=a.dJ,"mutable not connected");try{a.kX(b)}catch(c){throw a.error(c),c;}Rib(a,b)};Tib=function(a,b){if(a.clients){for(const c of a.clients.keys())try{c.error(b)}catch(d){}a.clients=void 0}};Rib=function(a,b){pa(null!=a.dJ);if(a.clients){var c=!1;for(const d of a.clients.keys())try{d.next(b)}catch(e){try{d.error(`could not publish to incoming: ${e}`)}catch(f){}a.clients.delete(d);c=!0}c&&!a.clients.size&&(a.clients=void 0)}};
Gr=__c.Gr=function(a,b){a.v6b||(a.v6b={next:c=>{a.dJ&&(Rib(a,c),a.dJ.next(c))},error:c=>{a.error(c)}});return new Uib(a.v6b,b)};Hr=__c.Hr=function(a,b,c){b=a.gy(b);a=a.connect(b,c);return{mutable:b,ow:a}};Ir=__c.Ir=function(a,b,c,d){a.destroy(d,b);c.complete()};Vib=function(a,b){let c=a.rows[b];null==c&&(c=a.rows[b]=a.u5c++);return c};Wib=function(a,b){let c=a.cols[b];null==c&&(c=a.cols[b]=a.s5c++);return c};
Xib=function(a,b,c,d=()=>!0){a.cols.spliceWithArray(b,0,Array(c));for(let e=0;e<a.rows.length;e++){const f=a.get(e,b-1);if(null!=f&&d(f))for(let g=b;g<b+c;g++)a.set(e,g,f)}};Yib=function(a,b,c,d=()=>!0){a.rows.spliceWithArray(b,0,Array(c));for(let e=0;e<a.cols.length;e++){const f=a.get(b-1,e);if(null!=f&&d(f))for(let g=b;g<b+c;g++)a.set(g,e,f)}};Zib=function(a,b){ma(a.PM(b),"invalid value: {}",b);return b};
$ib=function(a,b,c){if(!a.Uw(b,c))throw Error(`Invalid argument: ${a.stringify(b)} != ${a.stringify(c)}`);};Jr=__c.Jr=function(a){return new ajb(a)};Kr=__c.Kr=function(...a){return 1===a.length?new bjb(a[0]):new cjb(new Set(a))};Lr=__c.Lr=function(a,b){return new djb(a,b,Fr(Nib,a.serializer))};__c.gjb=function(a,b){return new ejb(a,b,Fr(fjb,b.serializer))};Mr=__c.Mr=function(a,b){return new hjb(a,b)};__c.Nr=function(a,b){return new ijb(a,b)};Or=__c.Or=function(a){return new jjb(a)};
kjb=function(a,b){ma(Number.isSafeInteger(a)&&Number.isSafeInteger(b)&&a<=b);return Jr(c=>Number.isSafeInteger(c)&&a<=c&&c<=b)};Pr=__c.Pr=function(a,b){ma(Number.isFinite(a)&&Number.isFinite(b)&&a<=b);return Jr(c=>Number.isFinite(c)&&a<=c&&c<=b)};Vr=__c.Vr=function(a){return a instanceof Ur?new ljb(a,Fr(mjb,a.serializer)):new njb(a,Fr(mjb,a.p0b),Fr(mjb,a.$oa))};pjb=function(a){return new ojb(a)};Wr=__c.Wr=function(a){return new qjb(a,a.serializer)};Xr=__c.Xr=function(a){return new rjb(a,a.$oa)};
Yr=__c.Yr=function(a){return Wr(Vr(a))};tjb=function(a,b,c){return null==c||a.component.isIdentity(c)?sjb:new Map([[b,c]])};ujb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};vjb=function(a,b,c){const d=Gr(a,g=>a.domain.update(b,g)),{mutable:e,ow:f}=Hr(a.type,c,d);return{FKc:{to:f,from:d},value:e}};__c.Zr=function(...a){[,a]=1===a.length?[void 0,a[0]]:a;return new wjb(a,Fr(fjb,a.$oa))};$r=__c.$r=function(a){return new xjb(a,a.serializer)};
zjb=function(a,b,c){return yjb.of({...a,...b,...c})};Ajb=function(...a){const b=new Set;for(const c of a)for(const d in c)ma(!b.has(d),'duplicate key: "{}"',d),b.add(d)};Bjb=function(a,b){return Gr(a,c=>({[b]:c}))};Cjb=function(a,b){return Gr(a,c=>({[b]:c}))};
Djb=function(a,b){if(!a)return b;if(!b)return a;const c=a.create,d=b.create;return{Pb:{...a.Pb,...b.Pb},attributes:{...a.attributes,...b.attributes},create:e=>{const {Pb:f,attributes:g}=c(e),{Pb:h,attributes:k}=d({...e,...f,...g});return{Pb:{...f,...h},attributes:{...g,...k}}}}};as=__c.as=function(a){return Ejb.bk(a)};bs=__c.bs=function(a){return a.domain.dg()};cs=__c.cs=function(a){return new __c.Fjb(a,Qib(a.$oa))};ds=__c.ds=function(){throw Error("list not modifiable");};
__c.es=function(a,b){return a?b?(...c)=>{a(...c);b(...c)}:a:b};Gjb=function(a,b){a=a.length;ma(0<=b&&b<a,"{} \u2209 [0, {})",b,a)};Hjb=function(a,b){a=a.length;ma(0<b&&b<a,"{} \u2209 (0, {})",b,a)};__c.Ijb=function(a,b){return a?b?{fb:__c.es(a.fb,b.fb),item:__c.es(a.item,b.item),mj:__c.es(a.mj,b.mj)}:a:b};Jjb=function(a,b){a=a.E9;ma(0<b&&b<a,"{} \u2209 (0, {})",0,a)};Kjb=function(a,b){a=a.GZ;ma(0<b&&b<a,"{} \u2209 (0, {})",0,a)};
fs=__c.fs=function(a,b,c){switch(b.type){case 0:case 1:switch(c.type){case 0:case 1:return a.change(b.state,c.state);case 2:return a.bV(b.state);default:throw new r(c);}case 2:switch(c.type){case 0:case 1:return a.b_a(c.state);case 2:return a.foa(b.state);default:throw new r(c);}default:throw new r(b);}};gs=__c.gs=function(a){const b=m(a.ql);a.ql=a.ops[a.i++];return b};__c.Ljb=function(a,b){const c=m(a.ql),d=c.E9;ma(0<b&&b<=d);if(b<d){const [e,f]=c.uKb(b);a.ql=f;return e}a.ql=a.ops[a.i++];return c};
Mjb=function(a,b){const c=m(a.ql),d=c.GZ;ma(0<b&&b<=d);if(b<d){const [e,f]=c.tKb(b);a.ql=f;return e}a.ql=a.ops[a.i++];return c};Ojb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ma(1===b.type),new hs(a.component.apply(b.state,c.delta));case 3:return __c.Njb(a,b,c.oldState),c.newState;default:throw new r(c);}};
Pjb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ma(1===b.type),new hs(a.component.Jk(b.state,c.delta));case 3:return __c.Njb(a,b,c.newState),c.oldState;default:throw new r(c);}};Qjb=function(a,b,c){switch(b.type){case 0:return 0===c.type&&b.state===c.state;case 1:return 1===c.type&&a.component.Oh(b.state,c.state);case 2:return 2===c.type&&b.state===c.state;default:throw new r(b);}};__c.Njb=function(a,b,c){ma(Qjb(a,b,c),"{} != {}",b,c)};
__c.Rjb=function(a,b){const c=__c.is.dg(),d=a.cursor(0,{...js,mj:g=>c.retain(g)}),e={...js,fb:g=>c.retain(g.length)},f={...js,fb:g=>c.bV(g)};b.forEach({retain:g=>d.Jm(g,e),delete:g=>d.Jm(g,f),insert:g=>c.insert(g)});return c.build()};
Sjb=function(a,b){const c=new ks,d=a.cursor();a=h=>{throw Error(String(h));};const e={...js,fb:h=>c.retain(h.length)},f={...js,fb:a},g={...js,fb:()=>0,mj:a};b.forEach({retain:h=>d.xP(h,e),update:h=>{throw new r(h);},insert:h=>2!==h.type&&c.insert(h.state),change:(h,k)=>{2===h.type?(d.xP(h.length,f),2!==k.type&&c.insert(k.state)):(d.xP(h.length,g),2===k.type?c.delete(h.length):(ma(h.state===k.state,"non-reflexive change: {} != {}",h,k),c.retain(h.length)))}});return c.build()};__c.ls=function(a){return Object.keys(a)};
__c.ms=function(a,b,c){for(const [d,e]of Object.entries(a))c(d,e,b[d])};__c.Tjb=function(a,b){return a.length?b.length?[...(new Set([...a,...b]))]:a:b};Ujb=function(a,b){return{type:0,cE:a,tF:b}};Vjb=function(a){return{type:1,length:a}};__c.Wjb=function(a,b){return a&&b?a.so===b.so&&a.sn===b.sn:!a&&!b};__c.Xjb=function(a,b){Object.entries(a).forEach(([c,d])=>null!=d&&b(d,c))};
Yjb=function(a,b){const c=__c.ls(a),d=__c.ls(b);if(a===b||!c.length&&!d.length)return!0;if(c.length!==d.length)return!1;const e=__c.Tjb(c,d);return c.length===e.length&&d.length===e.length&&e.every(f=>__c.Wjb(a[f].r,b[f].r))};Zjb=function(a,b={}){return{type:0,length:a,changes:b}};ns=function(a,b){return a?!!b&&a.from===b.from&&a.to===b.to:!b};
$jb=function(a,b){let c=0,d=0;for(const e of a.Xba)switch(a=e.length,e.type){case 0:b.retain&&b.retain(a,c,d);c+=a;d+=a;break;case 1:b.insert&&b.insert(a,c,d);d+=a;break;default:throw new r(e.type);}};akb=function(a,b,c){let {from:d,to:e}=a;d+=d>b?c:0;e+=e>b?c:0;return a.from!==d||a.to!==e?new os(d,e):a};bkb=function(a,b,c){for(const [d,e]of a){const f=akb(e,b,c);f!==e&&a.set(d,f)}};
ps=function(a,b,c,d){for(const [e,f]of a){const g=f.F9,h=f.B9,k=g&&(null!=b?akb(g,b,d):g),l=h&&(null!=c?akb(h,c,d):h);k===g&&l===h||a.set(e,new ckb(k,l))}};dkb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};ekb=function(a,b){ra(a,b);return a};fkb=function(a,b){return{key:a.DPa(b),value:b}};qs=__c.qs=function(a,b,c){return new gkb(a,b,c)};hkb=function(a,b){return a===b||a.size===b.size&&Array.from(a.keys()).every(c=>a.get(c)===b.get(c))};
ikb=function(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const [e,f]of a){var d=b.get(e)||0;(d=f+d)&&c.set(e,d)}for(const [e,f]of b)a.has(e)||c.set(e,f);return c};jkb=function(a,b){const c=new Map;for(const [d,e]of a)b(e)&&c.set(d,e);return c};rs=function(...a){return RegExp(a.map(b=>b.source).join("|"))};kkb=function(a){return new RegExp(a+"B[0-9b-df-hj-np-tv-zB-DF-HJ-NP-TV-Z]{14}")};
__c.lkb=function(a){var b=a.options;const c=a.Rr;b=c&&b.find(e=>(null===e||void 0===e?void 0:e.id)===c)||b.find(e=>e);var d;return{...a,text:null!==(d=null===b||void 0===b?void 0:b.label)&&void 0!==d?d:""}};__c.mkb=function({text:a,...b}){ra(a,__c.lkb(b).text,"Value to unmap is not a derived select pill state");return b};__c.nkb=function(a){ra(a.normalize(a.defaultValue),a.defaultValue)};__c.ss=function(a,b){return null!=b?a.decode(b):void 0};__c.ts=function(a,b){return null!=b?a.encode(b):void 0};
okb=function(a){a=a.split("/");return 2===a.length?a[0]:void 0};pkb=function(a){if(a.startsWith(`${__c.us}/`)){const [,b,c]=a.split("/");return[b,c]}};__c.qkb=function(a,b){if(b=pkb(b)){const [c,d]=b;if(a.O_c(c))return[c,d]}};__c.vs=function(a,b,c,d){c=a.Lla(c);for(const e of Object.keys(b))a.fC(e)&&c(e)&&d(b[e],e)};__c.rkb=function(a,b,c){const d={};a.copy(b,c,d);return d};__c.skb=function(a,b,c){return a.attributes[c].N_c?b[c]:b[c]!==a.attributes[c].defaultValue?b[c]:void 0};
__c.tkb=function(a,b,c){const d={};__c.vs(a,b,"all",(e,f)=>d[f]=c(e,f));return d};__c.ws=function(a,b){const c={};for(const [d,e]of Object.entries(b))try{ma(a.fC(d)),c[d]=null!=e?a.attributes[d].normalize(e):void 0}catch(f){throw f;}return c};__c.vkb=function(a){return new ukb("block",a)};xs=__c.xs=function(a,b){return new wkb(a,b)};ys=__c.ys=function(a,b,c){return new xkb(a,b,c)};zs=__c.zs=function(a,b){return new ykb(a,b,b[0])};
__c.Akb=function(a){const b=(d,e)=>{if("string"===typeof e)return d[e]?d[e]:(d=okb(e))&&a.NPa[d]?a.NPa[d]:(e=pkb(e))&&a.Ht[e[0]]},c=new Proxy(a.static,{get:b,has:(d,e)=>null!=b(d,e),ownKeys:d=>Object.keys(d)});return new __c.zkb(c,new Set(Object.keys(a.static)),new Set(Object.keys(a.NPa)),new Set(Object.keys(a.Ht)))};As=function(a){return{type:0,length:a}};Bkb=function(a){return{type:1,length:a}};Bs=function(a,b){return a.JB(1,b).length};
Cs=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return Ckb;ma(0<=c[0]);b=new Map;a=a.Pc(c[c.length-1],0);let d=0,e=0;for(const f of c){for(c=a.head;d<f;){pa(null!=c);switch(c.type){case 0:c=a.Yx(Math.min(f-d,c.length));d+=c;e+=c;break;case 1:e+=Bs(a,c.length);break;default:throw new r(c);}c=a.head}c&&1===c.type&&(e+=Bs(a,c.length));if(d!==f)throw Error();b.set(d,e)}return b};
Dkb=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return Ckb;ma(0<=c[0]);b=new Map;a=a.Pc(0,c[c.length-1]);let d=0,e=0;for(const f of c){for(c=a.head;e<f;){pa(null!=c);switch(c.type){case 0:c=a.Yx(Math.min(f-e,c.length));d+=c;e+=c;break;case 1:e+=Bs(a,Math.min(f-e,c.length));break;default:throw new r(c);}c=a.head}if(e!==f)throw Error();b.set(e,d)}return b};Ekb=function(a){return JSON.stringify(a,(b,c)=>null!=c?c:null)};Ds=function(a){return new Fkb(a.yld)};
Hkb=function(a,b,c,d){var e=Math.max(a.kp,b.kp),f=Math.max(a.Wy,b.Wy);a=a.Pc(void 0,e,f);b=b.Pc(void 0,e,f);e=a.head;for(f=b.head;e||f;){if(e&&0===e.type||f&&0===f.type){f=a.pv();const k=b.pv(),l=c.pv();e=d;for(var g=f.head,h=k.head;g||h;){if(g&&0===g.type||h&&0===h.type){g=f.bt();h=k.bt();for(const n of Gkb(g,h))l.rl(n,e(n,f.attrs[n],k.attrs[n]))}else if(g&&h)g=Math.min(g.length,h.length),f.Bm(g),k.Bm(g),l.FB(g);else throw Error(`length mismatch: ${g} x ${h}`);g=f.head;h=k.head}f.finish();k.finish();
l.finish()}else if(e&&f)e=Math.min(e.length,f.length),Es(a,e),Es(b,e),c.rows(e);else throw Error(`length mismatch: ${e} x ${f}`);e=a.head;f=b.head}a.finish();b.finish()};Jkb=function(a,b,c,d){return Fs.isIdentity(c)&&Fs.isIdentity(d)||b.items.isEmpty()?b:Ikb("apply",a.yld,b,c,d)};
Ikb=function(a,b,c,d,e){const f=new Gs,[g,h]="apply"===a?[c.items.Pc(e.pre),e.Pc(c.items.length,0)]:[c.items.Pc(e.post),e.Pc(0,c.items.length)];e=g.head;var k=h.head;for(c=0;e||k;){if(k&&1===k.type)Bs(h,k.length),"apply"===a?f.jc(k.length):g.Bm(k.length);else if(e&&0===e.type){e=g.bt();const [n,p]="apply"===a?[e.Pc(d.pre),d.Pc(e.length,0)]:[e.Pc(d.post),d.Pc(0,e.length)];e=a;k=new Gs;var l=n.head;let q=p.head;for(;l||q;){if(q&&1===q.type)Bs(p,q.length),"apply"===e?k.jc(q.length):n.Bm(q.length);else if(l)0===
l.type?k.grad(n.bt()):q?(l=Math.min(l.length,q.length),n.Bm(l),p.Yx(l),k.jc(l)):(n.Bm(l.length),k.jc(l.length));else throw Error(`length mismatch: ${l} vs ${q}`);l=n.head;q=p.head}e=k.build();e.isEmpty()||(f.grad(e),c=Math.max(c,e.length));n.finish();p.finish()}else if(e&&k)e=Math.min(k.length,e.length),g.Bm(e),h.Yx(e),f.jc(e);else throw Error("length mismatch");e=g.head;k=h.head}g.finish();h.finish();a=f.build();return Hs.of(b,a,c,a.length)};Kkb=function(a){return{type:1,length:a}};
Es=__c.Es=function(a,b){pa(null==a.bU);return a.MPa.Bm(b)};Lkb=function(a,b,c,d){return c===d?!0:c&&d?a(b,c.Tb,d.Tb)&&a(b,c.r,d.r):!1};__c.Mkb=function(a,b,c,d){if(!d)return c;ma(a(b,c,d.Tb),"{} != {}",c,d.Tb);return d.r};Nkb=function(a,b,c,d){return Lkb(a,b,c,d)?void 0:{t:c,b:d}};
__c.Okb=function(a,b,c){const d={};if(b&&c)for(const f of Gkb(b,c)){var e=Nkb(a,f,b[f],c[f]);e&&(d[f]=e)}else if(b)for(e of Is(b))(c=Nkb(a,e,b[e]))&&(d[e]=c);else if(c)for(const f of Is(c))(b=Nkb(a,f,void 0,c[f]))&&(d[f]=b);return Js(d)?void 0:d};Pkb=function(a,b,c){return Gkb(b,c).every(d=>{var e=b&&b[d],f=c&&c[d];return e===f?!0:e&&f?Lkb(a,d,e.t,f.t)&&Lkb(a,d,e.b,f.b):!1})};Is=__c.Is=function(a){return Object.keys(a)};
Gkb=function(a,b){return a&&b?[...(new Set([...Is(a),...Is(b)]))]:a?Is(a):b?Is(b):[]};Js=__c.Js=function(a){return 0===Is(a).length};Rkb=function(a,b){b.forEach(a.Jh.fC,(c,d,e)=>{const f=a.grid.get(c,d),g=f?{...f}:{};Qkb(e,(h,k)=>{null!=h&&(pa(a.Jh.nya(k,f&&f[k],h.o)),g[k]=h.n)});a.write(c,d,g)})};Qkb=function(a,b){for(const c of Object.keys(a))b(a[c],c)};Skb=function(a,b){return a&&b?[...(new Set([...Object.keys(a),...Object.keys(b)]))]:a?Object.keys(a):b?Object.keys(b):[]};
Ks=__c.Ks=function(a,b,c,d){pa(0<=a);pa(0<=b);pa(a<=c);pa(b<=d);return{left:a,top:b,right:c,bottom:d}};__c.Tkb=function(a,b){return{span:a,state:b}};Ukb=function(a){const b=a.rows[a.y];if(null!=b)for(;null==b.cells[a.x]&&a.x<b.cells.length;)a.x++};Vkb=function(a){for(;null==a.rows[a.y]&&a.y<a.rows.length;)a.y++};Ls=function(a,b){return a.right===b.right&&a.bottom===b.bottom};
Wkb=function(a,b,c,d){if(Fs.isIdentity(c)&&Fs.isIdentity(d))return b;const e=new Set,f=new Set;b.forEach((l,n,p)=>{e.add(l);f.add(n);switch(p.type){case 1:p.bounds&&e.add(p.bounds.o.right);p.bounds&&f.add(p.bounds.o.bottom);p.bounds&&e.add(p.bounds.n.right);p.bounds&&f.add(p.bounds.n.bottom);break;case 0:p.o&&e.add(p.o.right);p.o&&f.add(p.o.bottom);p.n&&e.add(p.n.right);p.n&&f.add(p.n.bottom);break;default:throw new r(p);}});const g=Cs(c,e),h=Cs(d,f),k=new Ms;b.forEach((l,n,p)=>{switch(p.type){case 1:k.add(m(g.get(l)),
m(h.get(n)),a.update(p.bounds&&{o:{right:m(g.get(p.bounds.o.right)),bottom:m(h.get(p.bounds.o.bottom))},n:{right:m(g.get(p.bounds.n.right)),bottom:m(h.get(p.bounds.n.bottom))}},p.delta));break;case 0:k.add(m(g.get(l)),m(h.get(n)),a.replace(p.o&&{right:m(g.get(p.o.right)),bottom:m(h.get(p.o.bottom)),state:p.o.state},p.n&&{right:m(g.get(p.n.right)),bottom:m(h.get(p.n.bottom)),state:p.n.state}));break;default:throw new r(p);}});return k.build()};
Zkb=function(a,b,c){const d=new Ms;Xkb(b.Pc(),c.Pc(),(e,f,g,h)=>{null==b&&null==c||d.add(e,f,Ykb(a,g,h))});return d.build()};Xkb=function(a,b,c){var d=a.head;let e=b.head;for(;d||e;){d=null==d?1:null==e?-1:d===e||d.y===e.y&&d.x===e.x?0:d.y<e.y||d.y===e.y&&d.x<e.x?-1:1;if(0>d){const {x:f,y:g,value:h}=a.hz();c(f,g,h,void 0)}else if(0<d){const {x:f,y:g,value:h}=b.hz();c(f,g,void 0,h)}else{const {x:f,y:g,value:h}=a.hz();({value:d}=b.hz());c(f,g,h,d)}d=a.head;e=b.head}a.finish();b.finish()};
Ykb=function(a,b,c){if(null==b)return c;if(null==c)return b;switch(b.type){case 0:a:switch(c.type){case 1:pa(null!=b.n);c.bounds&&pa(Ls(b.n,c.bounds.o));a=a.replace(b.o,{...(c.bounds?c.bounds.n:b.n),state:c.delta?a.component.apply(b.n.state,c.delta):b.n.state});break a;case 0:pa(Ns(a,b.n,c.o));a=a.replace(b.o,c.n);break a;default:throw new r(c);}return a;case 1:a:switch(c.type){case 1:b.bounds&&c.bounds&&pa(Ls(b.bounds.n,c.bounds.o));const d=b.bounds&&c.bounds?{o:b.bounds.o,n:c.bounds.n}:b.bounds||
c.bounds;b=b.delta&&c.delta?a.component.compose(b.delta,c.delta):b.delta||c.delta;a=a.update(d,b);break a;case 0:pa(null!=c.o);b.bounds&&pa(Ls(b.bounds.n,c.o));a=a.replace({...(b.bounds?b.bounds.o:c.o),state:b.delta?a.component.Jk(c.o.state,b.delta):c.o.state},c.n);break a;default:throw new r(c);}return a;default:throw new r(b);}};Ns=function(a,b,c){return b===c?!0:b&&c?Ls(b,c)&&a.component.Oh(b.state,c.state):!1};
blb=function(a,b,c,d,e,f){const g=0===d.type?d.n:d.bounds&&d.bounds.n,h=g?g.bottom:c;for(let n=Math.max(c,f.yi);n<=h;n++)$kb(f,2*n),f.pv(),f.XYb((p,q)=>{e.append(Ks(p,q,p,q))}),f.V7a();f.yi<=h&&$kb(f,2*(h+1));if(null==g)return{M3a:b}=alb(e,{left:b,top:c,right:b,bottom:c}),b?a.replace(void 0,void 0):void 0;const {M3a:k,vHb:l}=alb(e,{left:b,top:c,right:g.right,bottom:g.bottom});if(k){if(l)return a.update({o:{right:g.right,bottom:g.bottom},n:l},void 0);pa(0===d.type);return a.replace(d.n,void 0)}};
dlb=function(a,b){clb(a,b.left,b.top);a.append(b)};alb=function(a,b){clb(a,b.left,b.top);if(a.readBuffer(b.left,b.top))return{M3a:!0,vHb:void 0};let c=b.left,d=b.top;for(var e=b.left+1;e<=b.right;e++){if(a.readBuffer(e,b.top))return{M3a:!0,vHb:{right:c,bottom:d}};c=e}for(e=b.top+1;e<=b.bottom;e++){for(let f=b.left;f<=c;f++)if(a.readBuffer(f,e))return{M3a:!0,vHb:{right:c,bottom:d}};d=e}return{M3a:!1,vHb:void 0}};
clb=function(a,b,c){c>a.fqa&&(a.buffer.splice(0,c-a.fqa),a.fqa=c,a.LLa=0);b>a.LLa&&a.buffer[0]&&(a.buffer[0].splice(0,b-a.LLa),a.LLa=b)};elb=function(a,b,c){c-=a.fqa;a=0===c?b-a.LLa:b;pa(0<=c&&0<=a);return{Ypd:a,bqd:c}};flb=function(a){const b=Fs.dg();a=a.Pc();let c=a.head;for(;c;){switch(c.type){case 0:b.retain(2*c.length);a.Yx(c.length);break;case 1:b.expand(2*c.length);Bs(a,c.length);break;default:throw new r(c);}c=a.head}return b.build()};
$kb=function(a,b){for(pa(b>=a.Qha);b>a.Qha;){var c=a.Pc.head;pa(null!=c);0===c.type?(a.pv(),a.V7a()):(c=Math.min(c.length,b-a.Qha),Es(a.Pc,c),a.Qha+=c)}};glb=function(a,b){const c=new Ms,d=new Set;for(let e=b.top;e<=b.bottom;e++)for(let f=b.left;f<=b.right;f++){const g=a.grid.get(e,f);null==g||d.has(g)||(d.add(g),c.add(g.span.left,g.span.top,a.domain.replace({right:g.span.right,bottom:g.span.bottom,state:a.type.Vb(g.value)},void 0)))}return a.domain.Pd({cells:c.build()})};
hlb=function(a,b){return c=>{const {left:d,top:e}=b.E8c.get();return a.domain.Pd({cells:(new Ms).add(d,e,a.domain.update(void 0,c)).build()})}};Ps=function(a,b,c,d){a.zj.set(b,new Os(c,d));return a};jlb=function(a,b,c,d){a.zj.set(b,new ilb(c,d));return a};klb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};
llb=function(a,b){if(Fs.isIdentity(b))return a;const c=new Set;for(const e of a.values())switch(e.type){case 0:null!=e.oldValue&&c.add(e.oldValue);null!=e.newValue&&c.add(e.newValue);break;case 1:c.add(e.oldValue);c.add(e.newValue);break;default:throw new r(e);}const d=Cs(b,c);return Yh(a,e=>{switch(e.type){case 0:return new Os(null!=e.oldValue?m(d.get(e.oldValue)):void 0,null!=e.newValue?m(d.get(e.newValue)):void 0);case 1:return new ilb(m(d.get(e.oldValue)),m(d.get(e.newValue)));default:throw new r(e);
}})};Qs=function(a){return{start:`${"a/"}${a}`,end:`${"b/"}${a}`}};mlb=function(a){pa(a.startsWith("a/")||a.startsWith("b/"));return a.substring(2)};nlb=function(a){const b=new Map;for(const [c,d]of a)a=Qs(c),b.set(a.start,d.start),b.set(a.end,d.end);return b};olb=function(a){const b=new Map;a=new Map(a);for(const c of a.keys()){const d=mlb(c),e=Qs(d),f=m(a.get(e.start)),g=m(a.get(e.end));a.delete(e.start);a.delete(e.end);b.set(d,Rs.from({start:f,end:g}))}if(a.size)throw Error();return b};
plb=function(a){const b=Us.dg();for(const [d,e]of a.ze)switch(e.type){case "replace":var c=Qs(d);Ps(b,c.start,e.oldValue?e.oldValue.start:void 0,e.newValue?e.newValue.start:void 0);Ps(b,c.end,e.oldValue?e.oldValue.end:void 0,e.newValue?e.newValue.end:void 0);break;case "update":c=Qs(d);e.start&&jlb(b,c.start,e.start.oldValue,e.start.newValue);e.end&&jlb(b,c.end,e.end.oldValue,e.end.newValue);break;default:throw new r(e);}return Us.Pd(a.axis,b.build().zj)};
tlb=function(a){const b=new Map,c=new Map(a.zj);for(const [f,g]of c){const h=mlb(f),k=Qs(h);switch(g.type){case 0:var d=m(c.get(k.start)),e=m(c.get(k.end));pa(d.type===g.type);pa(e.type===g.type);pa(null!=d.oldValue===(null!=e.oldValue));pa(null!=d.newValue===(null!=e.newValue));c.delete(k.start);c.delete(k.end);b.set(h,new qlb(null!=d.oldValue&&null!=e.oldValue?Rs.from([d.oldValue,e.oldValue]):void 0,null!=d.newValue&&null!=e.newValue?Rs.from([d.newValue,e.newValue]):void 0));break;case 1:d=c.get(k.start);
e=c.get(k.end);d&&pa(d.type===g.type);e&&pa(e.type===g.type);c.delete(k.start);c.delete(k.end);b.set(h,new rlb(d?Vs.from(d):void 0,e?Vs.from(e):void 0));break;default:throw new r(g);}}if(c.size)throw Error();return slb.create(a.axis,b)};Xs=function(a,b,c){const {x:d,y:e,...f}=a;ma(Fs.xj(d,Ws(b)));ma(Fs.xj(e,Ws(c)));return f};
Ws=function(a){const b=Fs.dg();a.ops.forEach(c=>{switch(c.type){case 0:b.retain(c.length);break;case 1:b.expand(c.length);break;case 2:b.retain(c.length);break;case 3:b.expand(1);break;case 4:b.retain(1);break;default:throw new r(c);}});return b.build()};ulb=function(a,b){let c=a.items[b];null==c&&(c=a.items[b]={});return c};Ys=function(a,b){if(null!=b)return m(a.e0c.get(b))};vlb=function(a,b){let c;for(let d=b.top;d<=b.bottom&&!(c=a.zSa(d));d++);return c};
wlb=function(a,b){let c;for(let d=b.left;d<=b.right&&!(c=a.ySa(d));d++);return c};xlb=function(a,b){let c;for(let d=b.bottom;d>=b.top&&!(c=a.zSa(d));d--);return c};ylb=function(a,b){let c;for(let d=b.right;d>=b.left&&!(c=a.ySa(d));d--);return c};zlb=function(a,b){const c=a.q1(b.wg),d=a.A4(b.Ig),e=a.q1(b.Ej||b.wg);a=a.A4(b.wk||b.Ig);ma(null!=c&&null!=d&&null!=e&&null!=a);ma(d<=a&&c<=e);return{left:c,top:d,right:e,bottom:a}};
__c.Zs=function(a,b){console.warn("SheetPages, SheetElements, and SheetItems are currently not supported. Call site:",a);return b};$s=__webpack_require__(519427);Alb=$s._isComputingDerivation;__c.Blb=$s.comparer;at=__c.at=$s.computed;Clb=$s.createAtom;bt=$s.observable;Dlb=$s.ObservableMap;var Elb,Glb;Elb=__webpack_require__(635872);__c.Flb=Elb.Om;Glb=Elb.kq;__c.Hlb=__webpack_require__(223897).h;__c.Ilb=__webpack_require__(17986).xQ;__c.Jlb=__webpack_require__(858800).U;__c.Klb=__webpack_require__(127414).C;var Llb;ct=__c.ct=class{static equals(a,b){return a?!!b&&a.equals(b):!b}map(a,b,c,d){return new Llb(this,a,b,c,d)}};
Llb=class extends ct{isIdentity(a){return this.component.isIdentity(this.l0(a))}compose(a,b){return this.Kua(this.component.compose(this.l0(a),this.l0(b)))}transform(a,b){const [c,d]=this.component.transform(this.l0(a),this.l0(b));return[this.Kua(c),this.Kua(d)]}ik(a){return this.Kua(this.component.ik(this.l0(a)))}xj(a,b){return a===b||this.component.xj(this.l0(a),this.l0(b))}identity(a){return this.Kua(this.component.identity(this.Xga(a)))}apply(a,b){const c=this.Xga(a);b=this.component.apply(c,
this.l0(b));return c===b?a:this.Gbb(b)}Jk(a,b){const c=this.Xga(a);b=this.component.Jk(c,this.l0(b));return c===b?a:this.Gbb(b)}Oh(a,b){return a===b||this.component.Oh(this.Xga(a),this.Xga(b))}equals(a){return this===a}constructor(a,b,c,d,e){super();this.component=a;this.Kua=b;this.l0=c;this.Gbb=d;this.Xga=e}};var Mlb=class extends ct{isIdentity(){return!0}compose(){}transform(){return[void 0,void 0]}ik(){}xj(){return!0}identity(){}apply(a){return a}Jk(a){return a}Oh(a,b){return this.Uw(a,b)}equals(a){return this===a}constructor(a){super();this.Uw=a}};var ojb=class{toString(){return`U(${this.delta})`}constructor(a){this.delta=a;this.type=0}},Nlb=class{toString(){return`R(${this.oldState}, ${this.newState})`}constructor(a,b){this.oldState=a;this.newState=b;this.type=1}},Olb=class extends ct{update(a){return this.component.isIdentity(a)?void 0:new ojb(a)}replace(a,b){return new Nlb(a,b)}isIdentity(a){return null==a||0===a.type&&this.component.isIdentity(a.delta)}compose(a,b){if(null==a)return b;if(null==b)return a;switch(a.type){case 0:switch(b.type){case 0:return this.update(this.component.compose(a.delta,
b.delta));case 1:return this.replace(this.component.Jk(b.oldState,a.delta),b.newState);default:throw new r(b);}case 1:switch(b.type){case 0:return this.replace(a.oldState,this.component.apply(a.newState,b.delta));case 1:return vr(this.component,a.newState,b.oldState),this.replace(a.oldState,b.newState);default:throw new r(b);}default:throw new r(a);}}transform(a,b){if(null==a||null==b)return[b,a];switch(a.type){case 0:switch(b.type){case 0:const [c,d]=this.component.transform(a.delta,b.delta);return[this.update(c),
this.update(d)];case 1:return[this.replace(this.component.apply(b.oldState,a.delta),b.newState),void 0];default:throw new r(b);}case 1:switch(b.type){case 0:return[void 0,this.replace(this.component.apply(a.oldState,b.delta),a.newState)];case 1:return vr(this.component,a.oldState,b.oldState),[void 0,this.replace(b.newState,a.newState)];default:throw new r(b);}default:throw new r(a);}}ik(a){if(null==a)return a;switch(a.type){case 0:return this.update(this.component.ik(a.delta));case 1:return this.replace(a.newState,
a.oldState);default:throw new r(a);}}xj(a,b){return a===b?!0:null==a||null==b?a===b:0===a.type&&0===b.type?this.component.xj(a.delta,b.delta):1===a.type&&1===b.type?this.component.Oh(a.oldState,b.oldState)&&this.component.Oh(a.newState,b.newState):!1}identity(){}apply(a,b){if(null==b)return a;switch(b.type){case 0:return this.component.apply(a,b.delta);case 1:return vr(this.component,a,b.oldState),b.newState;default:throw new r(b);}}Jk(a,b){if(null==b)return a;switch(b.type){case 0:return this.component.Jk(a,
b.delta);case 1:return vr(this.component,a,b.newState),b.oldState;default:throw new r(b);}}Oh(a,b){return this.component.Oh(a,b)}equals(a){return this===a||a instanceof Olb&&this.component.equals(a.component)}constructor(a){super();this.component=a}};var Plb=class extends ct{isIdentity(a){return null==a||this.component.isIdentity(a)}compose(a,b){ma(null==a===(null==b));return null!=a&&null!=b?this.component.compose(a,b):void 0}transform(a,b){ma(null==a===(null==b));return null!=a&&null!=b?this.component.transform(a,b):[void 0,void 0]}ik(a){return null!=a?this.component.ik(a):void 0}xj(a,b){return null!=a&&null!=b&&this.component.xj(a,b)||null==a&&null==b}identity(a){return null!=a?this.component.identity(a):void 0}apply(a,b){ma(null==a===(null==
b));return null!=a&&null!=b?this.component.apply(a,b):void 0}Jk(a,b){ma(null==a===(null==b));return null!=a&&null!=b?this.component.Jk(a,b):void 0}Oh(a,b){return null!=a&&null!=b&&this.component.Oh(a,b)||null==a&&null==b}equals(a){return this===a||a instanceof Plb&&this.component.equals(a.component)}constructor(a){super();this.component=a;ma(!(a instanceof Plb))}};var nib={type:0,length:1},oib={type:1,length:1},qib={type:2,length:1},yib=xr(),xib=yr(),zib=yr(new Nlb),vib=class{toString(){return this.ops.map(uib).join("")}constructor(a,b,c,d){this.ops=a;this.pre=b;this.post=c;this.LIa=d}},Qlb=new vib([],0,0,0),Rlb=class{e5(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(wr(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(pib(this.acc));this.post+=this.acc;this.acc=0;break;case 2:this.ops.push(rib(this.acc));
this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 3:case 4:break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ma(0<=b,"{} < 0",b);b&&(this.e5(a),this.acc+=b);return this}fHb({Fh:a,jl:b}){const c=this.ops.length,d=this.m_||(this.m_=new Map),e=this.Awa||(this.Awa=new Map);ma(!d.has(a),"duplicate record: {}",a);ma(!e.has(b),"duplicate recall: {}",b);d.set(a,c);e.set(b,c)}append(a,b){switch(a.type){case 0:return this.retain(a.length);case 1:return this.expand(a.length);case 2:return this.foa(a.length);
case 3:var c=a.shift;if(!b&&(b=a.state,c&&c.Fh===c.jl&&(c=void 0,a=xr(b)),null==b&&null==c))return this.expand();this.e5(a.type);c&&this.fHb(c);this.ops.push(a);this.post++;return this;case 4:c=a.shift;if(!b)if(b=a.delta,c&&c.Fh===c.jl&&(c=void 0,a=yr(b)),null==b){if(null==c)return this.retain()}else if(1===b.type&&null==b.oldState&&null==b.newState&&null==c)return this.foa();this.e5(a.type);c&&this.fHb(c);this.ops.push(a);this.pre++;this.post++;return this;default:throw new r(a);}}retain(a){return null==
a||"number"===typeof a?this.accumulate(0,a):this.append(yr(void 0,a))}expand(a){return null==a||"number"===typeof a?this.accumulate(1,a):this.append(xr(void 0,a))}foa(a){return null==a||"number"===typeof a?this.accumulate(2,a):this.append(yr(this.component.replace(void 0,void 0),a))}insert(a,b){return this.append(xr(a,b))}update(a,b){return this.append(yr(null!=a?this.component.update(a):void 0,b))}b_a(a){return this.append(yr(this.component.replace(void 0,a)))}bV(a){return this.append(yr(this.component.replace(a,
void 0)))}change(a,b,c){return this.append(yr(this.component.replace(a,b),c))}build(a){0!==this.mode&&this.e5();if(a&&a.dyc())return a.B5b(this.ops);if(!this.m_&&!this.Awa)return new vib(this.ops,this.pre,this.post,0);a=this.ops;const b=m(this.m_);var c=[...b.keys()];if(c.some((g,h)=>g!==h)){const g=new Map;c.forEach((h,k)=>g.set(h,k));for(const h of b.values())switch(c=a[h],c.type){case 3:var d=c.shift,e=g.get(d.Fh),f=g.get(d.jl);if(e!==d.Fh||f!==d.jl)a[h]=xr(c.state,{Fh:e,jl:f});break;case 4:d=
c.shift;e=g.get(d.Fh);f=g.get(d.jl);if(e!==d.Fh||f!==d.jl)a[h]=yr(c.delta,{Fh:e,jl:f});break;case 0:case 1:case 2:throw Error(`INSERT | UPDATE expected: ${uib(c)}`);default:throw new r(c);}}return new vib(a,this.pre,this.post,b.size)}constructor(a){this.component=a;this.ops=[];this.acc=this.post=this.pre=0;this.Awa=this.m_=this.mode=void 0}},Slb=class{static create(a,b,c){ma(0<=b,"{} < 0",b);ma(0<=c,"{} < 0",c);a=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,wr(b)]:a.ops;return new Slb(a)}get head(){return this.ql}JB(a,
b=1){const c=m(this.ql);if(c.type!==a)throw Error();const d=c.length;ma(0<b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.ql=wr(d-b),wr(b);case 1:return this.ql=pib(d-b),pib(b);case 2:return this.ql=rib(d-b),rib(b);default:throw new r(a);}else return this.ql=this.ops[this.i++],c}constructor(a){this.ops=a;this.i=0;this.ql=a[this.i++]}},Tlb=class{fHb(a,{Fh:b,jl:c}){const d=this.m_||(this.m_=new Map),e=this.Awa||(this.Awa=new Map);pa(!d.has(b),"already recorded: {}",b);pa(!e.has(c),
"already recalled: {}",c);d.set(b,a);e.set(c,this.length)}append(a,b){b?this.fHb(a,b):null!=a&&(this.list[this.length]=a);this.length++;return this}expand(a=1){ma(0<=a,"{} < 0",a);this.length+=a;return this}build(){const a=this.list;if(this.m_||this.Awa){const c=m(this.m_);var b=m(this.Awa);ra(c.size,b.size);for(const [d,e]of b)pa(c.has(d),"recall has no record: {}",d),b=c.get(d),null!=b&&(a[e]=b)}null!=this.SRc&&ra(this.length,this.SRc);return a}constructor(a){this.SRc=a;this.list=[];this.length=
0;this.Awa=this.m_=void 0}},Ulb=class{static create(a,b){a.length<b&&(a=a.slice(),a.length=b);return new Ulb(a)}finish(){ra(this.Nta,this.input.length)}constructor(a){this.input=a;this.Nta=0}},Vlb=class{dyc(){return!!this.ocb}B5b(a){const b=new Rlb(this.component);for(const c of a)switch(c.type){case 3:b.append(this.VSc(c));break;case 4:b.append(this.WSc(c));break;case 0:case 1:case 2:b.append(c);break;default:throw new r(c);}return b.build()}constructor(a){this.component=a;this.inc=this.jnc=this.ocb=
void 0}},Wlb=class extends Vlb{VSc(a){if(!a.shift)return a;const b=a.state,c=a.shift;var d=this.i_a&&this.i_a.get(c.Fh);d=this.component.apply(b,d);const e=Hib(this,c);return d!==b||e!==c?xr(d,e):a}WSc(a){if(!a.shift)return a;const b=a.delta,c=a.shift;var d=this.i_a&&this.i_a.get(c.Fh);d=this.component.compose(b,d);const e=Hib(this,c);return d!==b||e!==c?yr(d,e):a}constructor(...a){super(...a);this.i_a=void 0}},Xlb=class extends Vlb{dyc(){return super.dyc()||!!this.yJa||!!this.fKa}VSc(a){if(!a.shift)return a;
const b=a.shift,c=Hib(this,b);if(c!==b)throw Error(`${JSON.stringify(c)} != ${JSON.stringify(b)}`);return a}WSc(a){const b=a.delta,c=a.shift;var d=this.yJa;if(d){var e=d.get(a);if(null==e)e=a.delta;else{d.delete(a);d=m(this.fKa);var f=d.get(e);d.delete(e);e=f}}else e=a.delta;d=c&&Hib(this,c);return e!==b||d!==c?yr(e,d):a}B5b(a){a=super.B5b(a);if(this.yJa&&this.yJa.size)throw Error(`unconsumed setSurrogates: ${[...this.yJa.values()]}`);if(this.fKa&&this.fKa.size)throw Error(`unconsumed subSurrogates: ${[...this.fKa.keys()]}`);
return a}constructor(...a){super(...a);this.fKa=this.yJa=void 0}},Ylb=class extends ct{dg(){return new Rlb(this.component)}isIdentity(a){return!a.ops.length||a.ops.every(b=>{switch(b.type){case 0:return!0;case 4:return!b.shift&&this.component.isIdentity(b.delta);case 2:case 1:case 3:return!1}throw new r(b);})}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=this.component,d=this.dg(),e=new Wlb(c),f=Slb.create(a,0,b.pre),g=Slb.create(wib(b,a.LIa),a.post,0);for(var h=f.head,
k=g.head;h||k;){if(k)if(1===k.type)d.append(g.JB(k.type,k.length));else if(3===k.type)d.append(zr(g,k.type));else if(h)if(1===h.type)switch(k.type){case 2:case 0:var l=Math.min(h.length,k.length);f.JB(h.type,l);g.JB(k.type,l);d.append(pib(l));break;case 4:l=zr(f,h.type);k=zr(g,k.type);h=k.shift;d.append(xr(c.apply(l.state,k.delta),h));break;default:throw new r(k);}else if(3===h.type){l=zr(f,h.type);k=zr(g,k.type);h=l.shift;var n=k.shift;null==h?d.append(xr(c.apply(l.state,k.delta),n)):null==n?(d.append(l),
Ar(e,h.jl,k.delta)):(d.append(xr(l.state,{Fh:h.Fh,jl:n.jl})),Ar(e,h.jl,k.delta),Gib(e,n.Fh,h.jl))}else 4===h.type||4===k.type?(k=zr(f,4),l=zr(g,4),h=k.shift,n=l.shift,null==h?d.append(yr(c.compose(k.delta,l.delta),n)):null==n?(d.append(k),Ar(e,h.jl,l.delta)):(d.append(yr(k.delta,{Fh:h.Fh,jl:n.jl})),Ar(e,h.jl,l.delta),Gib(e,n.Fh,h.jl))):(l=Math.min(h.length,k.length),h=f.JB(h.type,l),k=g.JB(k.type,l),d.append(2===h.type||2===k.type?rib(l):wr(l)));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);
h=f.head;k=g.head}return d.build(e)}transform(a,b){if(!a.ops.length||!b.ops.length)return[b,a];const c=this.component,d=Slb.create(a,b.pre,0),e=Slb.create(wib(b,a.LIa),a.pre,0),f=this.dg(),g=this.dg(),h=new Xlb(c),k=new Xlb(c);for(var l=d.head,n=e.head;l||n;){if(l&&3===l.type)if(n=zr(d,l.type),n.shift){var p=n.shift;l=yr();g.append(l,"nocollapse");f.append(n);Cr(h,p.jl,l);Br(h,p.Fh)}else g.append(nib),f.append(n);else if(l&&1===l.type)n=d.JB(l.type,l.length),g.append(wr(n.length)),f.append(n);else if(n&&
3===n.type)if(n=zr(e,n.type),n.shift){l=n.shift;p=l.Fh;l=l.jl;var q=-p-1,v=yr(void 0,{Fh:-l-1,jl:l});g.append(n);f.append(v);Cr(k,l,v);Br(k,p);Fib(k,q,p)}else g.append(n),f.append(nib);else if(n&&1===n.type)p=e.JB(n.type,n.length),g.append(p),f.append(wr(n.length));else if(l&&n)if(4===l.type||4===n.type){p=zr(d,l.type);l=zr(e,n.type);const [w,x]=c.transform(p.delta,l.delta);n=p.shift;l=l.shift;if(n)if(l){p=l.Fh;l=l.jl;q=n.Fh;n=n.jl;v=-p-1;const z=yr(void 0,{Fh:-l-1,jl:l}),B=yr(void 0,{Fh:p,jl:l});
g.append(B);f.append(z);Cr(h,n,B);Cr(k,l,z);Br(h,q,w);Br(k,p,x);Fib(k,v,q);Gib(k,p,n)}else p=n.Fh,l=n.jl,q=yr(),g.append(q,"nocollapse"),f.append(yr(x,n)),Cr(h,l,q),Br(h,p,w);else l?(n=l.Fh,p=l.jl,q=-n-1,v=yr(void 0,{Fh:-p-1,jl:p}),g.append(yr(w,l)),f.append(v),Cr(k,p,v),Br(k,n,x),Fib(k,q,n)):(g.append(yr(w)),f.append(yr(x)))}else p=Math.min(l.length,n.length),l=d.JB(l.type,p),n=e.JB(n.type,p),2===l.type&&2===n.type?g.append(wr(n.length)):g.append(n),f.append(l);else throw Error(`length mismatch (${a} x ${b})`);
l=d.head;n=e.head}return[g.build(h),f.build(k)]}ik(a){if(!a.ops.length)return a;const b=this.dg(),c=new Wlb(this.component);for(const d of a.ops)switch(d.type){case 0:case 1:case 2:b.retain(d.length);break;case 4:a=this.component.ik(d.delta);const e=d.shift&&Iib(d.shift);e?(b.retain(e),Ar(c,e.jl,a)):b.append(yr(a));break;case 3:a=d.shift&&Iib(d.shift);null!=d.state?a?(b.retain(a),Ar(c,a.jl,this.component.replace(d.state,void 0))):b.bV(d.state):b.retain(a);break;default:throw new r(d);}return b.build(c)}xj(a,
b){if(a===b)return!0;if(a.pre!==b.pre||a.post!==b.post||a.ops.length!==b.ops.length)return!1;for(let c=0;c<a.ops.length;c++)if(!this.cjc(a.ops[c],b.ops[c]))return!1;return!0}cjc(a,b){switch(a.type){case 0:case 1:case 2:return a.type===b.type&&a.length!==b.length;case 3:return a.type===b.type&&this.component.Oh(a.state,b.state)&&Jib(a.shift,b.shift);case 4:return a.type===b.type&&this.component.xj(a.delta,b.delta)&&Jib(a.shift,b.shift);default:throw new r(a);}}Og(a){return new Tlb(a)}identity(){return Qlb}apply(a,
b){if(!b.ops.length)return a;const c=Ulb.create(a,b.pre),d=new Tlb(Math.max(a.length,b.pre)+(b.post-b.pre));a=b.pre<a.length?[...b.ops,wr(a.length-b.pre)]:b.ops;for(const e of a)switch(e.type){case 0:Bib(d,Dib(c,e.length));break;case 1:d.expand(e.length);break;case 2:pa(Aib(Dib(c,e.length)));d.expand(e.length);break;case 3:d.append(e.state,e.shift);break;case 4:d.append(this.component.apply(Cib(c),e.delta),e.shift);break;default:throw new r(e);}c.finish();return d.build()}Jk(a,b){if(!b.ops.length)return a;
const {unshift:c,GPe:d}=this.unshift(b);b=d;a=this.apply(a,c);const e=Ulb.create(a,b.post),f=new Tlb(Math.max(a.length,b.post)+(b.pre-b.post));a=b.post<a.length?[...b.ops,wr(a.length-b.post)]:b.ops;for(const g of a)switch(g.type){case 0:Bib(f,Dib(e,g.length));break;case 1:pa(Aib(Dib(e,g.length)));break;case 2:pa(Aib(Dib(e,g.length)));f.expand(g.length);break;case 3:vr(this.component,g.state,Cib(e));break;case 4:f.append(this.component.Jk(Cib(e),g.delta));break;default:throw new r(g);}e.finish();return f.build()}unshift(a){const b=
this.dg(),c=this.dg();for(const d of a.ops)switch(d.type){case 0:b.append(d);c.append(d);break;case 1:case 2:b.append(wr(d.length));c.append(d);break;case 4:d.shift?(b.retain(Iib(d.shift)),c.append(yr(d.delta))):(b.retain(),c.append(d));break;case 3:d.shift?(b.retain(Iib(d.shift)),c.append(xr(d.state))):(b.retain(),c.append(d));break;default:throw new r(d);}return{unshift:b.build(),GPe:c.build()}}Oh(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;const c=Object.keys(a),d=Object.keys(b);if(c.length!==
d.length)return!1;for(let e=0;e<c.length;e++)if(c[e]!==d[e]||!this.component.Oh(a[c[e]],b[d[e]]))return!1;return!0}equals(a){return this===a||a instanceof Ylb&&this.component.equals(a.component)}constructor(a){super();this.component=new Olb(new Plb(a))}};var Er,Lib,Zlb,Nib,Pib,fjb,Oib,mjb;Er=Object.freeze({serialize:a=>a,deserialize:a=>a});dt=__c.dt=Object.freeze({serialize(){throw Error("serialization not implemented");},deserialize(){throw Error("serialization not implemented");}});Lib=class{serialize(a){return this.b.serialize(this.a.serialize(a))}deserialize(a){return this.a.deserialize(this.b.deserialize(a))}constructor(a,b){this.a=a;this.b=b}};
Zlb=class{get serializer(){null==this.KCc&&(this.KCc=this.m9d());return this.KCc}serialize(a){return this.serializer.serialize(a)}deserialize(a){return this.serializer.deserialize(a)}constructor(a){this.m9d=a}};Nib=class{serialize(a){return a.map(b=>this.serializer.serialize(b))}deserialize(a){return a.map(b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
Pib=Object.freeze({serialize(a){let b=0,c=0;const d=__c.Kib(a),e=[];a.forEach((f,g)=>{if(f=g-c)b&&(e.push(b),b=0),e.push(-f);b++;c=g+1});return{items:d,mj:e}},deserialize({items:a,mj:b}){const c=[];let d=0;for(const e of b)0>e?d+=-e:0<e&&(a.slice(0,e).forEach(f=>c[d++]=f),a=a.slice(e));a.length&&a.forEach(e=>c[d++]=e);return c}});fjb=class{serialize(a){return Yh(a,b=>this.serializer.serialize(b))}deserialize(a){return Yh(a,b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
Oib=class{serialize(a){return Dr(this.fields,(b,c)=>b.serialize(a[c]))}deserialize(a){return Dr(this.fields,(b,c)=>b.deserialize(a[c]))}constructor(a){this.fields=a}};mjb=class{serialize(a){return null!=a?this.serializer.serialize(a):void 0}deserialize(a){return null!=a?this.serializer.deserialize(a):void 0}constructor(a){this.serializer=a}};Object.freeze({serialize:a=>a,deserialize:a=>new ojb(a.delta)});Object.freeze({serialize:a=>a,deserialize:a=>new Nlb(a.oldState,a.newState)});
Object.freeze({serialize:a=>({ops:a}),deserialize:a=>a.ops});var $lb,Uib,amb,bmb;$lb={next:()=>{},error:()=>{}};Uib=class{next(a){this.closed||this.o.next(this.f(a))}error(a){this.closed||(this.closed=!0,this.o.error(a))}constructor(a,b){this.o=a;this.f=b;this.closed=!1}};amb=class{create(a,b=__c.Klb,c=$lb){a=this.gy(a);b.subscribe(this.connect(a,c));return a}};
et=__c.et=class extends amb{map(a,b,c,d,e,f){return new bmb(this,a,b,c,d,e,f,Mib({serialize:b,deserialize:a},this.p0b),Mib({serialize:d,deserialize:c},this.$oa))}constructor(a,b){super();this.p0b=a;this.$oa=b}};
bmb=class extends et{gy(a){return this.oke(this.component.gy(this.Xga(a)))}connect(a,b){const c=this.component.connect(this.OMb(a),{next:d=>b.next(this.Kua(d)),error:d=>b.error(d)});return{next:d=>c.next(this.l0(d)),complete:()=>c.complete()}}Vb(a){return this.Gbb(this.component.Vb(this.OMb(a)))}destroy(a,b){return this.component.destroy(this.OMb(a),this.Xga(b))}di(a,b){return this.component.di(this.OMb(a),this.Xga(b))}constructor(a,b,c,d,e,f,g,h,k){super(h,k);this.component=a;this.Kua=b;this.l0=
c;this.Gbb=d;this.Xga=e;this.oke=f;this.OMb=g;this.domain=this.component.domain.map(this.Kua,this.l0,this.Gbb,this.Xga)}};ft=__c.ft=class{connect(a){pa(null==this.dJ);this.dJ=a;return{next:b=>{this.dJ&&Sib(this,b)},complete:()=>this.complete()}}complete(){this.dJ&&(this.dJ=void 0,Tib(this,"mutable disconnected"))}error(a){this.dJ&&(this.dJ.error(a),this.dJ=void 0,Tib(this,"mutable failure"))}Xp(a){var b;Sib(this,a);this.domain.isIdentity(a)||(null===(b=this.dJ)||void 0===b?void 0:b.next(a))}constructor(){this.clients=this.v6b=this.dJ=void 0}};var cmb;gt=__c.gt=class{get(){this.DU.reportObserved();return this.value}set(a){__c.Blb.identity(this.value,a)||(this.value=a,this.DU.reportChanged())}constructor(a){this.value=a;this.DU=Clb("")}};
cmb=class{static F(a){N(a,{poc:at,nYb:at})}get kp(){return this.cols.length}get Wy(){return this.rows.length}get poc(){const a=new Map;this.rows.forEach((b,c)=>a.set(b,c));return a}get nYb(){const a=new Map;this.cols.forEach((b,c)=>a.set(b,c));return a}get(a,b){a=this.rows[a];b=this.cols[b];if(null!=a&&null!=b){var c=this.values.get(this.bX(a,b));null==c&&Alb()&&(c=new gt,this.values.set(this.bX(a,b),c));return c&&c.get()}}set(a,b,c){let d=this.rows[a];null==d&&(d=this.rows[a]=this.u5c++);a=this.cols[b];
null==a&&(a=this.cols[b]=this.s5c++);(b=this.values.get(this.bX(d,a)))?b.set(c):this.values.set(this.bX(d,a),new gt(c))}delete(a,b){a=this.rows[a];b=this.cols[b];if(null!=a&&null!=b){var c=this.values.get(this.bX(a,b));c&&c.set(void 0);this.values.delete(this.bX(a,b))}}forEach(a){for(const c of this.rows)for(const d of this.cols){var b=this.values.get(this.bX(c,d));null!=b&&(b=b.get(),null!=b&&a(b,c,d))}}bX(a,b){return`${a}:${b}`}constructor(){cmb.F(this);this.s5c=this.u5c=0;this.rows=bt.array([],
{deep:!1});this.cols=bt.array([],{deep:!1});this.values=new Map}};var dmb,bjb,cjb,ajb,djb,ejb,emb,hjb,ijb,ljb,jjb,hmb,jmb,kmb,lmb;Ur=__c.Ur=class{constructor(a){this.serializer=a}};dmb=class extends Ur{Uw(a,b){return a===b}stringify(a){return JSON.stringify(a)}};bjb=class extends dmb{PM(a){return a===this.value}constructor(a){super(Er);this.value=a}};cjb=class extends dmb{PM(a){return this.values.has(a)}constructor(a){super(Er);this.values=a}};ajb=class extends dmb{constructor(a){super(Er);this.PM=a}};
djb=class extends Ur{PM(a){return a.every(b=>this.type.PM(b))&&(!this.u1a||this.u1a(a))}Uw(a,b){return a.length===b.length&&a.every((c,d)=>d in b&&this.type.Uw(c,b[d]))&&a.reduce(c=>c+1,0)===b.reduce(c=>c+1,0)}stringify(a){return a.length?"[ "+a.map(b=>this.type.stringify(b)).join(", ")+" ]":"[]"}constructor(a,b,c){super(c);this.type=a;this.u1a=b}};
ejb=class extends Ur{PM(a){return[...a].every(this.Afe)}Uw(a,b){if(a.size!==b.size)return!1;for(const [c,d]of a)if(a=b.get(c),null==a||!this.valueType.Uw(d,a))return!1;return!0}stringify(a){return a.size?`{ ${[...a].map(([b,c])=>`${this.keyType.stringify(b)} => ${this.valueType.stringify(c)}`).join(", ")} }`:"{}"}constructor(a,b,c){super(c);this.keyType=a;this.valueType=b;this.Afe=([d,e])=>emb.every(f=>!d.includes(f))&&this.keyType.PM(d)&&this.valueType.PM(e)}};emb=["$",".","\x00"];
hjb=class extends Ur{PM(a){return this.keys.every(b=>this.fields[b].PM(a[b]))&&(!this.u1a||this.u1a(a))}Uw(a,b){return this.keys.every(c=>this.fields[c].Uw(a[c],b[c]))}stringify(a){return this.keys.length?"{ "+this.keys.map(b=>`${b}: ${this.fields[b].stringify(a[b])}`).join(", ")+" }":"{}"}constructor(a,b){super(dt);this.fields=a;this.u1a=b;this.keys=Object.keys(this.fields)}};
ijb=class extends Ur{PM(a){return this.aK[this.ztb(a)].PM(a)}Uw(a,b){const c=this.ztb(a),d=this.ztb(b);return c===d&&this.aK[c].Uw(a,b)}stringify(a){return this.aK[this.ztb(a)].stringify(a)}constructor(a,b){super(dt);this.aK=a;this.ztb=b}};ljb=class extends Ur{PM(a){return null==a||this.type.PM(a)}Uw(a,b){return null!=a?null!=b&&this.type.Uw(a,b):null==b}stringify(a){return null!=a?this.type.stringify(a):"undefined"}constructor(a,b){super(b);this.type=a}};
jjb=class extends dmb{PM(a){return"string"===typeof a&&this.OAe.test(a)}constructor(a){super(Er);this.OAe=a}};ht=__c.ht=Jr(a=>"boolean"===typeof a);it=__c.it=Jr(a=>"string"===typeof a);__c.fmb=Jr(a=>1===a.length);__c.gmb=kjb(-2147483648,2147483647);hmb=Jr(a=>Number.isSafeInteger(a));jt=__c.jt=kjb(0,2147483647);__c.imb=kjb(1,2147483647);__c.kt=kjb(0,Number.MAX_SAFE_INTEGER);lt=__c.lt=Jr(a=>Number.isFinite(a));mt=__c.mt=Pr(0,Number.MAX_VALUE);jmb=Jr(a=>Number.isFinite(a)&&0<a&&a<=Number.MAX_VALUE);
kmb=Lr(mt);lmb=Lr(it);var mmb,njb;mmb={next:a=>ma(null==a),complete:()=>{}};
njb=class extends et{gy(a){return null!=a?this.type.gy(a):void 0}connect(a,b){if(null==a)return mmb;const c=this.type.connect(a,b);return{next:d=>c.next(m(d)),complete:()=>c.complete()}}Vb(a){return null!=a?this.type.Vb(a):void 0}destroy(a,b){if(null!=a&&null!=b)this.type.destroy(a,b);else if(null!=a||null!=b)throw Error(`${this.Vb(a)} != ${b}`);}di(a,b){return null!=a?null!=b&&this.type.di(a,b):null==b}constructor(a,b,c){super(b,c);this.type=a;this.domain=new Plb(this.type.domain)}};__c.nt=Vr(it);
__c.nmb=Vr(ht);Vr(__c.gmb);Vr(hmb);__c.ot=Vr(lt);__c.omb=Vr(jt);__c.pmb=Vr(__c.kt);__c.qmb=Vr(mt);var rmb,qjb,smb,rjb,vmb;rmb=class extends ft{kX(a){if(null!=a)switch(a.type){case 1:ma(this.Wod.Uw(this._value.get(),a.oldState));this._value.set(a.newState);break;case 0:ma(null==a.delta);break;default:throw new r(a);}}get value(){return this._value.get()}set value(a){Zib(this.Wod,a);const b=this._value.get();this.Xp(this.domain.replace(b,a))}constructor(a,b,c){super();this.Wod=a;this.domain=b;this._value=new gt(c)}};
qjb=class extends et{gy(a){a=Zib(this.type,a);return new rmb(this.type,this.domain,a)}connect(a,b){return a.connect(b)}Vb(a){return a.value}destroy(a,b){$ib(this.type,a.value,b)}di(a,b){this.type.Uw(a.value,b)||(a.value=b);return!0}constructor(a,b){super(dt,b);this.type=a;this.domain=new Olb(new Mlb((c,d)=>this.type.Uw(c,d)))}};
smb=class extends ft{instantiate(a){const b=Gr(this,pjb),{mutable:c,ow:d}=Hr(this.type,a,b);this.eob.set(c);this.MKa=d;this.v8a=b}destroy(a){Ir(this.type,a,this.MKa,this.eob.get())}kX(a){if(null!=a)switch(a.type){case 0:this.MKa.next(a.delta);break;case 1:this.destroy(a.oldState);this.instantiate(a.newState);break;default:throw Error();}}get ref(){return this.eob.get()}set(a){this.Xp(new Nlb(this.type.Vb(this.eob.get()),a))}constructor(a,b,c){super();this.type=a;this.domain=b;a=Gr(this,pjb);const {mutable:d,
ow:e}=Hr(this.type,c,a);this.eob=new gt(d);this.MKa=e;this.v8a=a}};rjb=class extends et{gy(a){return new smb(this.type,this.domain,a)}connect(a,b){return a.connect(b)}Vb(a){return this.type.Vb(a.ref)}destroy(a,b){this.type.destroy(a.ref,b)}di(a,b){this.type.di(a.ref,b)||a.set(b);return!0}constructor(a,b){super(dt,b);this.type=a;this.domain=new Olb(this.type.domain)}};pt=__c.pt=Wr(it);qt=__c.qt=Wr(ht);__c.rt=Wr(lt);__c.tmb=Wr(jt);__c.umb=Wr(__c.kt);__c.st=Wr(mt);vmb=Wr(jmb);__c.wmb=Wr(kmb);
__c.tt=Wr(lmb);ut=__c.ut=Yr(it);__c.xmb=Yr(ht);__c.vt=Yr(lt);__c.ymb=Yr(jt);__c.wt=Yr(mt);var sjb=new Map,zmb=class extends ct{create(a,b){return tjb(this,a,this.component.replace(void 0,b))}update(a,b){return tjb(this,a,this.component.update(b))}replace(a,b,c){return tjb(this,a,this.component.replace(b,c))}delete(a,b){return tjb(this,a,this.component.replace(b,void 0))}identity(){return sjb}isIdentity(a){return!a.size||Array.from(a.values()).every(b=>this.component.isIdentity(b))}ik(a){if(!a.size)return a;const b=new Map;for(const [c,d]of a)a=this.component.ik(d),null!=a&&b.set(c,a);
return b}compose(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const d of ujb(a,b)){const e=this.component.compose(a.get(d),b.get(d));null!=e&&c.set(d,e)}return c}transform(a,b){if(!a.size||!b.size)return[b,a];const c=new Map,d=new Map;for(const e of ujb(a,b)){const [f,g]=this.component.transform(a.get(e),b.get(e));null!=g&&c.set(e,g);null!=f&&d.set(e,f)}return[d,c]}apply(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.apply(a.get(e),d);null!=d?c.set(e,
d):c.delete(e)});return c}Jk(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.Jk(a.get(e),d);null!=d?c.set(e,d):c.delete(e)});return c}Oh(a,b){return a===b||a.size===b.size&&Array.from(ujb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return null!=d&&null!=c&&this.component.Oh(d,c)})}xj(a,b){return a===b||a.size===b.size&&Array.from(ujb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return null!=d&&null!=c&&this.component.xj(d,c)})}equals(a){return this===a||a instanceof zmb&&
this.component.equals(a)}constructor(a){super();this.component=new Olb(new Plb(a))}};__c.Amb=class extends ft{static F(a){N(a,{refs:bt.shallow})}get size(){return this.refs.size}set(a,b){var c=this.refs.get(a);c=null!=c?this.domain.replace(a,this.type.Vb(c),b):this.domain.create(a,b);this.Xp(c);c=this.get(a);if(null==c)throw Error(`Unable to set key "${a}" to value "${b}"`);return c}get(a){return this.refs.get(a)}has(a){return this.refs.has(a)}delete(a){const b=this.refs.get(a);null!=b&&(a=this.domain.delete(a,this.type.Vb(b)),this.Xp(a))}forEach(a){this.refs.forEach(a)}map(a){return[...this.refs].map(([b,
c])=>a(c,b))}every(a){return[...this.refs.entries()].every(([b,c])=>a(c,b))}entries(){return this.refs.entries()}keys(){return this.refs.keys()}values(){return this.refs.values()}[Symbol.iterator](){return this.refs[Symbol.iterator]()}Vb(){return Yh(this.refs,a=>this.type.Vb(a))}destroy(a){ma(this.refs.size===a.size);this.forEach((b,c)=>{const d=m(a.get(c));c=m(this.LBa.get(c));Ir(this.type,d,c.to,b)})}di(a){for(const [b,c]of this.refs)if(a.has(b)){const d=a.get(b);this.type.di(c,d)||this.set(b,d)}else this.delete(b);
for(const [b,c]of a)this.refs.has(b)||this.set(b,c);return!0}kX(a){a.forEach((b,c)=>{if(null!=b)switch(b.type){case 0:null!=b.delta&&m(this.LBa.get(c)).to.next(b.delta);break;case 1:null!=b.oldState?(this.A0b(c,b.oldState),this.refs.delete(c),this.LBa.delete(c)):(ma(!this.refs.has(c)),ma(!this.LBa.has(c)));if(null!=b.newState){const {FKc:d,value:e}=vjb(this,c,b.newState);this.refs.set(c,e);this.LBa.set(c,d)}break;default:throw new r(b);}})}A0b(a,b){const c=m(this.refs.get(a));a=m(this.LBa.get(a));
Ir(this.type,b,a.to,c)}constructor(a,b,c){super();__c.Amb.F(this);this.type=a;this.domain=b;this.refs=new Map;this.LBa=new Map;c.forEach((d,e)=>{const {FKc:f,value:g}=vjb(this,e,d);this.refs.set(e,g);this.LBa.set(e,f)})}};__c.Amb.prototype.dI=fa(102);
var wjb=class extends et{gy(a){return new __c.Amb(this.type,this.domain,a)}sm(a){return a}connect(a,b){return this.sm(a).connect(b)}Vb(a){return this.sm(a).Vb()}destroy(a,b){return this.sm(a).destroy(b)}di(a,b){return this.sm(a).di(b)}constructor(a,b){super(dt,b);this.type=a;this.domain=new zmb(this.type.domain)}};var Bmb={next:()=>{},complete:()=>{}},xjb=class extends et{gy(a){return Zib(this.type,a)}connect(){return Bmb}Vb(a){return a}destroy(a,b){$ib(this.type,a,b)}di(a,b){return this.type.Uw(a,b)}constructor(a,b){super(Er,b);this.type=a;this.domain=new Mlb((c,d)=>this.type.Uw(c,d))}};var yjb=class extends ct{static of(a){return new yjb(a)}update(a,b){const c={};m(this.components[a]).isIdentity(b)||(c[a]=b);return c}identity(){return this.id}isIdentity(a){return a===this.id||Object.entries(a).every(([b,c])=>null==c||this.components[b].isIdentity(c))}ik(a){const b={};var c=Object.keys(a);if(!c.length)return a;for(const e of c){var d=a[e];null!=d&&(c=this.components[e],d=c.ik(d),c.isIdentity(d)||(b[e]=d))}return b}compose(a,b){const c={};var d=Object.keys(a),e=Object.keys(b);if(!d.length)return b;
if(!e.length)return a;for(const f of new Set([...d,...e])){e=a[f];const g=b[f];null!=e&&null!=g?(d=this.components[f],e=d.compose(e,g),d.isIdentity(e)||(c[f]=e)):null!=e?c[f]=e:null!=g&&(c[f]=g)}return c}transform(a,b){const c={},d={};var e=Object.keys(a),f=Object.keys(b);if(!e.length||!f.length)return[b,a];for(const g of new Set([...e,...f]))if(e=a[g],f=b[g],null!=e&&null!=f){const h=this.components[g],[k,l]=h.transform(e,f);h.isIdentity(l)||(c[g]=l);h.isIdentity(k)||(d[g]=k)}else null!=e?c[g]=e:
null!=f&&(d[g]=f);return[d,c]}apply(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],null!=c&&(d[e]=this.components[e].apply(a[e],c));return d}Jk(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],null!=c&&(d[e]=this.components[e].Jk(a[e],c));return d}Oh(a,b){return a===b||Object.keys(this.components).every(c=>this.components[c].Oh(a[c],b[c]))}xj(a,b){if(a===b)return!0;const c=Object.keys(a),d=Object.keys(b);
return!c.length&&!d.length||__c.tr([...c,...d]).every(e=>{const f=a[e],g=b[e];return null!=f&&null!=g&&this.components[e].xj(f,g)})}equals(a){return this===a?!0:a instanceof yjb?Object.keys(this.components).length===Object.keys(a.components).length&&Object.keys(this.components).every(b=>b in a.components&&this.components[b].equals(a.components[b])):!1}constructor(a){super();this.components=a;this.id={}}};var Dmb;
__c.Cmb=class extends ft{Vb(){const a=this.Laa,b=this.hgb,c=this.dNa,d={};for(const e in a)d[e]=this.values[e];for(const e in b)d[e]=b[e].Vb(this.Pb[e]);for(const e in c)d[e]=c[e].Vb(this.attributes[e]);return d}destroy(a){const b=this.Laa,c=this.hgb,d=this.dNa,e=this.HNc;for(const f in b)$ib(b[f],this.values[f],a[f]);for(const f in c)Ir(c[f],a[f],this.mcd[f],this.Pb[f]);for(const f in d)Ir(d[f],a[f],this.iFc[f],this.attributes[f]);if(e)try{e()}catch(f){Promise.reject(f)}}di(a){const b=this.Laa,c=
this.hgb,d=this.dNa;for(const e in b)if(!b[e].Uw(this.values[e],a[e]))return!1;for(const e in c)if(!c[e].di(this.Pb[e],a[e]))return!1;for(const e in d)if(!d[e].di(this.attributes[e],a[e]))return!1;return!0}kX(a){for(const b in a)null!=a[b]&&(b in this.hgb?this.mcd[b].next(a[b]):b in this.dNa&&this.iFc[b].next(a[b]))}getAttribute(a){return this.attributes[a].value}setAttribute(a,b){this.attributes[a].value=b}constructor(a,b,c,d,e,f){super();this.domain=a;this.Laa=b;this.hgb=c;this.dNa=d;this.HNc=void 0;
this.values=Dr(b,(g,h)=>Zib(g,f[h]));a=Dr(c,(g,h)=>{const k=Bjb(this,h),{ow:l,mutable:n}=Hr(g,f[h],k);return{ref:n,MKa:l,v8a:k}});this.Pb=Dr(a,g=>g.ref);this.mcd=Dr(a,g=>g.MKa);Dr(a,g=>g.v8a);d=Dr(d,(g,h)=>{const k=Cjb(this,h),{ow:l,mutable:n}=Hr(g,f[h],k);return{ref:n,MKa:l,v8a:k}});this.attributes=Dr(d,g=>g.ref);this.iFc=Dr(d,g=>g.MKa);Dr(d,g=>g.v8a);if(e){const {Pb:g,attributes:h,$ea:k}=e.create({...this.values,...this.Pb,...this.attributes});this.UJc=Dr(e.Pb,(l,n)=>g[n]);this.LYb=Dr(e.attributes,
(l,n)=>h[n]);this.HNc=k}else this.UJc={},this.LYb={}}};__c.Cmb.prototype.YP=fa(104);xt=__c.xt=Symbol("$impl");Dmb=class extends et{};
__c.Emb=class extends Dmb{gy(a){a=new __c.Cmb(this.domain,this.values,this.Pb,this.attributes,this.computed,a);const b={...a.values,...a.Pb,...a.UJc};Object.defineProperties(b,this.cze);Object.defineProperty(b,xt,{enumerable:!1,writable:!1,value:a});return b}connect(a,b){return a[xt].connect(b)}Vb(a){return a[xt].Vb()}destroy(a,b){a[xt].destroy(b)}di(a,b){return a[xt].di(b)}bk({values:a={},Pb:b={},attributes:c={},computed:d}){return new __c.Emb({...this.values,...a},{...this.Pb,...b},{...this.attributes,
...c},Djb(this.computed,d))}constructor(a,b,c,d){super(dt,dt);this.values=a;this.Pb=b;this.attributes=c;this.computed=d;this.domain=zjb(Dr(this.values,e=>new Mlb((f,g)=>e.Uw(f,g))),Dr(this.Pb,e=>e.domain),Dr(this.attributes,e=>e.domain));Ajb(a,{...b,...(null===d||void 0===d?void 0:d.Pb)},{...c,...(null===d||void 0===d?void 0:d.attributes)});a=Dr(c,(e,f)=>({enumerable:!0,get(){return this[xt].getAttribute(f)},set(g){this[xt].setAttribute(f,g)}}));d=Dr((null===d||void 0===d?void 0:d.attributes)||{},
(e,f)=>({enumerable:!0,get(){return this[xt].LYb[f].value},set(g){this[xt].LYb[f].value=g}}));this.cze={...a,...d}}};__c.Emb.prototype.YP=fa(103);var Ejb=new __c.Emb({},{},{});var Fmb=class extends ct{PK(a){return a}isIdentity(a){return 0===a}compose(a,b){return a+b}transform(a,b){return[b,a]}xj(a,b){return a===b}identity(){return 0}apply(a,b){return a+b}Jk(a,b){return a-b}Oh(a,b){return a===b}},Gmb=class extends Fmb{ik(a){return 0-a}equals(a){return this===a||a instanceof Gmb}},Hmb=class extends Fmb{PK(a){ma(0<=a);return super.PK(a)}compose(a,b){ma(0<=a);ma(0<=b);return super.compose(a,b)}transform(a,b){ma(0<=a);ma(0<=b);return super.transform(a,b)}ik(a){ma(0<=a);return 0}apply(a,
b){ma(0<=b);return super.apply(a,b)}Jk(a,b){ma(0<=b);return super.Jk(a,b)}equals(a){return this===a||a instanceof Hmb}},Imb=new Gmb,Jmb=new Hmb;var Kmb=class extends ft{kX(a){this._value.set(this.domain.apply(this._value.get(),a))}get value(){return this._value.get()}PK(a){this.Xp(this.domain.PK(a))}constructor(a,b){super();this.domain=a;this._value=new gt(b)}},Lmb=class extends et{gy(a){return new Kmb(this.domain,a)}connect(a,b){return a.connect(b)}Vb(a){return a.value}destroy(a,b){vr(this.domain,a.value,b)}di(a,b){a.PK(b-a.value);return!0}},Mmb=class extends Lmb{constructor(){super(Er,Er);this.domain=Imb}},Nmb=class extends Lmb{di(a,b){return b<
a.value?!1:super.di(a,b)}constructor(){super(Er,Er);this.domain=Jmb}};new Mmb;new Nmb;__c.yt=class{get values(){return this.list.get()}get empty(){return this.values.empty}count(){return this.values.count()}toArray(){return this.values.toArray()}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}first(a){return this.values.first(a)}last(a){return this.values.last(a)}next(a,b){return this.values.next(a,b)}un(a,b){return this.values.un(a,b)}has(a){return this.values.has(a)}set(a,b){return this.values.set(a,b)}replace(a,b){return this.values.replace(a,b)}append(a){return this.values.append(a)}prepend(a){return this.values.prepend(a)}mFa(a,
b){return this.values.mFa(a,b)}insertBefore(a,b){return this.values.insertBefore(a,b)}delete(a){return this.values.delete(a)}map(a){return this.values.map(a)}flatMap(a){return this.values.flatMap(a)}filter(a){return this.values.filter(a)}forEach(a){return this.values.forEach(a)}reduce(a,b){return this.values.reduce(a,b)}some(a){return this.values.some(a)}every(a){return this.values.every(a)}constructor(a){this.list=a}};__c.ea=__c.yt.prototype;__c.ea.bJ=fa(120);__c.ea.TU=fa(115);__c.ea.t8=fa(111);
__c.ea.$p=fa(107);__c.ea.dI=fa(101);__c.zt=class extends ft{static F(a){N(a,{z8:at,tp:at,empty:at,jwb:at,fBb:at})}SGa(a){const b=Gr(this,e=>bs(this).retain(this.XK(c)).update(e).build()),{mutable:c,ow:d}=Hr(this.type,a,b);return{id:String(this.fDb++),value:c,to:d,from:b,toString:()=>`${c}`}}z0b(a,b){Ir(this.type,a,b.to,b.value)}get z8(){const a=new Map;this.fK.forEach((b,c)=>b&&a.set(b.value,c));return a}get tp(){return this.fK.filter(__c.bb)}get(a){return(a=this.fK[a])&&a.value}XK(a){return m(this.z8.get(a),"ref not found")}kX(a){const b=
this.fK,c=new Map,d=new Map;var e=0;b.length<a.pre&&(b.length=a.pre);for(var f of a.ops)switch(f.type){case 0:case 2:e+=f.length;break;case 1:b.spliceWithArray(e,0,Array(f.length));e+=f.length;break;case 3:var g=f.state,h=f.shift;b.splice(e,0,null!=g?this.SGa(g):void 0);h&&(d.set(h.Fh,b[e]),c.set(h.jl,e));e++;break;case 4:var k=f.delta;g=f.shift;if(k)switch(k.type){case 0:h=k.delta;null!=h&&m(b[e]).to.next(h);break;case 1:h=k.oldState;k=k.newState;null==h?pa(null==b[e]):this.z0b(h,m(b[e]));b[e]=null!=
k?this.SGa(k):void 0;break;default:throw new r(k);}g&&(d.set(g.Fh,b[e]),c.set(g.jl,e));e++;break;default:throw new r(f);}pa(d.size===a.LIa);pa(c.size===a.LIa);for(e=0;e<a.LIa;e++)pa(d.has(e)),f=m(c.get(e)),b[f]=d.get(e);for(;b.length&&null==b[b.length-1];)b.length--}Vb(){const a=[];this.fK.forEach((b,c)=>{null!=b&&(a[c]=this.type.Vb(b.value))});return a}destroy(a){let b=0;this.fK.forEach((d,e)=>{null!=d&&(ma(e in a),this.type.destroy(d.value,a[e]),b++)});const c=a.reduce(d=>d+1,0);ma(b===c)}di(a){const b=
this.fK,c=bs(this);for(let e=0;e<b.length;e++){const f=b[e];null!=f&&null!=a[e]&&this.type.di(f.value,a[e])||null==f&&null==a[e]?c.retain():c.change(f&&this.type.Vb(f.value),a[e])}let d=b.length;a.forEach((e,f)=>{f>=b.length&&(c.retain(f-d),c.insert(e),d=f+1)});a=c.build();this.domain.isIdentity(a)||this.Xp(c.build());return!0}get empty(){return!this.tp.length}count(){return this.tp.length}toArray(){return this.tp.map(a=>a.value)}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}get jwb(){const a=
this.tp[0];return a&&a.value}get fBb(){const a=this.tp[this.tp.length-1];return a&&a.value}first(a){if(!a)return this.jwb;const b=this.tp.find(c=>a(c.value));return b&&b.value}last(a){if(!a)return this.fBb;const b=this.tp;for(let c=b.length-1;0<=c;c--){const d=b[c];if(a(d.value))return d.value}}next(a,b){const c=this.fK;for(a=this.XK(a)+1;a<c.length;a++){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}un(a,b){const c=this.fK;for(a=this.XK(a)-1;0<=a;a--){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}has(a){return this.z8.has(a)}insertAt(a,
b){this.Xp(bs(this).retain(a).insert(b).build());return this.fK[a].value}set(a,b){var c;ma(0<=a);a>=this.fK.length&&(this.fK.length=a+1);const d=null===(c=this.fK[a])||void 0===c?void 0:c.value;c=null!=d?this.type.Vb(d):void 0;this.Xp(bs(this).retain(a).change(c,b).build());return this.fK[a].value}replace(a,b){a=this.XK(a);return this.set(a,b)}append(a){return this.insertBefore(void 0,a)}prepend(a){return this.mFa(void 0,a)}mFa(a,b){return this.insertAt(a?this.XK(a)+1:0,b)}insertBefore(a,b){return this.insertAt(a?
this.XK(a):this.fK.length,b)}delete(a){a=bs(this).retain(this.XK(a)).bV(this.type.Vb(a)).build();this.Xp(a)}moveTo(a,b){const c=this.XK(b);if(c===a)return b;this.Xp(c<a?bs(this).retain(c).retain({Fh:0,jl:1}).retain(a-c-1).expand({Fh:1,jl:0}).build():bs(this).retain(a).expand({Fh:0,jl:1}).retain(c-a).retain({Fh:1,jl:0}).build());return b}map(a){return this.tp.map(({value:b,id:c})=>a(b,c))}flatMap(a){return this.tp.flatMap(({value:b,id:c})=>a(b,c))}filter(a){return this.tp.filter(b=>a(b.value,b.id)).map(b=>
b.value)}forEach(a){this.tp.forEach(b=>null!=b&&a(b.value,b.id))}reduce(a,b){return this.tp.reduce((c,d)=>a(c,d.value,d.id),b)}some(a){return this.tp.some(b=>a(b.value,b.id))}every(a){return this.tp.every(b=>a(b.value,b.id))}constructor(a,b,c){super();__c.zt.F(this);this.type=a;this.domain=b;this.fDb=0;ma(!c.length||null!=c[c.length-1]);this.fK=bt.array([...c.map(d=>this.SGa(d))],{deep:!1})}};__c.ea=__c.zt.prototype;__c.ea.jxb=fa(121);__c.ea.bJ=fa(119);__c.ea.TU=fa(114);__c.ea.t8=fa(110);
__c.ea.$p=fa(106);__c.ea.dI=fa(100);__c.Fjb=class extends et{dg(){return this.domain.dg()}sm(a){return a}gy(a){return new __c.zt(this.type,this.domain,a)}connect(a,b){return this.sm(a).connect(b)}Vb(a){return this.sm(a).Vb()}destroy(a,b){this.sm(a).destroy(b)}di(a,b){return this.sm(a).di(b)}constructor(a,b){super(dt,b);this.type=a;this.domain=new Ylb(this.type.domain)}};__c.Fjb.prototype.vA=fa(123);__c.At=class{get empty(){return this.list.empty}count(){return this.list.count()}toArray(){return this.list.toArray()}first(a){return this.list.first(a)}last(a){return this.list.last(a)}next(a,b){return this.list.next(a,b)}un(a,b){return this.list.un(a,b)}has(a){return this.list.has(a)}map(a){return this.list.map(a)}flatMap(a){return this.list.flatMap(a)}filter(a){return this.list.filter(a)}forEach(a){this.list.forEach(a)}reduce(a,b){return this.list.reduce(a,b)}some(a){return this.list.some(a)}every(a){return this.list.every(a)}[Symbol.iterator](){return this.list[Symbol.iterator]()}set(){return ds()}replace(){return ds()}mFa(){return ds()}insertBefore(){return ds()}append(){return ds()}prepend(){return ds()}delete(){return ds()}constructor(a){this.list=
a}};__c.ea=__c.At.prototype;__c.ea.bJ=fa(118);__c.ea.TU=fa(113);__c.ea.t8=fa(109);__c.ea.$p=fa(105);__c.ea.dI=fa(99);var Omb;Omb=class extends ct{isIdentity(a){throw new r(a);}compose(a){throw new r(a);}transform(a){throw new r(a);}ik(a){throw new r(a);}xj(a){throw new r(a);}identity(a){throw new r(a);}apply(a){throw new r(a);}Jk(a){throw new r(a);}Oh(a){throw new r(a);}equals(a){return this===a||a instanceof Omb}};__c.Pmb=new Omb;var Qmb,Rmb,Vmb,Wmb,Xmb,Ymb,Et,$mb,anb,Zmb;Qmb=class{};Bt=__c.Bt=class extends Qmb{get length(){return this.state.length}GNb(a){Gjb(this,a);return this.state.charAt(a)}BQ(a){Hjb(this,a);return[new Bt(this.state.substring(0,a)),new Bt(this.state.substring(a))]}vH(){return this}toString(){return this.state}constructor(a){super();this.state=a;this.type=0;ma(!!a)}};
hs=__c.hs=class extends Qmb{get length(){return 1}GNb(a){Gjb(this,a);return this.state}BQ(a){Hjb(this,a);throw Error();}vH(a){return new hs(a(this.state))}toString(){return`[${this.state}]`}constructor(a){super();this.state=a;this.type=1}};
Ct=__c.Ct=class extends Qmb{get length(){return this.state}GNb(a){Gjb(this,a)}BQ(a){Hjb(this,a);return[new Ct(a),new Ct(this.state-a)]}vH(){return this}toString(){return 7>=this.state?"\u00b7".repeat(this.state):`\u00b7\u00b7(${this.state})\u00b7\u00b7`}constructor(a){super();this.state=a;this.type=2;ma(!!a)}};
__c.Dt=class{get length(){return this.Lia+this.zt+this.wuc}Pc(a){return new Rmb(this,a)}cursor(a,b){return new __c.Smb(this,a,b)}vH(a){const b=this.Ly.map(c=>c.vH(a));return new __c.Dt(b,this.Lia,this.zt,this.wuc)}fb(){return this.Ly.map(a=>0===a.type?a.state:"").join("")}forEach(a,b){for(const c of this.Ly)switch(c.type){case 0:b.fb&&b.fb(c.state);break;case 1:b.item(c.state);break;case 2:b.mj&&b.mj(c.state);break;default:throw new r(c);}(a=Math.max(0,a-this.length))&&b.mj&&b.mj(a)}map(a,b){const c=
this.Ly.map(d=>{switch(d.type){case 0:return b.fb(d.state);case 1:return b.item(d.state);case 2:return b.mj(d.state);default:throw new r(d);}});(a=Math.max(0,a-this.length))&&c.push(b.mj(a));return c}reduce(a,b){return this.Ly.reduce((c,d)=>{switch(d.type){case 0:return a.fb(c,d.state);case 1:return a.item(c,d.state);case 2:return a.mj?a.mj(c,d.state):c;default:throw new r(d);}},b)}slice(a,b){ma(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.Tmb;
const d=new __c.Umb;c=this.cursor(b);c.xP(a);c.xP(b-a,{item:e=>d.item(e),fb:e=>d.Ze(e),mj:e=>d.o5(e)});return d.build()}toString(){return this.Ly.join("")}constructor(a,b,c,d){this.Ly=a;this.Lia=b;this.zt=c;this.wuc=d;a=a.length?a[a.length-1]:void 0;ma(!a||2!==a.type)}};__c.Dt.prototype.RAb=fa(124);__c.Tmb=new __c.Dt([],0,0,0);
__c.Umb=class{zga(a){this.mode!==a&&(this.flush(),this.mode=a)}flush(){if(null!=this.mode){switch(this.mode){case 0:this.Ly.push(new Bt(this.kgb));this.Vqb+=this.kgb.length;this.kgb="";break;case 2:this.Ly.push(new Ct(this.lgb));this.gMb+=this.lgb;this.lgb=0;break;default:throw new r(this.mode);}this.mode=void 0}}region(a){switch(a.type){case 0:return this.Ze(a.state);case 1:return this.item(a.state);case 2:return this.o5(a.state);default:throw new r(a);}}Ze(a){a&&(this.zga(0),this.kgb+=a);return this}item(a){this.flush();
this.Ly.push(new hs(a));this.Tbc++;return this}o5(a){0<a&&(this.zga(2),this.lgb+=a);return this}append(a,b=0){a.forEach(b,{fb:c=>this.Ze(c),item:c=>this.item(c),mj:c=>this.o5(c)});return this}get length(){return this.Vqb+this.Tbc+this.gMb}build(){2!==this.mode&&this.flush();return this.length?new __c.Dt(this.Ly,this.Vqb,this.Tbc,this.gMb):__c.Tmb}constructor(){this.Ly=[];this.mode=void 0;this.kgb="";this.gMb=this.Tbc=this.Vqb=this.lgb=0}};
Rmb=class{get head(){return this.ql}get prevValue(){return this.qfb&&this.qfb.GNb(this.qfb.length-1)}Bm(a){const b=m(this.ql),c=b.length;ma(0<a&&a<=c,"{} \u2209 (0, {}]",a,c);if(a<c)return a=b.BQ(a),this.ql=a[1],this.qfb=a[0];this.ql=this.Ly[this.i++];return this.qfb=b}finish(){pa(null==this.ql,"unconsumed reader head: {}",this.ql)}constructor(a,b=0){this.i=0;this.qfb=void 0;this.Ly=(b=Math.max(0,b-a.length))?[...a.Ly,new Ct(b)]:a.Ly;this.ql=this.Ly.length?this.Ly[this.i++]:void 0}};
__c.Smb=class{get prevValue(){return this.Pc.prevValue}move(a,b,c){for(c=__c.Ijb(this.Jbb,c);a;){var d=this.Pc.head;if(d)switch(d=this.Pc.Bm(b||2!==d.type?Math.min(d.length,a):d.length),d.type){case 0:c&&c.fb&&c.fb(d.state);a-=d.length;break;case 1:c&&c.item&&c.item(d.state);a-=d.length;break;case 2:c&&c.mj&&c.mj(d.state);b&&(a-=d.length);break;default:throw new r(d);}else ma(b,"not enough characters or items: {}",a),c&&c.mj&&c.mj(a),a-=a}}xP(a,b){this.move(a,!0,b)}Jm(a,b){this.move(a,!1,b)}finish(){this.Pc.finish()}constructor(a,
b,c){this.Jbb=c;this.Pc=a.Pc(b)}};__c.Smb.prototype.IGa=fa(125);__c.Smb.prototype.bJ=fa(117);Vmb=class{};Wmb=class extends Vmb{get E9(){return this.length}get GZ(){return this.length}uKb(a){Jjb(this,a);return this.BQ(a)}tKb(a){Kjb(this,a);return this.BQ(a)}BQ(a){return[new Wmb(a),new Wmb(this.length-a)]}map(){return this}toString(){return`R${this.length}`}constructor(a){super();this.length=a;this.type=0}};
Xmb=class extends Vmb{get E9(){return 1}get GZ(){return 1}uKb(a){Jjb(this,a);throw Error();}tKb(a){Kjb(this,a);throw Error();}map(a){return new Xmb(a(this.delta))}toString(){return`U[${this.delta}]`}constructor(a){super();this.delta=a;this.type=1}};
Ymb=class extends Vmb{get E9(){return 0}get GZ(){return this.state.length}uKb(a){Jjb(this,a);throw Error();}tKb(a){Kjb(this,a);const [b,c]=this.state.BQ(a);return[new Ymb(b),new Ymb(c)]}map(a,b){return new Ymb(this.state.vH(b))}toString(){switch(this.state.type){case 0:case 1:return`I${this.state}`;case 2:return`X${this.state.length}`;default:throw new r(this.state);}}constructor(a){super();this.state=a;this.type=2}};
Et=class extends Vmb{get E9(){return this.oldState.length}get GZ(){return this.newState.length}uKb(a){Jjb(this,a);return this.BQ(a)}tKb(a){Kjb(this,a);return this.BQ(a)}BQ(a){const [b,c]=this.oldState.BQ(a),[d,e]=this.newState.BQ(a);return[new Et(b,d),new Et(c,e)]}map(a,b){return new Et(this.oldState.vH(b),this.newState.vH(b))}toString(){return 2===this.oldState.type?2===this.newState.type?`\u25e0${this.oldState.state}`:`\u2191${this.newState}`:2===this.newState.type?`\u2193${this.oldState}`:`\u25e1[${this.oldState}|${this.newState}]`}constructor(a,
b){super();this.oldState=a;this.newState=b;this.type=3;ra(a.length,b.length)}};
$mb=class{Pc(a,b){return new Zmb(this,a,b)}forEach(a,b=this.pre,c=this.post){for(const d of this.ops)switch(d.type){case 0:a.retain&&a.retain(d.length);break;case 1:a.update&&a.update(d.delta);break;case 2:a.insert&&a.insert(d.state);break;case 3:a.change&&a.change(d.oldState,d.newState);break;default:throw new r(d);}(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length);case 1:return a.update(b.delta);case 2:return a.insert(b.state);
case 3:return a.change(b.oldState,b.newState);default:throw new r(b);}})}vH(a,b){const c=this.ops.map(d=>d.map(a,b));return new $mb(c,this.pre,this.post)}toString(){return`[${this.ops.toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};anb=new $mb([],0,0);
__c.bnb=class{zga(a,b,c){if(this.SZ!==a||this.jgc!==b||this.Gfc!==c)switch(this.flush(),this.SZ=a,this.jgc=b,this.Gfc=c,a){case 0:break;case 2:0===c&&(this.VV="");break;case 3:0===b&&(this.pva="");0===c&&(this.VV="");break;default:throw new r(a);}}flush(){if(null!=this.SZ){switch(this.SZ){case 0:this.push(new Wmb(this.acc));this.acc=0;break;case 2:var a=null!=this.VV?new Bt(this.VV):new Ct(this.acc);this.push(new Ymb(a));this.VV=void 0;this.acc=0;break;case 3:a=null!=this.pva?new Bt(this.pva):new Ct(this.acc);
const b=null!=this.VV?new Bt(this.VV):new Ct(this.acc);this.push(new Et(a,b));this.VV=this.pva=void 0;this.acc=0;break;default:throw new r(this.SZ);}this.Gfc=this.jgc=this.SZ=void 0}}push(a){this.ops.push(a);this.pre+=a.E9;this.post+=a.GZ}op(a){switch(a.type){case 0:return this.retain(a.length);case 1:return this.update(a.delta);case 2:return this.Yta(a.state);case 3:return fs(this,a.oldState,a.newState);default:throw new r(a);}}Yta(a){switch(a.type){case 0:return this.insert(a.state);case 1:return this.insert(a.state);
case 2:return this.expand(a.state);default:throw new r(a);}}retain(a){ma(0<=a);a&&(this.zga(0),this.acc+=a);return this}update(a){if(this.isIdentity(a))return this.retain(1);this.flush();this.ops.push(new Xmb(a));this.pre++;this.post++;return this}expand(a){ma(0<=a);a&&(this.zga(2,void 0,2),this.acc+=a);return this}insert(a){"string"===typeof a?a&&(this.zga(2,void 0,0),this.VV+=a):(this.flush(),this.push(new Ymb(new hs(a))));return this}foa(a){ma(0<=a);a&&(this.zga(3,2,2),this.acc+=a);return this}b_a(a){"string"===
typeof a?a&&(this.zga(3,2,0),this.acc+=a.length,this.VV+=a):(this.flush(),this.push(new Et(new Ct(1),new hs(a))));return this}bV(a){"string"===typeof a?a&&(this.zga(3,0,2),this.acc+=a.length,this.pva+=a):(this.flush(),this.push(new Et(new hs(a),new Ct(1))));return this}change(a,b){"string"===typeof a?"string"===typeof b?(ra(a.length,b.length),a&&(this.zga(3,0,0),this.pva+=a,this.VV+=b)):(ra(a.length,1),this.flush(),this.push(new Et(new Bt(a),new hs(b)))):"string"===typeof b?(ra(1,b.length),this.flush(),
this.push(new Et(new hs(a),new Bt(b)))):(this.flush(),this.push(new Et(new hs(a),new hs(b))));return this}build(){0!==this.SZ&&this.flush();return new $mb(this.ops,this.pre,this.post)}constructor(a){this.isIdentity=a;this.ops=[];this.post=this.pre=0;this.Gfc=this.jgc=this.SZ=void 0;this.acc=0;this.VV=this.pva=void 0}};__c.bnb.prototype.Zta=fa(128);
Zmb=class{get head(){return this.ql}finish(){pa(null==this.ql)}constructor(a,b=0,c=0){this.ops=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,new Wmb(b)]:a.ops;this.i=0;this.ql=this.ops[this.i++]}};
__c.cnb=class extends ct{dg(){return new __c.bnb(a=>this.component.isIdentity(a))}Og(){return new __c.Umb}id(){return anb}zM(){return __c.Tmb}isIdentity(a){return!a.ops.length||a.ops.every(b=>0===b.type)}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=a.Pc(0,b.pre),d=b.Pc(a.post,0),e=this.dg();for(;;){let g=c.head;var f=d.head;if(!f)break;2===f.type?(g=void 0,f=gs(d)):g&&(f=Math.min(g.GZ,f.E9),g=Mjb(c,f),f=__c.Ljb(d,f));if(2===f.type)e.Yta(f.state);else if(g)2===g.type?e.Yta(Ojb(this,
g.state,f)):0===f.type?e.op(g):0===g.type?e.op(f):1===g.type?1===f.type?e.update(this.component.compose(g.delta,f.delta)):fs(e,Pjb(this,f.oldState,g),f.newState):fs(e,g.oldState,Ojb(this,g.newState,f));else throw Error(`length mismatch: ${a} ; ${b}`);}c.finish();d.finish();return e.build()}transform(a,b){if(!a.ops.length||!b.ops.length)return[b,a];const c=this.dg(),d=this.dg(),e=a.Pc(b.pre,0),f=b.Pc(a.pre,0);for(;;){let h=e.head;var g=f.head;if(!h&&!g)break;h&&2===h.type?(h=gs(e),g=void 0):g&&2===
g.type?(h=void 0,g=gs(f)):h&&g&&(g=Math.min(h.E9,g.E9),h=__c.Ljb(e,g),g=__c.Ljb(f,g));if(h&&2===h.type)d.retain(h.GZ),c.op(h);else if(g&&2===g.type)d.op(g),c.retain(g.GZ);else if(h&&g)if(0===h.type||0===g.type)d.op(g),c.op(h);else if(3===h.type)d.retain(h.GZ),fs(c,Ojb(this,h.oldState,g),h.newState);else if(3===g.type)fs(d,Ojb(this,g.oldState,h),g.newState),c.retain(g.GZ);else{const [k,l]=this.component.transform(h.delta,g.delta);d.update(k);c.update(l)}else throw Error(`length mismatch (${a} x ${b})`);
}e.finish();f.finish();return[d.build(),c.build()]}ik(a){if(!a.ops.length)return a;const b=this.dg();for(const c of a.ops)switch(c.type){case 0:b.retain(c.length);break;case 1:b.update(this.component.ik(c.delta));break;case 2:a=c.state;2===a.type?b.retain(a.length):b.bV(a.state);break;case 3:a=c.oldState;const d=c.newState;2===a.type&&2===d.type?b.retain(a.length):fs(b,d,a);break;default:throw new r(c);}return b.build()}xj(a,b){if(a===b)return!0;if(a.ops.length!==b.ops.length)return!1;for(let c=0;c<
a.ops.length;c++)if(!this.cjc(a.ops[c],b.ops[c]))return!1;return!0}cjc(a,b){switch(a.type){case 0:return 0===b.type&&a.length===b.length;case 1:return 1===b.type&&this.component.xj(a.delta,b.delta);case 2:return 2===b.type&&Qjb(this,a.state,b.state);case 3:return 3===b.type&&Qjb(this,a.oldState,b.oldState)&&Qjb(this,a.newState,b.newState);default:throw new r(a);}}identity(){return anb}apply(a,b){const c=this.Og(),d=a.Pc(b.pre);for(a=b.Pc(a.length,0);;){b=d.head;var e=a.head;if(!e)break;2===e.type?
(b=void 0,e=gs(a)):b&&(e=Math.min(b.length,e.E9),b=d.Bm(e),e=__c.Ljb(a,e));if(2===e.type)c.region(e.state);else if(b)c.region(Ojb(this,b,e));else break}d.finish();a.finish();return c.build()}Jk(a,b){const c=this.Og(),d=a.Pc(b.post);for(a=b.Pc(0,a.length);;){b=d.head;var e=a.head;if(!b||!e)break;2===e.type?(b=d.Bm(e.GZ),e=gs(a)):(e=Math.min(b.length,e.GZ),b=d.Bm(e),e=Mjb(a,e));if(2===e.type)__c.Njb(this,b,e.state);else if(b)c.region(Pjb(this,b,e));else break}d.finish();a.finish();return c.build()}Oh(a,
b){if(a===b)return!0;if(a.length!==b.length)return!1;a=a.Pc();b=b.Pc();let c=a.head,d=b.head;for(;c||d;){if(!c||!d||!Qjb(this,c,d))return!1;a.Bm(c.length);b.Bm(d.length);c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof __c.cnb&&this.component.equals(a.component)}constructor(a){super();this.component=a}};__c.cnb.prototype.RC=fa(133);__c.is=new __c.cnb(__c.Pmb);js=__c.js={item:a=>{throw new r(a);}};var dnb;dnb=class{forEach(a,b=this.pre,c=this.post){this.ops.forEach(d=>{switch(d.type){case 0:a.retain&&a.retain(d.fb);break;case 2:a.insert&&a.insert(d.fb);break;case 1:a.delete&&a.delete(d.fb);break;default:throw new r(d);}});(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}static lF(){return new ks}constructor(a,b,c){this.pre=a;this.post=b;this.ops=c}};
ks=__c.ks=class{static insert(a,b){return(new ks).retain(a).insert(b).build()}static delete(a,b){return(new ks).retain(a).delete(b).build()}retain(a){ma(0<=a);0<a&&(this.e5(0),this.uXa+=a);return this}insert(a){0<a.length&&(this.e5(2),this.P$a+=a);return this}delete(a){0<a&&(this.e5(1),this.mPa+=a);return this}e5(a){if(this.mode!==a){switch(this.mode){case 0:var b=this.ops,c=b.push,d=this.uXa;ma(0<d);c.call(b,{type:0,fb:d});this.pre+=this.uXa;this.post+=this.uXa;this.uXa=0;break;case 2:b=this.ops;
c=b.push;d=this.P$a;ma(0<d.length);c.call(b,{type:2,fb:d});this.post+=this.P$a.length;this.P$a="";break;case 1:b=this.ops;c=b.push;d=this.mPa;ma(0<d);c.call(b,{type:1,fb:d});this.pre+=this.mPa;this.post+=this.mPa;this.mPa=0;break;case void 0:break;default:throw new r(this.mode);}this.mode=a}}build(){0!==this.mode&&this.e5();return new dnb(this.pre,this.post,this.ops)}constructor(){this.ops=[];this.post=this.pre=0;this.mode=void 0;this.uXa=0;this.P$a="";this.mPa=0}};__c.enb=class extends ft{static F(a){N(a,{fb:at})}get fb(){return this.state.get().fb()}insert(a,b){this.Xp(__c.Rjb(this.state.get(),ks.insert(a,b)))}delete(a,b){this.Xp(__c.Rjb(this.state.get(),ks.delete(a,b)))}kX(a){const b=Sjb(this.state.get(),a);this.state.set(__c.is.apply(this.state.get(),a));this.subject.next(b)}Vb(){return this.state.get()}destroy(a){ma(__c.is.Oh(this.state.get(),a))}di(a){return __c.is.Oh(this.state.get(),a)}constructor(a,b){super();__c.enb.F(this);this.domain=a;this.subject=
new __c.Ilb;this.state=new gt(b)}};__c.enb.prototype.oM=fa(138);var fnb=class extends amb{sm(a){return a}gy(a){return new __c.enb(this.domain,a)}connect(a,b){return this.sm(a).connect(b)}Vb(a){return this.sm(a).Vb()}destroy(a,b){this.sm(a).destroy(b)}di(a,b){return this.sm(a).di(b)}constructor(){super();this.domain=__c.is}};new fnb;__c.gnb=class extends ct{get target(){return m(this.bTb)}isIdentity(a){return this.target.isIdentity(a)}compose(a,b){return this.target.compose(a,b)}transform(a,b){return this.target.transform(a,b)}ik(a){return this.target.ik(a)}xj(a,b){return this.target.xj(a,b)}identity(a){return this.target.identity(a)}apply(a,b){return this.target.apply(a,b)}Jk(a,b){return this.target.Jk(a,b)}Oh(a,b){return this.target.Oh(a,b)}equals(a){return this===a||a instanceof __c.gnb&&this.target.equals(a.target)}constructor(){super();
this.bTb=void 0}};__c.gnb.prototype.pga=fa(140);__c.Ft=class extends et{get type(){return m(this.dTb)}gy(a){return this.type.gy(a)}connect(a,b){return this.type.connect(a,b)}Vb(a){return this.type.Vb(a)}destroy(a,b){this.type.destroy(a,b)}di(a,b){return this.type.di(a,b)}constructor(){super(new Zlb(()=>this.type.p0b),new Zlb(()=>this.type.$oa));this.dTb=void 0;this.domain=new __c.gnb}};__c.Ft.prototype.pga=fa(139);var hnb,nnb,inb,jnb;hnb=Ujb({},{});
__c.mnb=class{Pc(a){return new inb(this,a)}cursor(a,b){return new jnb(this,a,b)}forEach(a,{grad:b,jc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.cE,d.tF);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}map(a,{grad:b,jc:c}){const d=this.items.map(e=>{switch(e.type){case 0:return b(e.cE,e.tF);case 1:return c(e.length);default:throw new r(e);}});(a=Math.max(0,a-this.length))&&d.push(c(a));return d}reduce({grad:a,jc:b},c){return this.items.reduce((d,
e)=>{switch(e.type){case 0:return a?a(d,e.cE,e.tF):d;case 1:return b?b(d,e.length):d;default:throw new r(e);}},c)}slice(a,b){ma(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.knb;const d=new __c.lnb;c=this.cursor(b);c.move(a);d.attrs(c.sN,c.Afa);c.move(b-a,{cells:(e,f,g,h)=>d.attrs(f,h).jc(e)});return d.build()}toString(){return`${this.items.map(a=>{switch(a.type){case 0:const b=[];for(const [c,d]of Object.entries(a.tF))b.push(`${c}:${null!=
d?`<${d}|`:""}`);return`G{${b.join(",")}}`;case 1:return`R${a.length}`;default:throw new r(a);}}).join("")}`}constructor(a,b,c={}){this.items=a;this.length=b;this.attributes=c;a=a.length?a[a.length-1]:void 0;ma(!a||1!==a.type)}};__c.mnb.prototype.QBb=fa(141);__c.knb=new __c.mnb([],0);
__c.onb=class{Pc(a,b){return new nnb(this,a,b)}forEach(a){for(const b of this.ops)switch(b.type){case 0:a.retain(b.length,b.changes);break;case 1:a.insert(b.length,b.changes);break;default:throw new r(b);}}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length,b.changes);case 1:return a.insert(b.length,b.changes);default:throw new r(b);}})}equals(a){if(this===a)return!0;if(this.pre!==a.pre||this.post!==a.post||this.ops.length!==a.ops.length)return!1;for(let b=0;b<this.ops.length;b++){const c=
this.ops[b],d=a.ops[b];if(c!==d)switch(c.type){case 0:case 1:if(c.type!==d.type||c.length!==d.length||!Yjb(c.changes,d.changes))return!1;break;default:throw new r(c);}}return!0}toString(){return`[${this.ops.map(a=>{let b;switch(a.type){case 0:b="R";break;case 1:b="I";break;default:throw new r(a);}const c=[];__c.Xjb(a.changes,({r:e},f)=>{e?c.push(`+"${f.toString()}":${null!=e.so?`"${e.so}"`:"null"}=>${null!=e.sn?`"${e.sn}"`:"null"}`):c.push(`-"${f.toString()}"`)});const d=c.length?`{${c.join(",")}}`:
"";return`${b}${a.length}${d}`}).toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};__c.pnb=new __c.onb([],0,0);
nnb=class{get qL(){return this.dob}get next(){return this._next}hz(a,b){const c=m(this._next);pa(c.type===a,"{} != {}",c.type,a);ma(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);for(const [d,e]of Object.entries(c.changes)){const f=e&&e.r;f?this.dob[d]=f:delete this.dob[d]}b<c.length?this._next={type:a,length:c.length-b,changes:{}}:(this._next=this.i<this.input.length?this.input[this.i++]:void 0,!this._next&&this.aZa&&(this._next=Zjb(this.aZa,ur(this.dob,()=>({r:void 0}))),this.aZa=0));return c.changes}Yx(a){return this.hz(0,
a)}eca(a){return this.hz(1,a)}finish(){pa(!this._next)}constructor(a,b=0,c=0){this.i=0;this.dob={};this.input=a.ops;this._next=this.i<this.input.length?this.input[this.i++]:void 0;this.aZa=Math.max(0,b-a.pre,c-a.post);!this._next&&this.aZa&&(this._next=Zjb(this.aZa),this.aZa=0)}};
inb=class{get head(){return this.ql}get sN(){return this.FG}get Afa(){return this.aTb}Bm(a){var b=this.ql;if(!b||1!==b.type)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.ql=a<b?Vjb(b-a):this.input[this.i++];return a}apply(a){__c.ms(a.cE,a.tF,(b,c,d)=>{null!=c&&null!=d?(this.FG[b]=c,this.aTb[b]=d):(delete this.FG[b],delete this.aTb[b])})}bt(){const a=this.ql;if(!a||1===a.type)return hnb;this.ql=this.input[this.i++];this.apply(a);return a}finish(){pa(!this.ql)}constructor(a,
b=0){this.i=0;this.FG={};this.aTb={};b=Math.max(0,b-a.length);this.length=a.length+b;this.input=b?[...a.items,Vjb(b)]:a.items;this.ql=this.input.length?this.input[this.i++]:void 0}};
jnb=class{get Rz(){return this.Pc.length-this.rba}get sN(){return this.Pc.sN}get Afa(){return this.Pc.Afa}move(a,b){var c=this.Jbb;b=c?b?{cells:__c.es(c.cells,b.cells)}:c:b;ma(0<=a,"{} < 0",a);a=this.rba+a;for(ma(a<=this.Pc.length,"{} > {}",a,this.Pc.length);this.rba<a;){c=this.Pc.bt();const d=this.Pc.Bm(a-this.rba);this.rba+=d;b&&b.cells&&b.cells(d,c.cE,this.sN,c.tF,this.Afa)}}finish(){this.Pc.bt();this.Pc.finish()}constructor(a,b,c){this.Jbb=c;this.rba=0;this.Pc=new inb(a,b)}};
__c.lnb=class{rl(a,b,c){this.ss[a]!==c?(this.cE[a]=b,this.tF[a]=c):(delete this.cE[a],delete this.tF[a]);return this}attrs(a,b){__c.ms(a,b,(c,d,e)=>this.rl(c,d,e));return this}jc(a){0<a&&(Object.keys(this.cE).length&&(this.length&&(this.items.push(Vjb(this.length)),this.length=0),this.items.push(Ujb(this.cE,this.tF)),__c.ms(this.cE,this.tF,(b,c,d)=>{if(null!=c){this.as[b]=c;this.ss[b]=d;var e;(null!==(e=this.attributes[b])&&void 0!==e?e:this.attributes[b]=new Set).add(c)}else delete this.as[b],delete this.ss[b]}),
this.cE={},this.tF={}),this.length+=a,this.e0+=a);return this}append(a,b=0){a.forEach(b,{grad:(c,d)=>this.attrs(c,d),jc:c=>this.jc(c)});return this}build(){for(const a of __c.ls(this.as))this.rl(a);for(const a of __c.ls(this.cE))this.rl(a);Object.keys(this.cE).length?(pa(!!this.length,"attributes still open: {}",this.cE),this.items.push(Vjb(this.length)),this.items.push(Ujb(this.cE,this.tF)),this.length=0,this.cE={},this.tF={}):this.e0-=this.length;return new __c.mnb(this.items,this.e0,this.attributes)}constructor(){this.items=
[];this.attributes={};this.as={};this.ss={};this.length=this.e0=0;this.cE={};this.tF={}}};var os,qnb,rnb,snb,ckb,unb,tnb,wnb,xnb,ynb,vnb;os=class{static from(a){if(a instanceof os)return a;if(Array.isArray(a)){const [b,c]=a;return new os(b,c)}return new os(a.from,a.to)}toString(){return`[${this.from},${this.to}]`}constructor(a,b){this.from=a;this.to=b}};
qnb=class{get isEmpty(){return!this.ze.size}slice(a,b){ma(0<=a&&a<=b,"invalid range: [{}, {})",a,b);const c=new Map;for(const [e,f]of this.ze){var d=b<f.from||f.to<a?void 0:new os(Math.max(f.from,a)-a,Math.min(f.to,b)-a);d&&c.set(e,d)}return new qnb(c)}toString(){return[...this.ze].map(([a,b])=>`"${a}":${b}`).join(",")}constructor(a=new Map){this.ze=a}};rnb=new qnb;
snb=class{range(a,b){b?this.i6.set(a,os.from(b)):this.i6.delete(a);return this}ze(a){a.forEach((b,c)=>this.i6.set(c,os.from(b)));return this}build(){return this.i6.size?new qnb(this.i6):rnb}constructor(){this.i6=new Map}};ckb=class{toString(){return`${this.F9||"_"}->${this.B9||"_"}`}constructor(a,b){this.F9=a;this.B9=b}};unb=class{toString(){return`${tnb[this.type]}${this.length}`}constructor(a,b){this.type=a;this.length=b}};tnb={[0]:"R",[1]:"I"};
wnb=class{Pc(a,b){return new vnb(this,a,b)}toString(){const a=this.Xba.join(""),b=[...this.ze].map(([c,d])=>`"${c}":${d}`).join(",");return`{${a}|${b}}`}constructor(a,b,c,d){this.Xba=a;this.ze=b;this.pre=c;this.post=d}};xnb=new wnb([],new Map,0,0);
ynb=class{append(a,b){ma(0<=b,"{} < 0",b);if(!b)return this;this.SZ===a?this.length+=b:(null!=this.SZ&&this.ops.push(new unb(this.SZ,this.length)),this.SZ=a,this.length=b);switch(a){case 0:this.pre+=b;this.post+=b;break;case 1:this.post+=b;break;default:throw new r(a);}return this}retain(a){return this.append(0,a)}insert(a){return this.append(1,a)}createRange(a,b){return this.hXa(a,void 0,b)}hXa(a,b,c){b=new ckb(b&&os.from(b),c&&os.from(c));this.ze.set(a,b);return this}QIa(a){a.forEach((b,c)=>this.ze.set(c,
b));return this}build(){const a=this.SZ,b=this.length;0===a?(this.pre-=b,this.post-=b):null!=a&&this.ops.push(new unb(a,b));return this.ops.length||this.ze.size?new wnb(this.ops,this.ze,this.pre,this.post):xnb}constructor(){this.ops=[];this.SZ=void 0;this.post=this.pre=this.length=0;this.ze=new Map}};
vnb=class{get next(){return this._next}get Vkc(){return this.cob}get YFb(){return this.qMa}get nFa(){return this.qMa-this.cob}hz(a,b){const c=m(this._next);pa(c.type===a,"{} != {}",c.type,a);ma(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);this._next=b<c.length?new unb(a,c.length-b):this.i<this.input.length?this.input[this.i++]:void 0}Yx(a){this.hz(0,a);this.cob+=a;this.qMa+=a}eca(a){this.hz(1,a);this.qMa+=a}finish(){pa(!this._next)}constructor(a,b=0,c=0){this.qMa=this.cob=this.i=0;this.input=
(b=Math.max(0,b-a.pre,c-a.post))?[...a.Xba,new unb(0,b)]:a.Xba;this._next=this.i<this.input.length?this.input[this.i++]:void 0}};
__c.znb=class extends ct{Og(){return new snb}dg(){return new ynb}isIdentity(a){return!a.Xba.length&&!a.ze.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=new Map,d=new Map,e=new Map;for(var f of dkb(a.ze,b.ze)){var g=a.ze.get(f),h=b.ze.get(f);g&&h?(ma(ns(g.B9,h.F9)),e.set(f,new ckb(g.F9,h.B9))):g?c.set(f,g):h&&d.set(f,h)}f=this.dg();g=a.Pc(0,b.pre);a=b.Pc(a.post,0);b=g.next;for(h=a.next;h;){if(1===h.type)b=h.length,ps(c,void 0,g.YFb+a.nFa,b),a.eca(b),f.insert(b);
else if(b)1===b.type?(b=Math.min(b.length,h.length),ps(d,a.Vkc-g.nFa,void 0,-b),g.eca(b),a.Yx(b),f.insert(b)):(b=Math.min(b.length,h.length),g.Yx(b),a.Yx(b),f.retain(b));else throw Error("length mismatch");b=g.next;h=a.next}g.finish();a.finish();f.QIa(e);f.QIa(c);f.QIa(d);return f.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return[b,a];var c=new Map,d=new Map;const e=new Map;for(var f of dkb(a.ze,b.ze)){var g=a.ze.get(f),h=b.ze.get(f);g&&h?(ma(ns(g.F9,h.F9)),e.set(f,new ckb(h.B9,
g.B9))):g?c.set(f,g):h&&d.set(f,h)}g=a.Pc(b.pre,0);h=b.Pc(a.pre,0);f=this.dg();const k=this.dg();var l=g.next;let n=h.next;for(;l||n;){if(l&&1===l.type)l=l.length,ps(d,h.Vkc+g.nFa,h.YFb+g.nFa,l),g.eca(l),k.retain(l),f.insert(l);else if(n&&1===n.type)l=n.length,ps(c,g.Vkc+h.nFa,g.YFb+h.nFa,l),ps(e,void 0,g.YFb+h.nFa,l),h.eca(l),k.insert(l),f.retain(l);else if(l&&n)l=Math.min(l.length,n.length),g.Yx(l),h.Yx(l),k.retain(l),f.retain(l);else throw Error(`unreachable case: ${l} x ${n}`);l=g.next;n=h.next}g.finish();
h.finish();d=k.QIa(d).build();c=f.QIa(c).QIa(e).build();ra(d.post-d.pre,b.post-b.pre);ra(c.post-c.pre,a.post-a.pre);return[d,c]}ik(a){if(!a.ze.size)return xnb;const b=new Map(a.ze);$jb(a,{insert:(c,d,e)=>ps(b,e,void 0,c)});a=Yh(b,c=>new ckb(c.B9,c.F9));return new wnb([],a,0,0)}xj(a,b){if(a===b)return!0;if(a.Xba.length!==b.Xba.length||a.ze.size!==b.ze.size)return!1;for(let e=0;e<a.Xba.length;e++){var c=a.Xba[e],d=b.Xba[e];if(c.type!==d.type||c.length!==d.length)return!1}for(const e of a.ze.keys())if(c=
a.ze.get(e),d=b.ze.get(e),c?!(d&&ns(c.F9,d.F9)&&ns(c.B9,d.B9)):d)return!1;return!0}id(){return xnb}identity(){return xnb}apply(a,b){if(this.isIdentity(b)||!a.ze.size&&!b.ze.size)return a;const c=this.Og(),d=new Map(a.ze);for(const [e,f]of b.ze)ma(ns(a.ze.get(e),f.F9)),d.delete(e),c.range(e,f.B9);$jb(b,{insert:(e,f,g)=>bkb(d,g,e)});return c.ze(d).build()}Jk(a,b){if(this.isIdentity(b)||!a.ze.size&&!b.ze.size)return a;const c=this.Og(),d=new Map(a.ze);for(const [e,f]of b.ze)ma(ns(a.ze.get(e),f.B9)),
d.delete(e),c.range(e,f.F9);$jb(b,{insert:(e,f)=>bkb(d,f,-e)});return c.ze(d).build()}Oh(a,b){const c=a.ze,d=b.ze;return a===b||c===d?!0:c.size===d.size&&[...c.keys()].every(e=>ns(c.get(e),d.get(e)))}equals(a){return this===a||a instanceof __c.znb}constructor(){super();this.zM=rnb}};__c.znb.prototype.RC=fa(132);__c.Anb=new __c.znb;var Bnb=class extends ct{isIdentity(a){return this.components[a.key].isIdentity(a.value)}compose(a,b){const c=ekb(a.key,b.key);return{key:c,value:this.components[c].compose(a.value,b.value)}}transform(a,b){const c=ekb(a.key,b.key),[d,e]=this.components[c].transform(a.value,b.value);return[{key:c,value:d},{key:c,value:e}]}ik(a){return{key:a.key,value:this.components[a.key].ik(a.value)}}xj(a,b){return a.key===b.key&&this.components[a.key].xj(a.value,b.value)}identity(a){return{key:a.key,value:this.components[a.key].identity(a.value)}}apply(a,
b){const c=ekb(a.key,b.key);return{key:c,value:this.components[c].apply(a.value,b.value)}}Jk(a,b){const c=ekb(a.key,b.key);return{key:c,value:this.components[c].Jk(a.value,b.value)}}Oh(a,b){return a.key===b.key&&this.components[a.key].Oh(a.value,b.value)}equals(a){if(this===a)return!0;const b=this.components,c=a.components;a=Object.keys(b);const d=Object.keys(c);return a.length===d.length&&a.every(e=>e in c&&b[e].equals(c[e]))}constructor(a){super();this.components=a}};var Cnb=class extends ct{isIdentity(a){return this.sum.isIdentity(a)}compose(a,b){return this.sum.compose(a,b)}transform(a,b){return this.sum.transform(a,b)}ik(a){return this.sum.ik(a)}xj(a,b){return this.sum.xj(a,b)}identity(a){return this.sum.identity(fkb(this,a))}apply(a,b){return this.sum.apply(fkb(this,a),b).value}Jk(a,b){return this.sum.Jk(fkb(this,a),b).value}Oh(a,b){return this.sum.Oh(fkb(this,a),fkb(this,b))}equals(a){return this===a||a instanceof Cnb&&this.sum.equals(a.sum)}constructor(a,
b){super();this.components=a;this.DPa=b;this.sum=new Bnb(this.components)}};var gkb=class extends et{create(a,b,c){return super.create(a,b,c)}gy(a){const b=this.DPa(a);return this.aK[b].gy(a)}connect(a,b){const c=this.Atb(a),d=this.aK[c].connect(a,{next:e=>{b.next({key:c,value:e})},error:e=>b.error(e)});return{next:e=>{ma(e.key===c);d.next(e.value)},complete:()=>d.complete()}}Vb(a){const b=this.Atb(a);return this.aK[b].Vb(a)}destroy(a,b){const c=this.Atb(a),d=this.DPa(b);ma(c===d);this.aK[c].destroy(a,b)}di(a,b){const c=this.Atb(a),d=this.DPa(b);return c===d&&this.aK[c].di(a,
b)}constructor(a,b,c){super(dt,dt);this.aK=a;this.DPa=b;this.Atb=c;this.domain=new Cnb(ur(this.aK,d=>d.domain),this.DPa)}};var Dnb=class extends ct{isIdentity(){return!0}compose(){return 1}transform(){return[1,1]}ik(){return 1}xj(){return!0}identity(){return 1}apply(){return 1}Jk(){return 1}Oh(){return!0}equals(a){return this===a||a instanceof Dnb}constructor(){super();this.unit=1}},Enb=new Dnb;var Fnb=class extends et{gy(a){return a}connect(){return{next:()=>{},complete:()=>{}}}Vb(a){return a}destroy(){}di(){return!0}constructor(){super(Er,Er);this.domain=Enb}};new Fnb;var Gnb=new Map,Hnb=class extends ct{isIdentity(a){return!a.size||Array.from(a.values()).every(b=>0===b)}compose(a,b){return ikb(a,b)}transform(a,b){return[b,a]}ik(a){return a.size?Yh(a,b=>-b):a}xj(a,b){return hkb(a,b)}identity(){return Gnb}apply(a,b){return ikb(a,b)}Jk(a,b){return ikb(a,this.ik(b))}Oh(a,b){return hkb(a,b)}equals(a){return this===a||a instanceof Hnb}};var Inb,Jnb;
Inb=class extends ft{static F(a){N(a,{values:at.struct})}kX(a){for(const [b,c]of a)(a=(this.map.get(b)||0)+c)?this.map.set(b,a):this.map.delete(b)}Vb(){return new Map(this.map)}di(a){const b=this.map,c=new Map;for(const [d,e]of b){const f=a.get(d)||0;e!==f&&c.set(d,f-e)}for(const [d,e]of a)!b.has(d)&&e&&c.set(d,e);this.Xp(c);return!0}add(a){const b=this.map.get(a)||0;0<b||this.Xp(new Map([[a,-b+1]]))}delete(a){const b=this.map.get(a)||0;b&&this.Xp(new Map([[a,-b]]))}has(a){return 0<(this.map.get(a)||0)}get values(){return[...jkb(this.map,
a=>0<a).keys()]}[Symbol.iterator](){return this.values[Symbol.iterator]()}constructor(a,b){super();Inb.F(this);this.domain=a;this.map=new Dlb(b)}};Jnb=class extends et{gy(a){return new Inb(this.domain,a)}connect(a,b){return a.connect(b)}Vb(a){return a.Vb()}destroy(a,b){ma(this.domain.Oh(a.Vb(),b))}di(a,b){return a.di(b)}constructor(){super(dt,dt);this.domain=new Hnb}};__c.Knb=new Jnb;var Mnb,Onb,Qnb,Ht;__c.Lnb=/^$|^(https?|ftp|tel|sms|mailto|shortcuts):(\/\/|[^/])[^ ]+(\/|$)|^[^: ]+(\/|$)|^[\w.]+:\d+(\/|$)/;Gt=__c.Gt=/^#[0-9a-f]{6}$/;Mnb=rs(/^transparent$/,Gt);__c.Nnb=/^[0-9]+(\.[0-9]+)?$/;Onb=/^[0-9]+(\.[0-9]+)?px$/;__c.Pnb=/^-?[0-9]+(\.[0-9]+)?%$/;Qnb=/^(([1-9]|10)( ([1-9]|10)){0,9})?$/;Ht=/^inherit$/;var Unb,Vnb,Ynb,It,gob,nob,oob,qob,sob,uob,wob,yob,zob,Aob,Bob,Cob,Dob,Fob,Gob,Iob,Kob,Lob;__c.Rnb=Mr({id:it,version:jt});__c.Snb=as({values:{app:__c.Rnb},attributes:{iia:Wr(__c.gjb(it,it))}});__c.Tnb=Pr(-1,1);Unb=Pr(0,100);Vnb=Pr(-100,100);__c.Wnb=Pr(0,1);__c.Xnb=Pr(-180,180);Ynb=Wr(Unb);It=Wr(Vnb);__c.Znb=Wr(__c.Wnb);__c.$nb=Wr(__c.Xnb);Jt=__c.Jt=Or(Gt);__c.aob=Vr(Jt);__c.bob=Wr(__c.aob);__c.cob=Or(/^100%$/);__c.dob=Or(/^[0-9]+(\.[0-9]+)?%$/);__c.eob=Or(/^[0-9]+(\.[0-9]+)?px/);__c.fob=__c.Zr($r(it));
gob=kjb(0,10);__c.hob=Lr(gob,a=>10>=a.length);__c.iob=Wr(__c.hob);__c.job=Or(kkb("L"));__c.kob=Or(kkb("T"));__c.lob=Wr(Kr(1,2,3));__c.mob=Mr({text:it,fE:ht});nob=Mr({top:lt,left:lt,width:mt,height:mt,rotation:__c.Xnb});oob=Mr({id:it,Gf:lt});__c.pob=as({attributes:{Ana:Yr(oob),brightness:It,contrast:It,saturation:It,$W:It,xZa:Ynb,blur:It,mha:It,xya:It,Sia:Ynb,Rpa:Ynb,highlights:It,M4:It,qX:Ynb,Wsa:Ynb}});qob=Xr(Vr(__c.pob));
__c.rob=as({values:{media:__c.Rnb},Pb:{filter:qob},attributes:{rF:Yr(__c.Rnb),xe:Yr(nob),Ta:__c.Znb,cg:Wr(__c.gjb(Jt,Jt)),altText:Yr(__c.mob)}});sob=Xr(Vr(__c.rob));__c.tob=Kr(1,2);uob=Mr({cd:mt,oy:mt});__c.vob=as({values:{video:it,id:__c.nt},Pb:{filter:qob},attributes:{xe:Wr(nob),Ta:__c.Znb,cg:Wr(__c.gjb(Jt,Jt)),altText:Yr(__c.mob),trim:Yr(uob),zna:Wr(__c.tob),autoplay:qt,playbackRate:Yr(Pr(.25,4)),volume:Wr(Pr(0,4))}});wob=Xr(Vr(__c.vob));__c.xob=Mr({top:lt,left:lt});yob=Mr({width:mt,height:mt});
zob=Mr({color:Jt,Ta:__c.Wnb,position:lt},a=>-1<=a.position&&2>=a.position);Aob=Lr(zob,a=>2<=a.length&&a.every((b,c,d)=>0===c||d[c-1].position<=b.position));Bob=Wr(Aob);Cob=as({values:{type:Kr("linear")},attributes:{ai:Bob,rotation:__c.$nb}});Dob=as({values:{type:Kr("radial")},attributes:{ai:Bob,center:Wr(__c.xob)}});__c.Eob=qs({linear:Cob,radial:Dob},a=>a.type,a=>a.type);Fob=Xr(Vr(__c.Eob));
__c.Kt=as({Pb:{image:sob,video:wob,gradient:Fob},attributes:{dropTarget:__c.xmb,color:__c.bob,Ta:__c.Znb,locked:qt,oD:qt,HR:ut,zo:ut,flipX:qt,flipY:qt}});__c.Lt=as({Pb:{fill:__c.Kt},attributes:{weight:__c.st,color:__c.bob,Bn:__c.iob,Ir:qt}});Gob=Mr({top:lt,left:lt,height:mt,width:mt});__c.Hob=Wr(Gob);Iob=Mr({Nf:Lr(jt)});__c.Job=Wr(Iob);Kob=Mr({text:it,user:it,brand:it});Lob=Mr({text:it,url:it});var Mob,Nob,Oob,Pob,Qob,Rob,Sob;Mob=as({values:{type:Kr("embed")},attributes:{text:pt,url:pt}});Nob=Mr({day:jt,month:jt,year:jt});Oob=as({values:{type:Kr("date")},attributes:{text:pt,language:pt,style:Wr(Kr(1,2,3,4,5)),date:Wr(Nob)}});Pob=as({values:{type:Kr("mention")},attributes:{text:pt,user:pt,brand:pt}});Qob=as({values:{id:it},attributes:{label:pt},Pb:{fill:__c.Kt}});Rob=cs(Qob);
Sob=as({values:{type:Kr("select")},attributes:{Rr:ut},Pb:{options:Rob}}).map(a=>a,a=>a,__c.lkb,__c.mkb,function(a){return Object.create(a,{text:{get(){var b=a.options;const c=a.Rr;b=c&&b.first(({id:e})=>e===c)||b.first();var d;return null!==(d=null===b||void 0===b?void 0:b.label)&&void 0!==d?d:""}}})},a=>a);__c.Tob=qs({embed:Mob,date:Oob,mention:Pob,select:Sob},a=>a.type,a=>a.type);__c.Uob=class{encode(a){return String(a)}decode(a){switch(typeof this.defaultValue){case "string":return a;case "number":return Number(a);case "boolean":return"false"!==a;default:throw Error();}}validate(a){ma(this.isValid(a),"invalid value: {}",a)}normalize(a){this.validate(a);return this.zOc(a)}zOc(a){return a}constructor(a,b,c){this.scope=a;this.defaultValue=b;this.N_c=c}};__c.us=Object.keys({Ht:0})[0];
__c.zkb=class{getScope(a){return this.attributes[a].scope}Lla(a){if("function"===typeof a)return a;switch(a){case "all":return()=>!0;case "block":return this.dfe;case "inline":return this.Lfe;default:throw new r(a);}}copy(a,b,c){__c.vs(this,b,a,(d,e)=>c[e]=d)}z5(a){for(const [b,c]of Object.entries(a))ma(this.fC(b)),null!=c&&this.attributes[b].validate(c)}validate(a,b){a=m(this.attributes[a]);null!=b&&a.validate(b)}normalize(a,b){a=m(this.attributes[a]);return null!=b?a.normalize(b):void 0}encode(a,
b){return __c.ts(this.attributes[a],b)}decode(a,b){return __c.ss(this.attributes[a],b)}constructor(a,b,c,d){this.attributes=a;this.aKa=b;this.OPa=c;this.QKe=d;this.$j=ur(this.attributes,e=>e.defaultValue);this.$sb={as:this.$j,ss:ur(this.$j,(e,f)=>null!=e?this.encode(f,e):void 0)};this.fC=e=>e in this.attributes;this.dfe=e=>"block"===this.getScope(e);this.Lfe=e=>"inline"===this.getScope(e);this.fAb=e=>{e=okb(e);return!(!e||!this.OPa.has(e))};this.ATa=e=>"string"!==typeof e?!1:null!=__c.qkb(this,e);
this.O_c=e=>{const f=this.QKe;return"string"===typeof e&&f.has(e)};this.nya=(e,f,g)=>f===g?!0:null!=f&&null!=g?this.attributes[e].nya(f,g):null==f&&null==g}};__c.zkb.prototype.pZ=fa(142);
var ukb=class extends __c.Uob{bNa(){return new ukb(this.scope,this,!0)}isValid(a){return Number.isInteger(a)&&this.min<=a&&a<=this.max}nya(a,b){return a===b}encode(a){return`${a.toFixed(1)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=-2147483648,max:c=2147483647,defaultValue:d=0,units:e=""}={},f=!1){super(a,d,f);ma(Number.isInteger(b)&&-2147483648<=b);ma(Number.isInteger(c)&&2147483647>=c);ma(Number.isInteger(d));
ma(b<=d&&d<=c);this.min=b;this.max=c;this.units=e;__c.nkb(this)}},wkb=class extends __c.Uob{bNa(){return new wkb(this.scope,this,!0)}isValid(a){return Number.isFinite(a)&&this.min<=a&&a<=this.max}zOc(a){return 0===a?a:Number(a.toPrecision(this.Lid))}nya(a,b){return a===b}encode(a){return`${"fixed"===this.jua&&Number.isInteger(a)?a.toFixed(1):String(a)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=
-Number.MAX_VALUE,max:c=Number.MAX_VALUE,Lid:d=6,jua:e="integer",defaultValue:f=0,units:g=""}={},h=!1){super(a,f,h);ma(Number.isFinite(b)&&b>=-Number.MAX_VALUE);ma(Number.isFinite(c)&&c<=Number.MAX_VALUE);ma(Number.isInteger(d)&&1<=d&&15>=d);this.min=b;this.max=c;this.units=g;this.Lid=d;this.jua=e;__c.nkb(this)}},xkb=class extends __c.Uob{isValid(a){return this.WWa.test(a)}bNa(){return new xkb(this.scope,this.WWa,this.defaultValue,!0)}nya(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.WWa=
b;__c.nkb(this)}},ykb=class extends __c.Uob{isValid(a){return this.Yod.has(a)}bNa(){return new ykb(this.scope,this.Yod,this.defaultValue,!0)}nya(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.Yod=new Set(b);__c.nkb(this)}};var Zob,$ob,apb;__c.Vob="normal thin extralight light medium semibold bold ultrabold heavy".split(" ");__c.Wob=/^Y[A-Za-z0-9_-]{10},\d+$/;__c.Xob=["normal","italic"];__c.Yob=["none","underline"];Zob=["start","center","end","justify"];
Mt=__c.Mt={fontFamily:ys("inline",__c.Wob,"YACgEZ1cb1Q,0"),fontSize:xs("inline",{min:0,defaultValue:16,units:"px"}),fontWeight:zs("inline",__c.Vob),fontStyle:zs("inline",__c.Xob),kV:ys("inline",__c.Nnb,"1"),verticalAlign:ys("inline",__c.Pnb,"0%"),color:ys("inline",Gt,"#000000"),backgroundColor:ys("inline",Mnb,"transparent"),FAa:xs("inline",{min:0,max:.2,units:"em"}),EAa:xs("inline",{min:0,max:.16,units:"em"}),Cn:zs("inline",__c.Yob),Xz:zs("inline",["none","strikethrough"]),link:ys("inline",__c.Lnb,
""),letterSpacing:xs("inline",{min:-.2,max:.8,units:"em"}),lineHeight:xs("block",{min:.5,max:2.5,defaultValue:1.4}),direction:zs("block",["ltr","rtl"]),textAlign:zs("block",Zob),VM:zs("block","none disc circle square decimal lower-alpha lower-roman checked unchecked".split(" ")),rP:__c.vkb({min:0}),marginInlineStart:__c.vkb({min:0,max:200,units:"px"}),textIndent:__c.vkb({min:0,max:32,units:"px"}),c_a:ys("inline",/^$/,""),d_a:ys("inline",/^$/,""),Ikb:ys("inline",/^$/,"")};
$ob={wBa:ys("inline",/^(K[a-zA-Z0-9_-]{10}|)$/,"")};apb={...ur(Mt,a=>a.bNa()),Zz:zs("inline",["add","delete"]).bNa()};__c.Nt=__c.Akb({static:Mt,NPa:$ob,Ht:apb});__c.bpb=`${Object.keys({wBa:0})[0]}/`;__c.cpb=Object.keys({Zz:0})[0];var fpb=class{e5(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(As(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(Bkb(this.acc));this.post+=this.acc;this.acc=0;break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ma(0<=b,"{} < 0",b);b&&(this.e5(a),this.acc+=b);return this}retain(a){return this.accumulate(0,a)}expand(a){return this.accumulate(1,a)}append(a){switch(a.type){case 0:return this.accumulate(0,a.length);
case 1:return this.accumulate(1,a.length);default:throw new r(a);}}build(){0!==this.mode&&this.e5();return this.ops?new dpb(this.ops,this.pre,this.post):epb}constructor(){this.ops=[];this.acc=this.post=this.pre=0;this.mode=void 0}},gpb=class{static create(a,b,c,d=0,e=0){ma(0<=d,"{} < 0",d);ma(0<=e,"{} < 0",e);b=Math.max(0,d-b,e-c);return new gpb(b?[...a,As(b)]:a)}get head(){return this.ql}Yx(a){return this.JB(0,a).length}JB(a,b=1){const c=m(this.ql);if(c.type!==a)throw Error();const d=c.length;ma(0<
b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.ql=As(d-b),As(b);case 1:return this.ql=Bkb(d-b),Bkb(b);default:throw new r(a);}else return this.ql=this.ops[this.i++],c}finish(){pa(null==this.ql)}constructor(a){this.ops=a;this.i=0;this.ql=a[this.i++]}},dpb=class{isEmpty(){return 0===this.pre&&0===this.post&&0===this.ops.length}Pc(a,b){return gpb.create(this.ops,this.pre,this.post,a,b)}toString(){return this.ops.map(a=>{switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;
default:throw new r(a);}}).join("")}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}},epb=new dpb([],0,0),hpb=class extends ct{dg(){return new fpb}isIdentity(a){return a.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.dg(),d=a.Pc(0,b.pre),e=b.Pc(a.post,0);let f=d.head,g=e.head;for(;f||g;){if(g)if(1===g.type)c.append(e.JB(g.type,g.length));else if(f)if(1===f.type){var h=Math.min(f.length,g.length);d.JB(f.type,h);e.JB(g.type,h);c.append(Bkb(h))}else h=
Math.min(f.length,g.length),d.JB(f.type,h),e.JB(g.type,h),c.append(As(h));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);f=d.head;g=e.head}d.finish();e.finish();return c.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return[b,a];const c=a.Pc(b.pre,0),d=b.Pc(a.pre,0),e=this.dg(),f=this.dg();for(var g=c.head,h=d.head;g||h;){if(g&&1===g.type)h=c.JB(g.type,g.length),f.append(As(h.length)),e.append(h);else if(h&&1===h.type){var k=d.JB(h.type,
h.length);f.append(k);e.append(As(h.length))}else if(g&&h)k=Math.min(g.length,h.length),g=c.JB(g.type,k),h=d.JB(h.type,k),f.append(h),e.append(g);else throw Error(`length mismatch (${a} x ${b})`);g=c.head;h=d.head}c.finish();d.finish();return[f.build(),e.build()]}ik(){return epb}xj(a,b){if(a===b)return!0;if(!a||!b||a.pre!==b.pre||a.post!==b.post)return!1;a=a.Pc();b=b.Pc();let c=a.head,d=b.head;for(;c||d;){if(!c||!d)return!1;switch(c.type){case 0:if(0!==d.type||c.length!==d.length)return!1;a.Yx(c.length);
b.Yx(d.length);break;case 1:if(1!==d.type||c.length!==d.length)return!1;Bs(a,c.length);Bs(b,d.length);break;default:throw new r(c);}c=a.head;d=b.head}return!0}identity(){return epb}apply(a){return a}Jk(a){return a}Oh(a,b){return a===b}equals(a){return this===a||a instanceof hpb}},Ckb=new Map,Fs=new hpb;var jpb,lpb,kpb,ipb,npb,Fkb,opb,ppb;
jpb=class extends ct{Og(){return new Fkb(this.oA)}zM(){return ipb}Pd(a={}){return{x:a.x||Fs.dg().build(),y:a.y||Fs.dg().build(),attrs:a.attrs||Ds(this).build()}}isIdentity(a){return Fs.isIdentity(a.x)&&Fs.isIdentity(a.y)&&a.attrs.items.isEmpty()}compose(a,b){const c=Fs.compose(a.x,b.x),d=Fs.compose(a.y,b.y);a=Jkb(this,a.attrs,b.x,b.y);if(b.attrs.items.isEmpty())return this.Pd({x:c,y:d,attrs:a});const e=Ds(this);Hkb(a,b.attrs,e,(f,g,h)=>{g?h?(pa(this.oA(f,g.n,h.o)),f={o:g.o,n:h.n}):f=g:f=h;return f});
return{x:c,y:d,attrs:e.build()}}yDa(a,b,c,d){return Fs.isIdentity(c)&&Fs.isIdentity(d)||b.items.isEmpty()?b:Ikb(a,this.oA,b,c,d)}transform(a,b){const [c,d]=Fs.transform(a.x,b.x),[e,f]=Fs.transform(a.y,b.y);a=Jkb(this,a.attrs,c,e);b=Jkb(this,b.attrs,d,f);if(a.items.isEmpty()||b.items.isEmpty()){var g=this.Pd({x:c,y:e,attrs:b});a=this.Pd({x:d,y:f,attrs:a});return[g,a]}var h=Math.max(a.kp,b.kp),k=Math.max(a.Wy,b.Wy);a=a.Pc(void 0,h,k);h=b.Pc(void 0,h,k);b=Ds(this);k=Ds(this);for(var l=a.head,n=h.head;l||
n;){if(l&&0===l.type||n&&0===n.type){l=a.pv();n=h.pv();const v=b.pv(),w=k.pv();for(var p=l.head,q=n.head;p||q;){if(p&&0===p.type||q&&0===q.type){p=l.bt();q=n.bt();for(g of Gkb(p,q)){p=l.attrs[g];q=n.attrs[g];p&&q?(pa(this.oA(g,p.o,q.o)),p=[void 0,{o:q.n,n:p.n}]):p=[q,p];const [x,z]=p;v.rl(g,z);w.rl(g,x)}}else if(p&&q)p=Math.min(p.length,q.length),l.Bm(p),n.Bm(p),v.FB(p),w.FB(p);else if(p)p=p.length,l.Bm(p),v.FB(p),w.FB(p);else if(q)p=q.length,n.Bm(p),v.FB(p),w.FB(p);else throw Error();p=l.head;q=
n.head}l.finish();n.finish();v.finish();w.finish()}else if(l&&n)l=Math.min(l.length,n.length),Es(a,l),Es(h,l),b.rows(l),k.rows(l);else if(l)l=l.length,Es(a,l),b.rows(l),k.rows(l);else if(n)l=n.length,Es(h,l),b.rows(l),k.rows(l);else throw Error();l=a.head;n=h.head}a.finish();h.finish();g=this.Pd({x:c,y:e,attrs:k.build()});a=this.Pd({x:d,y:f,attrs:b.build()});return[g,a]}ik(a){a=a.attrs.Pc();const b=Ds(this);for(var c=a.head;c;){if(0===c.type){c=a.pv();const e=b.pv();for(var d=c.head;d;){if(0===d.type){d=
c.bt();for(const f of Is(d))d=c.attrs[f],e.rl(f,d&&{o:d.n,n:d.o})}else d=d.length,c.Bm(d),e.FB(d);d=c.head}c.finish();e.finish()}else c=c.length,Es(a,c),b.rows(c);c=a.head}return this.Pd({attrs:b.build()})}xj(a,b){return Fs.xj(a.x,b.x)&&Fs.xj(a.y,b.y)&&a.attrs.equals(b.attrs)}identity(){return{x:Fs.dg().build(),y:Fs.dg().build(),attrs:Ds(this).build()}}apply(a,b){a=this.yDa("apply",a,b.x,b.y);if(b.attrs.items.isEmpty())return a;const c=this.Og();Hkb(a,b.attrs,c,(d,e,f)=>this.DHd(d,e,f));return c.build()}Jk(a,
b){if(b.attrs.items.isEmpty())return this.yDa("unapply",a,b.x,b.y);const c=this.Og();Hkb(a,b.attrs,c,(d,e,f)=>this.hPe(d,e,f));return this.yDa("unapply",c.build(),b.x,b.y)}Oh(a,b){return a.equals(b)}equals(a){return this===a?!0:a instanceof jpb?this.oA===a.oA:!1}constructor(a){super();this.oA=a;this.yld=(b,c,d)=>{if(c===d)return!0;if(c&&d){const e=c.n,f=d.n;return this.oA(b,c.o,d.o)&&this.oA(b,e,f)}return!c&&!d};this.DHd=(b,c,d)=>null!=d?(pa(this.oA(b,c,d.o),"{}: {} != {}",b,c,d.o),d.n):c;this.hPe=
(b,c,d)=>null!=d?(pa(this.oA(b,c,d.n)),d.o):c}};
lpb=class{isEmpty(){return!this.items.length}Pc(a){return new kpb(this.items,this.length,a)}forEach(a,{grad:b,jc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.value);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}equals(a,b){if(this===a)return!0;if(this.length!==a.length)return!1;const c=this.Pc();a=a.Pc();for(var d=c.head,e=a.head;d||e;){if(!d||!e)return!1;switch(d.type){case 0:if(0!==e.type)return!1;d=c.bt();e=a.bt();if(null!=d?null==
e||!b(d,e):null!=e)return!1;break;case 1:if(1!==e.type||d.length!==e.length)return!1;c.Bm(d.length);a.Bm(e.length);break;default:throw new r(d);}d=c.head;e=a.head}return!0}toString(a="C",b="G",c=JSON.stringify){return this.items.map(d=>{switch(d.type){case 1:return`${a}${d.length}`;case 0:return`${b}${c(d.value)}`;default:throw new r(d);}}).join()}constructor(a,b){this.items=a;this.length=b}};__c.mpb=new lpb([],0);
kpb=class{get head(){return this.ql}Bm(a){var b=this.ql;if(!b||1!==b.type)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.ql=a<b?Kkb(b-a):this.input[this.i++];return a}bt(){const a=this.ql;if(a&&1!==a.type)return this.ql=this.input[this.i++],a.value}finish(){pa(null==this.ql,"stream not empty: {}",this.ql)}constructor(a,b,c=0){this.i=0;c=Math.max(0,c-b);this.length=b+c;this.input=c?[...a,Kkb(c)]:a;this.ql=this.input.length?this.input[this.i++]:void 0}};
Gs=__c.Gs=class{grad(a){if(null==a)return this;pa(null==this.tma,"nextGrad already set: {}",this.tma);this.tma=a;return this}jc(a){if(0>=a)return this;null!=this.tma&&(this.rma&&(this.items.push(Kkb(this.rma)),this.rma=0),this.items.push({type:0,value:this.tma}),this.tma=void 0);this.rma+=a;this.e0+=a;return this}build(){null!=this.tma?(pa(0!==this.rma),this.items.push(Kkb(this.rma)),this.items.push({type:0,value:this.tma}),this.rma=0,this.tma=void 0):this.e0-=this.rma;return new lpb(this.items,this.e0)}constructor(){this.items=
[];this.rma=this.e0=0;this.tma=void 0}};
Hs=__c.Hs=class{static of(a,b,c,d){return b.isEmpty()?ipb:new Hs(a,b,c,d)}Pc(a=()=>!0,b=0,c=0){b=Math.max(this.kp,b);c=Math.max(this.Wy,c);const d=this.items.Pc(c);return new npb(this.oA,d,a,b,c)}forEach(a,b,c=0,d=0){a=this.Pc(a,c,d);c=a.head;let e=0;for(;c;)e=0!==c.type&&a.Lne?e+Es(a,c.length):e+a.XYb((f,g)=>b(e,f,g)),c=a.head;a.finish()}serialize(a){const b=a.pv;this.items.forEach(this.items.length,{jc:a.rows,grad:c=>{const {FB:d,grad:e,V7a:f}=b();c.forEach(c.length,{jc:d,grad:e});f()}})}equals(a){return this===
a?!0:a instanceof Hs&&this.Wy===a.Wy&&this.kp===a.kp?this.items.equals(a.items,(b,c)=>b.equals(c,(d,e)=>Pkb(this.oA,d,e))):!1}toString(){return this.items.toString("R","G",a=>a.toString("C","G",Ekb))}constructor(a,b,c,d){this.oA=a;this.items=b;this.kp=c;this.Wy=d}};ipb=new Hs((a,b,c)=>b===c,__c.mpb,0,0);
npb=class{get head(){return this.MPa.head}XYb(a){pa(null==this.bU);const b=this.pv();var c=b.head;let d=0;for(;c;){if(0===c.type)b.bt();else{c=b.Bm(c.length);if(!Js(b.attrs)){const e={...b.attrs};for(let f=0;f<c;f++)a(d+f,e)}d+=c}c=b.head}b.finish();return this.head?Es(this,1):0}get Lne(){pa(null!=this.head);pa(null==this.bU);return 1===this.head.type&&this.Nz.isEmpty()}pv(){pa(null==this.bU);var a=this.MPa.bt();if(a){a=a.Pc(this.kp);for(var b=this.Nz.Pc(this.kp),c=new Gs,d=a.head,e=b.head;d||e;){if(d&&
0===d.type||e&&0===e.type){const g=a.bt(),h=b.bt();b:{d=this.zBa;e=this.Lla;if(!g){d=h;break b}const k={...h};for(f in g){if(e&&!e(f))continue;const l=g[f];ma(Lkb(d,f,null===h||void 0===h?void 0:h[f],l.t));l.b?k[f]=l.b:delete k[f]}d=Js(k)?void 0:k}c.grad(d)}else if(d&&e)d=Math.min(d.length,e.length),a.Bm(d),b.Bm(d),c.jc(d);else throw Error("length mismatch");d=a.head;e=b.head}var f=c.build()}else f=this.Nz;this.bU=f;return new opb(this.zBa,this.Lla,this.bU.Pc(this.kp),this.lic)}finish(){pa(null==
this.bU);this.MPa.finish()}constructor(a,b,c,d,e){this.zBa=a;this.MPa=b;this.Lla=c;this.kp=d;this.Wy=e;this.Nz=__c.mpb;this.bU=void 0;this.lic=()=>{pa(null!=this.bU);this.Nz=this.bU;this.bU=void 0}}};
Fkb=class{pv(){pa(null==this.Njb);return this.Njb=new ppb(this.oA,this.mPd)}rows(a){this.w1b.jc(a);return this}build(){pa(null==this.Njb);pa(this.Nz.isEmpty(),"prevDxs not empty: {}",this.Nz);const a=this.w1b.build();return Hs.of(this.oA,a,this.kp,a.length)}constructor(a){this.oA=a;this.w1b=new Gs;this.kp=0;this.Nz=__c.mpb;this.Njb=void 0;this.mPd=b=>{pa(null!=this.Njb);this.kp=Math.max(this.kp,b.length);var c=this.Nz.Pc(this.kp);const d=b.Pc(this.kp),e=new Gs;for(var f=c.head,g=d.head;f||g;){if(f&&
0===f.type||g&&0===g.type)f=c.bt(),g=d.bt(),f=__c.Okb(this.oA,f,g),e.grad(f);else if(f&&g)f=Math.min(f.length,g.length),c.Bm(f),d.Bm(f),e.jc(f);else throw Error("length mismatch");f=c.head;g=d.head}c=e.build();c.isEmpty()||this.w1b.grad(c);this.Nz=b;this.Njb=void 0}}};
opb=class{get attrs(){return this.FG}get head(){return this.Ztb.head}Bm(a){return this.Ztb.Bm(a)}bt(){const a=this.Ztb.bt();this.gia(a);return a}finish(){this.Ztb.finish();this.Lm()}gia(a){if(a)for(const b in a){if(!this.Lla(b))continue;const c=__c.Mkb(this.zBa,b,this.FG[b],a[b]);null==c?delete this.FG[b]:this.FG[b]=c}}constructor(a,b,c,d){this.zBa=a;this.Lla=b;this.Ztb=c;this.Lm=d;this.FG={}}};
ppb=class{rl(a,b){var c=this.FG[a];(b=(0,this.zBa)(a,c,b)?void 0:{Tb:c,r:b})?(this.GH||(this.GH={}),this.GH[a]=b):this.GH&&(delete this.GH[a],Js(this.GH)&&(this.GH=void 0));return this}attrs(a){for(const b of Is(a))this.rl(b,a[b]);return this}FB(a){if(0>=a)return this;this.gia();this.xsa.jc(a);return this}gia(){if(this.GH){var a=this.GH;this.GH=void 0;for(const b in a){const c=__c.Mkb(this.zBa,b,this.FG[b],a[b]);null==c?delete this.FG[b]:this.FG[b]=c}this.xsa.grad(a)}}finish(){this.gia();pa(Js(this.FG));
const a=this.xsa.build();this.Lm(a)}constructor(a,b){this.zBa=a;this.Lm=b;this.FG={};this.GH=void 0;this.xsa=new Gs}};var qpb=class extends ft{get kp(){return this.grid.kp}get Wy(){return this.grid.Wy}set(a,b,c){const {jJe:d,XIe:e,ivb:f=d,o2d:g=e}=b,h=__c.ws(this.Jh,__c.rkb(this.Jh,a,c)),k=__c.tkb(this.Jh,h,(n,p)=>__c.skb(this.Jh,h,p));b=ur(k,()=>{});c=Ds(this.domain);c.rows(d);for(var l=d;l<=f;l++){const n=c.pv();n.FB(e);for(let p=e;p<=g;p++){const q=this.grid.get(l,p),v={};__c.vs(this.Jh,k,a,(w,x)=>{v[x]={o:q&&q[x],n:k[x]}});n.attrs(v);n.FB(1)}n.attrs(b);n.finish();c.rows(1)}a=c.pv();a.FB(e);for(l=e;l<=g;l++)a.attrs(b),
a.FB(1);a.attrs(b);a.finish();a=this.domain.Pd({attrs:c.build()});this.Xp(a)}write(a,b,c){null==c||0===Object.keys(c).length?this.grid.delete(a,b):this.grid.set(a,b,c)}get(a,b,c){b=this.grid.get(b,c);if(null!=b&&(a=__c.rkb(this.Jh,a,b),0!==Object.keys(a).length))return a}Vb(){const a=this.domain.Og();for(let b=0;b<=this.Wy;b++){const c=a.pv();let d={};for(let e=0;e<=this.kp;e++){const f=this.grid.get(b,e);for(const g of Skb(d,f))c.rl(g,f&&f[g]);d=f;c.FB(1)}c.finish();a.rows(1)}return a.build()}destroy(a){const b=
this.Vb();pa(this.domain.Oh(b,a))}di(a){const b=this.Vb(),c=Ds(this.domain);Hkb(b,a,c,(d,e,f)=>null==e&&null==f?void 0:{o:e,n:f});this.Xp(this.domain.Pd({attrs:c.build()}));return!0}kX(a){this.KUb(a.x);this.LUb(a.y);Rkb(this,a.attrs)}KUb(a){if(0!==a.pre||0!==a.post){var b=0;a=a.Pc();for(var c=a.head;c;)0===c.type?b+=a.Yx(c.length):(c=Bs(a,c.length),Xib(this.grid,b,c),b+=c),c=a.head}}LUb(a){let b=0;a=a.Pc();for(var c=a.head;c;)0===c.type?b+=a.Yx(c.length):(c=Bs(a,c.length),Yib(this.grid,b,c),b+=c),
c=a.head}constructor(a,b,c){super();this.Jh=a;this.domain=b;this.grid=new cmb;c.forEach(a.fC,(d,e,f)=>{0===Object.keys(f).length||this.grid.set(d,e,f)});a=this.Vb();pa(c.equals(a))}},rpb=class extends amb{Og(){return this.domain.Og()}gy(a){return new qpb(this.Jh,this.domain,a)}sm(a){return a}connect(a,b){return this.sm(a).connect(b)}Vb(a){return this.sm(a).Vb()}destroy(a,b){this.sm(a).destroy(b)}di(a,b){return this.sm(a).di(b)}constructor(){var a=__c.Ot;super();this.Jh=a;this.domain=new jpb(a.nya)}};__c.tpb=class{get kp(){return this.grid.kp}get Wy(){return this.grid.Wy}get rows(){return this.grid.rows}forEach(a){this.grid.forEach((b,c,d)=>{a(d.state,Ks(b,c,d.right,d.bottom))})}map(a){const b=new spb;this.forEach((c,d)=>{b.add(d,a(c,d))});return b.build()}get(a,b){var c=this.grid.rows[b];if(null!=c&&(c=c.cells[a],null!=c))return __c.Tkb(Ks(a,b,c.right,c.bottom),c.state)}values(){const a=[];this.forEach((b,c)=>{a.push(__c.Tkb(c,b))});return a}Pc(){return this.grid.Pc()}constructor(a){this.grid=
a}};__c.tpb.prototype.mac=fa(143);
var spb=class{add(a,b){dlb(this.NOd,a);this.ued.add(a.left,a.top,a.right,a.bottom,{right:a.right,bottom:a.bottom,state:b});return this}build(){const a=this.ued.build();return a.isEmpty?upb:new __c.tpb(a)}constructor(){this.ued=new vpb;this.NOd=new wpb}},xpb=class{constructor(a,b){this.type=0;this.o=a&&{right:a.right,bottom:a.bottom,state:a.state};this.n=b&&{right:b.right,bottom:b.bottom,state:b.state}}},ypb=class{constructor(a,b){this.bounds=a;this.delta=b;this.type=1}},Ms=class{add(a,b,c){if(null==
c)return this;switch(c.type){case 1:var d=a,e=b;if(c.bounds&&c.bounds.o){var f=Ks(a,b,c.bounds.o.right,c.bounds.o.bottom);dlb(this.W5c,f);d=Math.max(d,c.bounds.o.right);e=Math.max(e,c.bounds.o.bottom)}c.bounds&&c.bounds.n&&(f=Ks(a,b,c.bounds.n.right,c.bounds.n.bottom),dlb(this.p5c,f),d=Math.max(d,c.bounds.n.right),e=Math.max(e,c.bounds.n.bottom));this.cSa.add(a,b,d,e,c);return this;case 0:return d=a,e=b,c.o&&(f=Ks(a,b,c.o.right,c.o.bottom),dlb(this.W5c,f),d=Math.max(d,c.o.right),e=Math.max(e,c.o.bottom)),
c.n&&(f=Ks(a,b,c.n.right,c.n.bottom),dlb(this.p5c,f),d=Math.max(d,c.n.right),e=Math.max(e,c.n.bottom)),this.cSa.add(a,b,d,e,c),this;default:throw new r(c);}}build(){return this.cSa.build()}constructor(){this.cSa=new vpb;this.W5c=new wpb;this.p5c=new wpb}},Apb=class{get isEmpty(){return 0===this.rows.length}forEach(a){this.rows.forEach(({cells:b},c)=>{b.forEach((d,e)=>{a(e,c,d)})})}values(){const a=[];this.forEach((b,c,d)=>a.push([b,c,d]));return a}Pc(){return new zpb(this.rows)}constructor(a,b,c){this.rows=
a;this.kp=b;this.Wy=c}},zpb=class{get head(){const a=this.rows[this.y];return a&&a.cells[this.x]&&{x:this.x,y:this.y,value:a.cells[this.x]}}hz(){const a=m(this.head),b=m(this.rows[this.y]);this.x++;Ukb(this);null==b.cells[this.x]&&(this.y++,this.x=0,Vkb(this),Ukb(this));return a}finish(){pa(null==this.head)}constructor(a){this.rows=a;this.x=this.y=0;Vkb(this);Ukb(this)}},vpb=class{add(a,b,c,d,e){ma(a<=c);ma(b<=d);null==this.a4||this.a4.y<b?(this.flush(),this.rows.length&&pa(this.rows.length<=b),this.a4=
{y:b,cec:d,cells:[]},this.a4.cells[a]=e):this.a4.y===b?(pa(this.a4.cells.length<=a),this.a4.cec=Math.max(this.a4.cec,d),this.a4.cells[a]=e):pa(this.a4.y>b);this.kp=Math.max(this.kp,c+1);this.Wy=Math.max(this.Wy,d+1);return this}flush(){if(this.a4){const {y:a,...b}=this.a4;this.rows[a]=b;this.a4=void 0}}build(){this.flush();return new Apb(this.rows,this.kp,this.Wy)}constructor(){this.rows=[];this.Wy=this.kp=0}},upb=new __c.tpb(new Apb([],0,0)),Bpb=class extends ct{Og(){return new spb}zM(){return upb}replace(a,
b){return new xpb(a,b)}update(a,b){a=null==a||Ls(a.o,a.n)?void 0:a;b=null==b||this.component.isIdentity(b)?void 0:b;return null!=a||null!=b?new ypb(a,b):void 0}Pd(a={}){const b=a.cells||(new Ms).build();return{x:a.x||Fs.dg().build(),y:a.y||Fs.dg().build(),cells:b,U1:a.U1||Pt.project(b)}}isIdentity(a){return Fs.isIdentity(a.x)&&Fs.isIdentity(a.y)&&a.cells.isEmpty&&Pt.isIdentity(a.U1)}compose(a,b){const c=Wkb(this,a.cells,b.x,b.y),d=Pt.expand(a.U1,b.x,b.y);return{x:Fs.compose(a.x,b.x),y:Fs.compose(a.y,
b.y),cells:Zkb(this,c,b.cells),U1:Pt.compose(d,b.U1)}}transform(a,b){const [c,d]=Fs.transform(a.x,b.x),[e,f]=Fs.transform(a.y,b.y),g=Wkb(this,a.cells,c,e),h=Wkb(this,b.cells,d,f);a=Pt.expand(a.U1,c,e);b=Pt.expand(b.U1,d,f);const [k,l]=Pt.transform(a,b),n=new wpb,p=Pt.cursor(a,Math.max(g.kp,h.kp),Math.max(g.Wy,h.Wy)),q=new Ms,v=new Ms;Xkb(g.Pc(),h.Pc(),(w,x,z,B)=>{if(null!=z||null!=B){a:if(null==z||null==B)z=[B,z];else switch(z.type){case 1:b:switch(B.type){case 1:const [H,K]=z.delta&&B.delta?this.component.transform(z.delta,
B.delta):[B.delta,z.delta];if(z.bounds&&B.bounds){z=z.bounds;B=B.bounds;pa(Ls(z.o,B.o));const S={right:Math.min(z.n.right,B.n.right),bottom:Math.min(z.n.bottom,B.n.bottom)};z=[{o:z.n,n:S},{o:B.n,n:S}]}else z=[B.bounds,z.bounds];const [M,O]=z;z=[this.update(M,H),this.update(O,K)];break b;case 0:pa(null!=B.o);z.bounds&&pa(Ls(z.bounds.o,B.o));z=[this.replace({...(z.bounds?z.bounds.n:B.o),state:z.delta?this.component.apply(B.o.state,z.delta):B.o.state},B.n),void 0];break b;default:throw new r(B);}break a;
case 0:b:switch(B.type){case 1:pa(null!=z.o);B.bounds&&pa(Ls(z.o,B.bounds.o));z=[void 0,this.replace({...(B.bounds?B.bounds.n:z.o),state:B.delta?this.component.apply(z.o.state,B.delta):z.o.state},z.n)];break b;case 0:pa(Ns(this,z.o,B.o));z=[void 0,this.replace(B.n,z.n)];break b;default:throw new r(B);}break a;default:throw new r(z);}var [C,F]=z;z=C&&blb(this,w,x,C,n,p);(C||z)&&v.add(w,x,Ykb(this,C,z));(F||z)&&q.add(w,x,Ykb(this,F,z))}});p.finish();return[{x:c,y:e,cells:v.build(),U1:k},{x:d,y:f,cells:q.build(),
U1:l}]}ik(a){const b=new Ms;a.cells.forEach((d,e,f)=>{if(null!=f)switch(f.type){case 1:f=this.update(f.bounds&&{o:f.bounds.n,n:f.bounds.o},f.delta&&this.component.ik(f.delta));b.add(d,e,f);break;case 0:b.add(d,e,this.replace(f.n,f.o));break;default:throw new r(f);}});const c=b.build();return{x:Fs.ik(a.x),y:Fs.ik(a.y),cells:c,U1:Pt.project(c)}}xj(a,b){var c;if(c=Fs.xj(a.x,b.x)&&Fs.xj(a.y,b.y))a:{c=a.cells;var d=b.cells;if(c.kp!==d.kp||c.Wy!==d.Wy)c=!1;else{c=c.Pc();d=d.Pc();for(var e=c.head,f=d.head;e||
f;){var g;(g=null==e)||(g=null==f)||(g=e.x!==f.x||e.y!==f.y)||(e=e.value,f=f.value,g=!(e===f||(null==e||null==f?e===f:0===e.type&&0===f.type?Ns(this,e.o,f.o)&&Ns(this,e.n,f.n):1===e.type&&1===f.type&&(e.bounds&&f.bounds?Ls(e.bounds.o,f.bounds.o)&&Ls(e.bounds.n,f.bounds.n):e.bounds===f.bounds)&&(e.delta&&f.delta?this.component.xj(e.delta,f.delta):e.delta===f.delta))));if(g){c=!1;break a}c.hz();d.hz();e=c.head;f=d.head}c=!0}}return c&&Pt.xj(a.U1,b.U1)}identity(){return this.Pd()}apply(a,b){a=this.yDa(a,
b.x,b.y);const c=this.Og();Xkb(a.Pc(),b.cells.Pc(),(d,e,f,g)=>{if(null!=f||null!=g)if(null==g)pa(null!=f),c.add(Ks(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:pa(null!=f);g.bounds&&pa(Ls(g.bounds.o,f));c.add({...(g.bounds?g.bounds.n:f),left:d,top:e},g.delta?this.component.apply(f.state,g.delta):f.state);break;case 0:g.o&&(pa(null!=f),pa(Ns(this,f,g.o)));g.n&&c.add({left:d,top:e,right:g.n.right,bottom:g.n.bottom},g.n.state);break;default:throw new r(g);}});return c.build()}yDa(a,b,c){if(Fs.isIdentity(b)&&
Fs.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=Cs(b,d),g=Cs(c,e),h=new spb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};h.add(l,k)});return h.build()}Jk(a,b){const c=this.Og();Xkb(a.Pc(),b.cells.Pc(),(d,e,f,g)=>{if(null!=f||null!=g)if(null==g)pa(null!=f),c.add(Ks(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:pa(null!=f);g.bounds&&
pa(Ls(g.bounds.n,f));c.add({...(g.bounds?g.bounds.o:f),left:d,top:e},g.delta?this.component.Jk(f.state,g.delta):f.state);break;case 0:g.n&&(pa(null!=f),pa(Ns(this,f,g.n)));g.o&&c.add({left:d,top:e,right:g.o.right,bottom:g.o.bottom},g.o.state);break;default:throw new r(g);}});return this.LMb(c.build(),b.x,b.y)}LMb(a,b,c){if(Fs.isIdentity(b)&&Fs.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=Dkb(b,d),g=Dkb(c,e),
h=new spb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};h.add(l,k)});return h.build()}Oh(a,b){a=a.Pc();b=b.Pc();let c=a.head,d=b.head;for(;c||d;){if(null==c||null==d||c.x!==d.x||c.y!==d.y||c.value.bottom!==d.value.bottom||c.value.right!==d.value.right||!this.component.Oh(c.value.state,d.value.state))return!1;a.hz();b.hz();c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof Bpb&&this.component.equals(a.component)}constructor(a){super();
this.component=a}},wpb=class{append(a){for(let b=a.top;b<=a.bottom;b++)for(let c=a.left;c<=a.right;c++){pa(!this.readBuffer(c,b));const {Ypd:d,bqd:e}=elb(this,c,b);this.buffer[e]||(this.buffer[e]=[]);this.buffer[e][d]=!0}}readBuffer(a,b){const {Ypd:c,bqd:d}=elb(this,a,b);return this.buffer[d]&&this.buffer[d][c]}constructor(){this.buffer=[];this.LLa=this.fqa=0}},Cpb=class extends ct{isIdentity(a){return a.items.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=
this.t2a.Og();Hkb(a,b,c,(d,e,f)=>e||f);return c.build()}transform(a,b){return[b,a]}ik(a){return a}xj(a,b){return a.equals(b)}identity(){return this.id}apply(a){return a}Jk(a){return a}Oh(a,b){return a===b}equals(a){return this===a||a instanceof Cpb}dg(){return new Dpb(()=>this.t2a.Og(),a=>mib(this,a))}cursor(a,b,c){return new Epb(a,b,c)}project(a){const b=this.dg();a.forEach((c,d,e)=>{switch(e.type){case 1:e.bounds&&b.add(Ks(c,d,e.bounds.n.right,e.bounds.n.bottom));break;case 0:e.n&&b.add(Ks(c,d,
e.n.right,e.n.bottom));break;default:throw new r(e);}});return b.build()}expand(a,b,c){b=this.t2a.Pd({x:flb(b),y:flb(c)});return this.t2a.apply(a,b)}constructor(){super();this.t2a=new jpb((a,b,c)=>b===c);this.id=this.t2a.Og().build()}},Dpb=class{add(a){const b=this.cSa(),c=2*a.left,d=2*a.top,e=2*a.right;a=2*a.bottom;b.rows(d);b.pv().FB(c).attrs({value:!0}).FB(e-c+1).attrs({value:void 0}).finish();b.rows(a-d+1);b.pv().FB(c).attrs({value:void 0}).FB(e-c+1).attrs({value:void 0}).finish();this.QR.push(b.build());
return this}build(){return this.QR.length?this.reduce(this.QR):this.cSa().build()}constructor(a,b){this.cSa=a;this.reduce=b;this.QR=[]}},Epb=class{get yi(){pa(0===this.Qha%2);return this.Qha/2}pv(){pa(0===this.Uza);this.rQ=this.Pc.pv();return this}get value(){pa(null!=this.rQ);return this.rQ.attrs.value}XYb(a){pa(null!=this.rQ);for(var b=this.rQ.head;null!=b;){if(0===b.type)this.rQ.bt();else if(b=this.rQ.Bm(b.length),0===this.Qha%2&&this.rQ.attrs.value)for(let c=0;c<b;c++)0===this.Uza%2&&a(this.Uza/
2,this.Qha/2),this.Uza++;else this.Uza+=b;b=this.rQ.head}return this}V7a(){for(pa(null!=this.rQ);this.rQ.head;)0===this.rQ.head.type?this.rQ.bt():this.rQ.Bm(this.rQ.head.length);this.rQ.finish();this.rQ=void 0;this.Uza=0;return this}finish(){$kb(this,this.Pc.Wy);this.Pc.head&&(this.pv(),this.V7a());this.Pc.finish()}constructor(a,b,c){this.Uza=this.Qha=0;this.Pc=a.Pc(void 0,2*b,2*c)}},Pt=new Cpb;var Hpb=class extends ft{get(a,b){a=this.grid.get(a,b);if(null!=a)return{span:a.span,ref:a.value}}forEach(a){this.grid.forEach((b,c,d)=>{b.wFa.left===d&&b.wFa.top===c&&a(b.value,b.span)})}set(a,b){b=(new Ms).add(a.left,a.top,this.domain.replace(void 0,{right:a.right,bottom:a.bottom,state:b})).build();this.Xp(this.domain.compose(glb(this,a),this.domain.Pd({cells:b})));return m(this.get(a.top,a.left))}delete(a){this.Xp(glb(this,a))}createRef(a,b){var c=this.grid;var d={left:Wib(this.grid,b.left),top:Vib(this.grid,
b.top),right:Wib(this.grid,b.right),bottom:Vib(this.grid,b.bottom)};c=new Fpb(c,d);d=Gr(this,hlb(this,c));const {mutable:e,ow:f}=Hr(this.type,a,d);a=new Gpb(e,f,d,c);for(c=b.top;c<=b.bottom;c++)for(d=b.left;d<=b.right;d++)this.grid.set(c,d,a);return a}A0b(a,b,c){pa(a.span.left===c.left);pa(a.span.top===c.top);pa(a.span.right===c.right);pa(a.span.bottom===c.bottom);for(let d=c.top;d<=c.bottom;d++)for(let e=c.left;e<=c.right;e++)pa(this.grid.get(d,e)===a),this.grid.delete(d,e);Ir(this.type,b,a.to,a.value)}kX(a){this.KUb(a.x);
this.LUb(a.y);a.cells.forEach((b,c,d)=>{switch(d.type){case 1:var e=m(this.grid.get(c,b));d.delta&&e.to.next(d.delta);if(d.bounds){pa(e.span.left===b&&e.span.top===c);const h=d.bounds.o;var f=d.bounds.n;pa(e.span.right===h.right&&e.span.bottom===h.bottom);if(h.right!==f.right||h.bottom!==f.bottom){d=Math.min(h.right,f.right);f=Math.min(h.bottom,f.bottom);for(var g=f+1;g<=h.bottom;g++)for(let k=b;k<=h.right;k++)pa(this.grid.get(g,k)===e),this.grid.delete(g,k);for(b=d+1;b<=h.right;b++)for(g=c;g<=h.bottom;g++)pa(this.grid.get(g,
b)===e),this.grid.delete(g,b);e.wFa.right=Wib(this.grid,d);e.wFa.bottom=Vib(this.grid,f)}}break;case 0:d.o&&(e=m(this.grid.get(c,b)),pa(e.span.left===b&&e.span.top===c),pa(e.span.right===d.o.right&&e.span.bottom===d.o.bottom),this.A0b(e,d.o.state,{left:b,top:c,right:d.o.right,bottom:d.o.bottom}));break;default:throw new r(d);}});a.cells.forEach((b,c,d)=>{switch(d.type){case 1:if(d.bounds){const g=m(this.grid.get(c,b));var e=d.bounds.o;d=d.bounds.n;var f=Math.min(e.right,d.right);e=Math.min(e.bottom,
d.bottom);for(e+=1;e<=d.bottom;e++)for(let h=b;h<=d.right;h++)pa(null==this.grid.get(e,h)),this.grid.set(e,h,g);for(b=f+1;b<=d.right;b++)for(f=c;f<=d.bottom;f++)pa(null==this.grid.get(f,b)),this.grid.set(f,b,g);g.wFa.right=Wib(this.grid,d.right);g.wFa.bottom=Vib(this.grid,d.bottom)}break;case 0:d.n&&this.createRef(d.n.state,{left:b,top:c,right:d.n.right,bottom:d.n.bottom});break;default:throw new r(d);}})}KUb(a){if(0!==a.pre||0!==a.post){var b=0;a=a.Pc();for(var c=a.head;c;)0===c.type?b+=a.Yx(c.length):
(c=Bs(a,c.length),Xib(this.grid,b,c,d=>d.span.right!==b-1),b+=c),c=a.head}}LUb(a){let b=0;a=a.Pc();for(var c=a.head;c;)0===c.type?b+=a.Yx(c.length):(c=Bs(a,c.length),Yib(this.grid,b,c,d=>d.span.bottom!==b-1),b+=c),c=a.head}Vb(){const a=this.domain.Og();for(let b=0;b<this.grid.Wy;b++)for(let c=0;c<this.grid.kp;c++){const d=this.grid.get(b,c);null!=d&&d.span.top===b&&d.span.left===c&&a.add(d.span,this.type.Vb(d.value))}return a.build()}destroy(a){let b=0,c=0;a.forEach(()=>c++);for(let d=0;d<this.grid.Wy;d++)for(let e=
0;e<this.grid.kp;e++){const f=this.grid.get(d,e);if(null==f||f.span.top!==d||f.span.left!==e)continue;const g=m(a.get(f.span.left,f.span.top));pa(g.span.right===f.span.right&&g.span.bottom===f.span.bottom);this.type.destroy(f.value,g.state);b++}pa(c===b)}di(a){const b=new Ms,c=new Ms;for(let d=0;d<this.grid.Wy;d++)for(let e=0;e<this.grid.kp;e++){const f=this.grid.get(d,e);null!=f&&f.span.top===d&&f.span.left===e&&b.add(f.span.left,f.span.top,this.domain.replace({right:f.span.right,bottom:f.span.bottom,
state:this.type.Vb(f.value)},void 0))}a.forEach((d,e)=>c.add(e.left,e.top,this.domain.replace(void 0,{right:e.right,bottom:e.bottom,state:d})));this.Xp(this.domain.compose(this.domain.Pd({cells:b.build()}),this.domain.Pd({cells:c.build()})));return!0}constructor(a,b,c){super();this.type=a;this.domain=b;this.grid=new cmb;c.forEach((d,e)=>{this.createRef(d,e)})}},Gpb=class{get span(){return this.wFa.E8c.get()}constructor(a,b,c,d){this.value=a;this.to=b;this.from=c;this.wFa=d}},Fpb=class{get right(){return this.HCc.get()}set right(a){this.HCc.set(a)}get bottom(){return this.pCc.get()}set bottom(a){this.pCc.set(a)}constructor(a,
b){this.Qyb=a;this.E8c=at(()=>({left:m(this.Qyb.nYb.get(this.left)),top:m(this.Qyb.poc.get(this.top)),right:m(this.Qyb.nYb.get(this.right)),bottom:m(this.Qyb.poc.get(this.bottom))}),{equals:__c.Blb.structural});this.left=b.left;this.top=b.top;this.HCc=new gt(b.right);this.pCc=new gt(b.bottom)}},Ipb=class extends et{gy(a){return new Hpb(this.type,this.domain,a)}sm(a){return a}connect(a,b){return this.sm(a).connect(b)}Vb(a){return this.sm(a).Vb()}destroy(a,b){return this.sm(a).destroy(b)}di(a,b){return this.sm(a).di(b)}constructor(a){super(dt,
dt);this.type=a;this.domain=new Bpb(this.type.domain)}};var Jpb,Kpb,Os,ilb,Qt,Lpb,Mpb,Npb;Jpb=new Map;Kpb=class{ordinal(a,b){null!=b?this.x1a.set(a,b):this.x1a.delete(a);return this}zj(a){a.forEach((b,c)=>this.x1a.set(c,b));return this}build(){return this.x1a.size?this.x1a:Jpb}constructor(){this.x1a=new Map}};Os=class{toString(){var a,b;return`R(${null!==(a=this.oldValue)&&void 0!==a?a:"_"},${null!==(b=this.newValue)&&void 0!==b?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=0}};
ilb=class{toString(){return`U(${this.oldValue},${this.newValue})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=1}};Qt=class{static create(a,b){b=b.size?b:Lpb.zj;return b!==Lpb.zj||a!==Lpb.axis?new Qt(a,b):Lpb}toString(){const a=[...this.zj].map(([b,c])=>`"${b}":${c}`).join(",");return`{${this.axis}|${a}}`}constructor(a,b){this.axis=a;this.zj=b}};Lpb=new Qt(Fs.dg().build(),new Map);
Mpb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}build(){return Qt.create(this.axis.build(),this.zj)}constructor(){this.zj=new Map;this.axis=Fs.dg()}};
Npb=class extends ct{Og(){return new Kpb}dg(){return new Mpb}replace(a,b,c){return Ps(this.dg(),a,b,c).build()}update(a,b,c){return jlb(this.dg(),a,b,c).build()}Pd(a,b){return Qt.create(a,b)}isIdentity(a){return Fs.isIdentity(a.axis)&&!a.zj.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=llb(a.zj,b.axis),d=new Map;for(const h of klb(c,b.zj)){var e=c.get(h);const k=b.zj.get(h);if(e&&k){var f=d,g=f.set;a:switch(ra(e.newValue,k.oldValue),e.type){case 0:e=new Os(e.oldValue,
k.newValue);break a;case 1:switch(k.type){case 0:e=new Os(e.oldValue,k.newValue);break a;case 1:e=new ilb(e.oldValue,k.newValue);break a;default:throw new r(k);}default:throw new r(e);}g.call(f,h,e)}else e?d.set(h,e):k&&d.set(h,k)}return Qt.create(Fs.compose(a.axis,b.axis),d)}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return[b,a];const [c,d]=Fs.transform(a.axis,b.axis);a=llb(a.zj,c);const e=llb(b.zj,d);b=new Map;const f=new Map;for(var g of klb(a,e)){var h=a.get(g);const k=e.get(g);
if(h&&k){a:switch(ra(h.oldValue,k.oldValue),h.type){case 0:switch(k.type){case 0:h=[void 0,new Os(k.newValue,h.newValue)];break a;case 1:h=[void 0,new Os(k.newValue,h.newValue)];break a;default:throw new r(k);}case 1:switch(k.type){case 0:h=[new Os(h.newValue,k.newValue),void 0];break a;case 1:h=[void 0,new ilb(k.newValue,h.newValue)];break a;default:throw new r(k);}default:throw new r(h);}const [l,n]=h;n&&b.set(g,n);l&&f.set(g,l)}else h?b.set(g,h):k&&f.set(g,k)}g=Qt.create(c,f);a=Qt.create(d,b);
return[g,a]}ik(a){const b=0===a.zj.size?a.zj:Yh(a.zj,c=>{switch(c.type){case 0:return new Os(c.newValue,c.oldValue);case 1:return new ilb(c.newValue,c.oldValue);default:throw new r(c);}});return Qt.create(Fs.ik(a.axis),b)}xj(a,b){if(a===b)return!0;if(!Fs.xj(a.axis,b.axis)||a.zj.size!==b.zj.size)return!1;for(const e of a.zj.keys()){var c=a.zj.get(e),d=b.zj.get(e);if(c!==d&&(null==c||null==d||c.type!==d.type||c.oldValue!==d.oldValue||c.newValue!==d.newValue))return!1}return!0}identity(){return Lpb}apply(a,
b){if(this.isIdentity(b)||!a.size&&!b.zj.size)return a;a=this.yDa(a,b.axis);if(!b.zj.size)return a;const c=new Map(a);for(const [d,e]of b.zj)b=a.get(d),ra(b,e.oldValue),null!=e.newValue?c.set(d,e.newValue):c.delete(d);return c}yDa(a,b){if(Fs.isIdentity(b))return a;const c=new Set(a.values()),d=Cs(b,c);return Yh(a,e=>m(d.get(e)))}Jk(a,b){if(this.isIdentity(b)||!a.size&&!b.zj.size)return a;if(!b.zj.size)return this.LMb(a,b.axis);const c=new Map(a);for(const [d,e]of b.zj){const f=a.get(d);ra(f,e.newValue);
null!=e.oldValue?c.set(d,e.oldValue):c.delete(d)}return this.LMb(c,b.axis)}LMb(a,b){if(Fs.isIdentity(b))return a;const c=new Set(a.values()),d=Dkb(b,c);return Yh(a,e=>m(d.get(e)))}Oh(a,b){return a===b?!0:a.size===b.size&&[...a.keys()].every(c=>a.get(c)===b.get(c))}equals(a){return this===a||a instanceof Npb}constructor(){super();this.zM=Jpb}};Us=__c.Us=new Npb;var Opb=new Map,Rs=class{static from(a){if(a instanceof Rs)return a;if(Array.isArray(a)){const [b,c]=a;return new Rs(b,c)}return new Rs(a.start,a.end)}toString(){return`[${this.start},${this.end}]`}constructor(a,b){this.start=a;this.end=b}},Ppb=class{range(a,b){b?this.i6.set(a,Rs.from(b)):this.i6.delete(a);return this}ze(a){a.forEach((b,c)=>this.i6.set(c,Rs.from(b)));return this}build(){return this.i6.size?this.i6:Opb}constructor(){this.i6=new Map}},qlb=class{toString(){var a,b;return`R(${null!==
(a=this.oldValue)&&void 0!==a?a:"_"},${null!==(b=this.newValue)&&void 0!==b?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type="replace"}},Vs=class{static from(a){if(a instanceof Vs)return a;if(Array.isArray(a)){const [b,c]=a;return new Vs(b,c)}return new Vs(a.oldValue,a.newValue)}toString(){return`[${this.oldValue},${this.newValue}]`}constructor(a,b){this.oldValue=a;this.newValue=b}},rlb=class{toString(){var a,b;return`U(${null!==(a=this.start)&&void 0!==a?a:"_"},${null!==(b=this.end)&&
void 0!==b?b:"_"})`}constructor(a,b){this.start=a;this.end=b;this.type="update"}},slb=class{static create(a,b){b=b.size?b:Qpb.ze;return b!==Qpb.ze||a!==Qpb.axis?new slb(a,b):Qpb}toString(){return`{${this.axis}|${[...this.ze].map(([a,b])=>`"${a}":${b}`).join(",")}}`}constructor(a,b){this.axis=a;this.ze=b}},Qpb=new slb(Fs.dg().build(),new Map),Rpb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}hXa(a,b,c){this.ze.set(a,new qlb(b&&Rs.from(b),c&&Rs.from(c)));
return this}createRange(a,b){return this.hXa(a,void 0,b)}build(){return slb.create(this.axis.build(),this.ze)}constructor(){this.ze=new Map;this.axis=Fs.dg()}},Rt,Spb;pa(!0);Rt=Us.map(tlb,plb,olb,nlb);
Spb=class extends ct{Og(){return new Ppb}dg(){return new Rpb}replace(a,b,c){return this.dg().hXa(a,b,c).build()}update(a,b,c){var d=this.dg();d.ze.set(a,new rlb(b&&Vs.from(b),c&&Vs.from(c)));return d.build()}Pd(a,b){return slb.create(a,b)}isIdentity(a){return Rt.isIdentity(a)}compose(a,b){return Rt.compose(a,b)}transform(a,b){return Rt.transform(a,b)}ik(a){return Rt.ik(a)}xj(a,b){return Rt.xj(a,b)}identity(a){return Rt.identity(a)}apply(a,b){return Rt.apply(a,b)}Jk(a,b){return Rt.Jk(a,b)}Oh(a,b){return Rt.Oh(a,
b)}equals(a){return Rt.equals(a)}constructor(){super();this.zM=Opb}};St=__c.St=new Spb;var Tpb=class extends ct{Pd(a){return{rows:a.rows||this.rows.dg().build(),cols:a.cols||this.cols.dg().build(),Yn:a.Yn||St.dg().build().ze,wn:a.wn||Us.dg().build().zj,Sn:a.Sn||St.dg().build().ze,Am:a.Am||Us.dg().build().zj,cells:a.cells||Xs(this.cells.Pd({}),this.cols.dg().build(),this.rows.dg().build()),attrs:a.attrs||Xs(this.attrs.Pd({}),this.cols.dg().build(),this.rows.dg().build())}}isIdentity(a){return this.rows.isIdentity(a.rows)&&this.cols.isIdentity(a.cols)&&St.isIdentity(St.Pd(Fs.identity(),
a.Yn))&&Us.isIdentity(Us.Pd(Fs.identity(),a.wn))&&St.isIdentity(St.Pd(Fs.identity(),a.Sn))&&Us.isIdentity(Us.Pd(Fs.identity(),a.Am))&&this.cells.isIdentity(this.cells.Pd(a.cells))&&this.attrs.isIdentity(this.attrs.Pd(a.attrs))}compose(a,b){const c=Ws(a.cols),d=Ws(a.rows),e=Ws(b.cols),f=Ws(b.rows),g=this.rows.compose(a.rows,b.rows),h=this.cols.compose(a.cols,b.cols),k=St.compose(St.Pd(d,a.Yn),St.Pd(f,b.Yn)).ze,l=Us.compose(Us.Pd(d,a.wn),Us.Pd(f,b.wn)).zj,n=St.compose(St.Pd(c,a.Sn),St.Pd(e,b.Sn)).ze,
p=Us.compose(Us.Pd(c,a.Am),Us.Pd(e,b.Am)).zj,q=this.cells.compose(this.cells.Pd({...a.cells,x:c,y:d}),this.cells.Pd({...b.cells,x:e,y:f}));a=this.attrs.compose(this.attrs.Pd({...a.attrs,x:c,y:d}),this.attrs.Pd({...b.attrs,x:e,y:f}));return{rows:g,cols:h,Yn:k,wn:l,Sn:n,Am:p,cells:Xs(q,h,g),attrs:Xs(a,h,g)}}transform(a,b){const c=Ws(a.cols),d=Ws(a.rows),e=Ws(b.cols),f=Ws(b.rows),[g,h]=this.rows.transform(a.rows,b.rows),[k,l]=this.cols.transform(a.cols,b.cols),[{ze:n},{ze:p}]=St.transform(St.Pd(d,a.Yn),
St.Pd(f,b.Yn)),[{zj:q},{zj:v}]=Us.transform(Us.Pd(d,a.wn),Us.Pd(f,b.wn)),[{ze:w},{ze:x}]=St.transform(St.Pd(c,a.Sn),St.Pd(e,b.Sn)),[{zj:z},{zj:B}]=Us.transform(Us.Pd(c,a.Am),Us.Pd(e,b.Am)),[C,F]=this.cells.transform(this.cells.Pd({...a.cells,x:c,y:d}),this.cells.Pd({...b.cells,x:e,y:f})),[H,K]=this.attrs.transform(this.attrs.Pd({...a.attrs,x:c,y:d}),this.attrs.Pd({...b.attrs,x:e,y:f}));a={rows:g,cols:k,Yn:n,wn:q,Sn:w,Am:z,cells:Xs(C,k,g),attrs:Xs(H,k,g)};b={rows:h,cols:l,Yn:p,wn:v,Sn:x,Am:B,cells:Xs(F,
l,h),attrs:Xs(K,l,h)};return[a,b]}ik(a){const b=Ws(a.cols),c=Ws(a.rows),d=this.rows.ik(a.rows),e=this.cols.ik(a.cols),f=St.ik(St.Pd(c,a.Yn)).ze,g=Us.ik(Us.Pd(c,a.wn)).zj,h=St.ik(St.Pd(b,a.Sn)).ze,k=Us.ik(Us.Pd(b,a.Am)).zj,l=this.cells.ik({...a.cells,x:b,y:c});a=this.attrs.ik(this.attrs.Pd({...a.attrs,x:b,y:c}));return{rows:d,cols:e,Yn:f,wn:g,Sn:h,Am:k,cells:Xs(l,e,d),attrs:Xs(a,e,d)}}xj(a,b){return this.rows.xj(a.rows,b.rows)&&this.cols.xj(a.cols,b.cols)&&St.xj(St.Pd(Fs.identity(),a.Yn),St.Pd(Fs.identity(),
b.Yn))&&Us.xj(Us.Pd(Fs.identity(),a.wn),Us.Pd(Fs.identity(),b.wn))&&St.xj(St.Pd(Fs.identity(),a.Sn),St.Pd(Fs.identity(),b.Sn))&&Us.xj(Us.Pd(Fs.identity(),a.Am),Us.Pd(Fs.identity(),b.Am))&&this.cells.xj(this.cells.Pd(a.cells),this.cells.Pd(b.cells))&&this.attrs.xj(this.attrs.Pd(a.attrs),this.attrs.Pd(b.attrs))}identity(a){return{rows:this.rows.identity(a.rows),cols:this.cols.identity(a.cols),Yn:St.identity(a.Yn).ze,wn:Us.identity(a.wn).zj,Sn:St.identity(a.Sn).ze,Am:Us.identity(a.Am).zj,cells:this.cells.identity(a.cells),
attrs:this.attrs.identity(a.attrs)}}apply(a,b){if(this.isIdentity(b))return a;const c=Ws(b.cols),d=Ws(b.rows),e=this.rows.apply(a.rows,b.rows),f=this.cols.apply(a.cols,b.cols),g=St.apply(a.Yn,St.Pd(d,b.Yn)),h=Us.apply(a.wn,Us.Pd(d,b.wn)),k=St.apply(a.Sn,St.Pd(c,b.Sn)),l=Us.apply(a.Am,Us.Pd(c,b.Am)),n=this.cells.apply(a.cells,{...b.cells,x:c,y:d});a=this.attrs.apply(a.attrs,this.attrs.Pd({...b.attrs,x:c,y:d}));return{rows:e,cols:f,Yn:g,wn:h,Sn:k,Am:l,cells:n,attrs:a}}Jk(a,b){if(this.isIdentity(b))return a;
const c=Ws(b.cols),d=Ws(b.rows),e=this.rows.Jk(a.rows,b.rows),f=this.cols.Jk(a.cols,b.cols),g=St.Jk(a.Yn,St.Pd(d,b.Yn)),h=Us.Jk(a.wn,Us.Pd(d,b.wn)),k=St.Jk(a.Sn,St.Pd(c,b.Sn)),l=Us.Jk(a.Am,Us.Pd(c,b.Am)),n=this.cells.Jk(a.cells,{...b.cells,x:c,y:d});a=this.attrs.Jk(a.attrs,this.attrs.Pd({...b.attrs,x:c,y:d}));return{rows:e,cols:f,Yn:g,wn:h,Sn:k,Am:l,cells:n,attrs:a}}Oh(a,b){return this.rows.Oh(a.rows,b.rows)&&St.Oh(a.Yn,b.Yn)&&Us.Oh(a.wn,b.wn)&&St.Oh(a.Sn,b.Sn)&&Us.Oh(a.Am,b.Am)&&this.cols.Oh(a.cols,
b.cols)&&this.cells.Oh(a.cells,b.cells)&&this.attrs.Oh(a.attrs,b.attrs)}equals(a){return this===a?!0:a instanceof Tpb?this.rows.equals(a.rows)&&this.cols.equals(a.cols)&&this.cells.equals(a.cells)&&this.attrs.equals(a.attrs):!1}constructor(a,b,c,d){super();this.rows=a;this.cols=b;this.cells=c;this.attrs=d}};var Upb=class extends ft{static F(a){N(a,{e0c:at})}get e0c(){const a=new Map;this.items.forEach((b,c)=>a.set(b,c));return a}get(a){return Ys(this,this.refs.get(a))}create(a,b){a=this.domain.replace(a,this.get(a),b);this.Xp(a)}update(a,b){const c=m(Ys(this,this.refs.get(a)));a=this.domain.update(a,c,b);this.Xp(a)}delete(a){const b=Ys(this,this.refs.get(a));null!=b&&(a=this.domain.replace(a,b,void 0),this.Xp(a))}Vb(){const a=this.domain.Og();for(const [b,c]of this.refs)a.ordinal(b,Ys(this,c));return a.build()}destroy(a){pa(this.refs.size===
a.size);for(const [b,c]of this.refs)pa(a.has(b)),pa(Ys(this,c)===a.get(b))}di(a){const b=this.domain.dg();for(const [c,d]of this.refs){const e=Ys(this,d),f=a.get(c);Ps(b,c,e,f)}for(const [c,d]of a)this.refs.has(c)||Ps(b,c,void 0,d);this.Xp(b.build());return!0}kX(a){if(!this.domain.isIdentity(a)){var b=a.axis;if(!b.isEmpty()){var c=0;this.items.length<b.pre&&(this.items.length=b.pre);b=b.Pc();for(var d=b.head;d;)0===d.type?c+=b.Yx(d.length):(d=Bs(b,d.length),this.items.spliceWithArray(c,0,Array(d)),
c+=d),d=b.head}for(const [e,f]of a.zj)switch(f.type){case 0:null!=f.oldValue?(c=m(this.refs.get(e)),a=ulb(this,f.oldValue),ma(c===a)):ma(!this.refs.has(e));null!=f.newValue?this.refs.set(e,ulb(this,f.newValue)):this.refs.delete(e);break;case 1:c=m(this.refs.get(e));a=ulb(this,f.oldValue);ma(c===a);this.refs.set(e,ulb(this,f.newValue));break;default:throw new r(f);}}}constructor(a){super();Upb.F(this);this.domain=__c.Us;this.items=bt.array([],{deep:!1});this.refs=bt.map(new Map,{deep:!1});for(const [b,
c]of a)this.refs.set(b,ulb(this,c))}},Vpb=class extends et{gy(a){return new Upb(a)}sm(a){return a}connect(a,b){return this.sm(a).connect(b)}Vb(a){return this.sm(a).Vb()}destroy(a,b){return this.sm(a).destroy(b)}di(a,b){return this.sm(a).di(b)}constructor(){super(dt,Er);this.domain=__c.Us}},Tt=new Vpb;var Wpb=class{create(a,b){a=Qs(a);var c=this.base.get(a.start);const d=this.base.get(a.end);if(null==c&&null==d){c=this.base;b=new Map([[a.start,b.start],[a.end,b.end]]);a=c.domain.dg();for(const [e,f]of b)Ps(a,e,c.get(e),f);c.Xp(a.build())}}get(a){var b=Qs(a);a=this.base.get(b.start);b=this.base.get(b.end);if(null!=a&&null!=b)return{start:a,end:Math.max(a,b)}}delete(a){var b=Qs(a);a=this.base;var c=new Set([b.start,b.end]);b=a.domain.dg();for(const d of c)c=a.get(d),null!=c&&Ps(b,d,c);a.Xp(b.build())}constructor(a){this.base=
a}},Xpb=Tt.map(tlb,plb,olb,nlb,a=>new Wpb(a),a=>a.base),Ypb=class extends amb{gy(a){a=Tt.gy(nlb(a));return new Wpb(a)}connect(a,b){return Xpb.connect(a,b)}Vb(a){return Xpb.Vb(a)}destroy(a,b){return Xpb.destroy(a,b)}di(a,b){return Xpb.di(a,b)}constructor(){super();this.domain=__c.St}},Ut=new Ypb;var cqb,aqb,bqb,Zpb,$pb;
cqb=class extends ft{Vb(){return{rows:this.eIb.Vb(this.rows),cols:this.Arb.Vb(this.cols),Yn:Ut.Vb(this.Yn.ze),wn:Tt.Vb(this.wn.zj),Sn:Ut.Vb(this.Sn.ze),Am:Tt.Vb(this.Am.zj),cells:this.Tqb.Vb(this.cells.grid),attrs:this.kpb.Vb(this.attrs.grid)}}destroy(a){Ir(this.eIb,a.rows,this.Nld,this.rows);Ir(this.Arb,a.cols,this.Eld,this.cols);Ir(Ut,a.Yn,this.puc,this.Yn.ze);Ir(Tt,a.wn,this.ouc,this.wn.zj);Ir(Ut,a.Sn,this.luc,this.Sn.ze);Ir(Tt,a.Am,this.kuc,this.Am.zj);Ir(this.Tqb,a.cells,this.VLb,this.cells.grid);
Ir(this.kpb,a.attrs,this.ULb,this.attrs.grid)}di(a){return this.eIb.di(this.rows,a.rows)&&this.Arb.di(this.cols,a.cols)&&Ut.di(this.Yn.ze,a.Yn)&&Tt.di(this.wn.zj,a.wn)&&Ut.di(this.Sn.ze,a.Sn)&&Tt.di(this.Am.zj,a.Am)&&this.Tqb.di(this.cells.grid,a.cells)&&this.kpb.di(this.attrs.grid,a.attrs)}kX(a){const b=Ws(a.rows),c=Ws(a.cols);this.Nld.next(a.rows);this.Eld.next(a.cols);this.puc.next(St.Pd(b,a.Yn));this.ouc.next(Us.Pd(b,a.wn));this.luc.next(St.Pd(c,a.Sn));this.kuc.next(Us.Pd(c,a.Am));this.VLb.next(this.domain.cells.Pd({...a.cells,
y:b,x:c}));this.ULb.next(this.domain.attrs.Pd({...a.attrs,y:b,x:c}))}constructor(a,b,c,d,e,f){super();this.eIb=a;this.Arb=b;this.Tqb=c;this.kpb=d;this.domain=e;this.A4=g=>this.rows.has(g)?this.rows.XK(g):void 0;this.q1=g=>this.cols.has(g)?this.cols.XK(g):void 0;this.zSa=g=>this.rows.get(g);this.ySa=g=>this.cols.get(g);this.d7d=Gr(this,g=>{const h=Ws(g);Fs.isIdentity(h)||(this.VLb.next(this.domain.cells.Pd({y:h})),this.ULb.next(this.domain.attrs.Pd({y:h})),this.ouc.next(Us.Pd(h,new Map)),this.puc.next(St.Pd(h,
new Map)));return this.domain.Pd({rows:g})});a=Hr(this.eIb,f.rows,this.d7d);this.rows=a.mutable;this.Nld=a.ow;this.$6d=Gr(this,g=>{const h=Ws(g);Fs.isIdentity(h)||(this.VLb.next(this.domain.cells.Pd({x:h})),this.ULb.next(this.domain.attrs.Pd({x:h})),this.kuc.next(Us.Pd(h,new Map)),this.luc.next(St.Pd(h,new Map)));return this.domain.Pd({cols:g})});a=Hr(this.Arb,f.cols,this.$6d);this.cols=a.mutable;this.Eld=a.ow;this.b7d=Gr(this,g=>{ma(Fs.isIdentity(g.axis));return this.domain.Pd({wn:g.zj})});a=Hr(Tt,
f.wn,this.b7d);this.wn=new Zpb(a.mutable,this.A4,this.zSa);this.ouc=a.ow;this.c7d=Gr(this,g=>{ma(Fs.isIdentity(g.axis));return this.domain.Pd({Yn:g.ze})});a=Hr(Ut,f.Yn,this.c7d);this.Yn=new $pb(a.mutable,this.A4,this.zSa);this.puc=a.ow;this.Y6d=Gr(this,g=>{ma(Fs.isIdentity(g.axis));return this.domain.Pd({Am:g.zj})});a=Hr(Tt,f.Am,this.Y6d);this.Am=new Zpb(a.mutable,this.q1,this.ySa);this.kuc=a.ow;this.Z6d=Gr(this,g=>{ma(Fs.isIdentity(g.axis));return this.domain.Pd({Sn:g.ze})});a=Hr(Ut,f.Sn,this.Z6d);
this.Sn=new $pb(a.mutable,this.q1,this.ySa);this.luc=a.ow;this.X6d=Gr(this,g=>{ma(Fs.isIdentity(g.x));ma(Fs.isIdentity(g.y));return this.domain.Pd({cells:g})});a=Hr(this.Tqb,f.cells,this.X6d);this.cells=new aqb(a.mutable,this.A4,this.q1,this.zSa,this.ySa);this.VLb=a.ow;this.V6d=Gr(this,g=>{ma(Fs.isIdentity(g.x));ma(Fs.isIdentity(g.y));return this.domain.Pd({attrs:g})});f=Hr(this.kpb,f.attrs,this.V6d);this.attrs=new bqb(f.mutable,this.A4,this.q1);this.ULb=f.ow}};
aqb=class{get(a,b){a=this.A4(a);b=this.q1(b);if(null!=a&&null!=b&&(b=this.grid.get(a,b),null!=b))return{span:{Ig:m(vlb(this,b.span)),wg:m(wlb(this,b.span)),wk:m(xlb(this,b.span)),Ej:m(ylb(this,b.span))},ref:b.ref}}forEach(a){this.grid.forEach((b,c)=>{const d=vlb(this,c),e=wlb(this,c);null!=d&&null!=e&&a(b,{Ig:d,wg:e,wk:m(xlb(this,c)),Ej:m(ylb(this,c))})})}map(a){const b=[];this.forEach((c,d)=>b.push(a(c,d)));return b}set(a,b){this.grid.set(zlb(this,a),b);return m(this.get(a.Ig,a.wg))}delete(a){this.grid.delete(zlb(this,
a))}constructor(a,b,c,d,e){this.grid=a;this.A4=b;this.q1=c;this.zSa=d;this.ySa=e}};bqb=class{get(a,b,c){b=this.A4(b);c=this.q1(c);if(null!=b&&null!=c)return this.grid.get(a,b,c)}set(a,b,c){const d=this.A4(b.Ig),e=this.q1(b.wg),f=this.A4(b.wk||b.Ig);b=this.q1(b.Ej||b.wg);null!=d&&null!=e&&null!=f&&null!=b&&this.grid.set(a,{jJe:d,XIe:e,ivb:f,o2d:b},c)}constructor(a,b,c){this.grid=a;this.A4=b;this.q1=c}};
Zpb=class{get(a){a=this.zj.get(a);if(null!=a)for(;0<=a;a--){const b=this.Ryb(a);if(b)return b}}create(a,b){b=m(this.WAb(b));this.zj.create(a,b)}delete(a){this.zj.delete(a)}constructor(a,b,c){this.zj=a;this.WAb=b;this.Ryb=c}};
$pb=class{get(a){a=this.ze.get(a);if(null!=a){var b;a:{for(b=a.start;b<=a.end;b++){var c=this.Ryb(b);if(c){b=c;break a}}b=void 0}a:{for(c=a.end;c>=a.start;c--){const d=this.Ryb(c);if(d){a=d;break a}}a=void 0}if(null!=b&&null!=a)return{start:b,end:a}}}create(a,b){const c=m(this.WAb(b.start));b=m(this.WAb(b.end));this.ze.create(a,{start:c,end:b})}delete(a){this.ze.delete(a)}constructor(a,b,c){this.ze=a;this.WAb=b;this.Ryb=c}};
__c.gqb=class extends et{gy(a){return new cqb(this.rows,this.cols,this.cells,this.attrs,this.domain,a)}sm(a){return a}connect(a,b){return this.sm(a).connect(b)}Vb(a){return this.sm(a).Vb()}destroy(a,b){this.sm(a).destroy(b)}di(a,b){return this.sm(a).di(b)}constructor(a){var b=dqb,c=eqb,d=__c.fqb;super(dt,dt);this.rows=b;this.cols=c;this.cells=a;this.attrs=d;this.domain=new Tpb(b.domain,c.domain,a.domain,d.domain)}};__c.gqb.prototype.vA=fa(122);var hqb=Mr({Nf:Lr(jt)}),iqb=Mr({type:Kr(1,2),id:it,UWa:Or(/^([A-Z]+|[1-9]\d*)$/),C_:Vr(it),df:Vr(it)}),jqb,kqb,lqb,mqb,nqb,oqb,pqb,sqb,tqb,uqb,vqb,wqb,xqb,zqb,Bqb,Cqb,Dqb,Eqb,Fqb,Gqb,Hqb,Iqb,Jqb,Kqb,Lqb,Mqb,Nqb,Oqb,Pqb,Qqb,Rqb,Sqb,Tqb,Uqb,Wqb,Xqb,Yqb,$qb,arb,brb,drb,erb,dqb,eqb,frb,grb,hrb,irb,jrb,krb,lrb,mrb,rrb,srb,trb,urb,vrb,wrb;Lr(iqb);jqb=Mr({type:Kr("canonical"),ZAa:it});kqb=Mr({type:Kr("invalid"),VGb:it});lqb=$r(Mr({type:Kr("formula"),value:__c.Nr({canonical:jqb,invalid:kqb},a=>a.type)}));
mqb=$r(Mr({type:Kr("boolean"),value:ht}));nqb=Math.pow(2,-1022);oqb=$r(Mr({type:Kr("number"),value:Jr(a=>Number.isFinite(a)&&(Math.abs(a)>=nqb||Object.is(a,0)))}));pqb=$r(Mr({type:Kr("plaintext"),value:it}));__c.qqb=as({attributes:{Y6:Yr(yob)},Pb:{fill:__c.Kt}});__c.rqb=cs(__c.qqb);sqb=as({values:{type:Kr("media")},Pb:{value:__c.rqb}});tqb=cs($r(Kob));uqb=as({values:{type:Kr("mention")},Pb:{value:tqb}});vqb=Mr({embed:Lob});wqb=cs($r(vqb));xqb=as({values:{type:Kr("embed")},Pb:{value:wqb}});
__c.yqb=new __c.Ft;zqb=as({values:{type:Kr("text2")},attributes:{Yf:Wr(hqb)},Pb:{value:__c.yqb}});__c.Aqb=new __c.Ft;Bqb=as({values:{type:Kr("text3")},Pb:{value:__c.Aqb}});Cqb={formula:lqb,boolean:mqb,number:oqb,plaintext:pqb,media:sqb,mention:uqb,embed:xqb};Dqb=qs(Cqb,a=>a.type,a=>a.type);Eqb=qs({...Cqb,text2:zqb},a=>a.type,a=>a.type);Fqb=qs({...Cqb,text3:Bqb},a=>a.type,a=>a.type);Gqb=qs({...Cqb,text2:zqb},a=>a.type,a=>a.type);Hqb=Mr({type:Kr("plain"),format:it});Iqb=Mr({type:Kr("currency"),format:it});
Jqb=Mr({type:Kr("percentage"),format:it});Kqb=Mr({type:Kr("date"),format:it});Lqb=__c.Nr({plain:Hqb,currency:Iqb,percentage:Jqb,date:Kqb},a=>a.type);Mqb=$r(Mr({type:Kr("plain_number"),bl:Hqb}));Nqb=$r(Mr({type:Kr("currency"),bl:Iqb}));Oqb=$r(Mr({type:Kr("percentage"),bl:Jqb}));Pqb=$r(Mr({type:Kr("date"),bl:Kqb}));Qqb=as({attributes:{label:pt},Pb:{fill:__c.Kt}});Rqb=cs(Qqb);Sqb=as({values:{type:Kr("select")},attributes:{bl:Yr(Lqb)},Pb:{options:Rqb}});Tqb=$r(Mr({type:Kr("mention")}));Uqb=$r(Mr({type:Kr("embed")}));
__c.Vqb=qs({plain_number:Mqb,currency:Nqb,percentage:Oqb,date:Pqb,select:Sqb,mention:Tqb,embed:Uqb},a=>a.type,a=>a.type);Wqb=a=>as({attributes:{Fl:__c.tt},Pb:{content:Xr(Vr(a)),Yc:Xr(Vr(__c.Vqb))}});Xqb=Wqb(Dqb);
Yqb={static:{fontFamily:Mt.fontFamily,fontSize:Mt.fontSize,fontWeight:Mt.fontWeight,fontStyle:Mt.fontStyle,kV:Mt.kV,verticalAlign:Mt.verticalAlign,color:Mt.color,Cn:Mt.Cn,Xz:Mt.Xz,link:Mt.link,letterSpacing:Mt.letterSpacing,lineHeight:Mt.lineHeight,direction:Mt.direction,VM:Mt.VM,rP:Mt.rP},NPa:{},Ht:{}};__c.Zqb=__c.Akb(Yqb);
$qb={ENa:ys("block",rs(Onb,Ht),"inherit"),DNa:ys("block",rs(Onb,Ht),"inherit"),GNa:ys("block",rs(Onb,Ht),"inherit"),FNa:ys("block",rs(Onb,Ht),"inherit"),ANa:ys("block",rs(Gt,Ht),"inherit"),zNa:ys("block",rs(Gt,Ht),"inherit"),CNa:ys("block",rs(Gt,Ht),"inherit"),BNa:ys("block",rs(Gt,Ht),"inherit"),Tpb:ys("block",rs(Qnb,Ht),"inherit"),Spb:ys("block",rs(Qnb,Ht),"inherit"),Vpb:ys("block",rs(Qnb,Ht),"inherit"),Upb:ys("block",rs(Qnb,Ht),"inherit")};arb=["auto",...Zob];
brb={static:{...Yqb.static,Vba:ys("block",rs(Gt,/^transparent$/),"#ffffff"),...$qb,textAlign:zs("block",arb),LB:zs("block",["overflow","wrap","clip"]),vl:zs("block",["middle","start","end"])},NPa:{},Ht:{}};__c.Ot=__c.Akb(brb);__c.fqb=new rpb;__c.crb=__c.fqb.domain.zM();drb=as({values:{id:it},attributes:{height:vmb,minHeight:__c.st}});erb=as({values:{id:it},attributes:{width:vmb}});cs(drb);cs(erb);dqb=new __c.Fjb(drb,Qib(drb.$oa));eqb=new __c.Fjb(erb,Qib(erb.$oa));frb=as({values:{dIb:it,YOd:it,XYd:ht}});
grb=__c.Zr(frb);hrb=Wqb(Eqb);irb=Wqb(Fqb);jrb=Wqb(Gqb);krb=new Ipb(hrb);lrb=new Ipb(irb);mrb=new Ipb(jrb);__c.nrb=(new Ipb(Xqb)).domain.zM();__c.orb=new __c.gqb(krb);__c.prb=new __c.gqb(lrb);__c.qrb=new __c.gqb(mrb);rrb=as({attributes:{Cra:ut,FXa:ut}});srb=as({Pb:{freeze:rrb}});trb=a=>as({Pb:{mA:a,tA:grb,Yt:__c.Lt,view:srb},attributes:{direction:Wr(Kr("ltr","rtl")),IK:qt}});urb=trb(__c.orb);vrb=trb(__c.prb);wrb=trb(__c.qrb);__c.xrb=urb.map(a=>a,a=>a,a=>a,a=>a,a=>new Vt(a),a=>a.base);
__c.yrb=vrb.map(a=>a,a=>a,a=>a,a=>a,a=>new Vt(a),a=>a.base);__c.zrb=wrb.map(a=>a,a=>a,a=>a,a=>a,a=>new Vt(a),a=>a.base);
Vt=__c.Vt=class{static F(a){N(a,{width:at,wYb:at,qoc:at})}get width(){return this.base.mA.cols.reduce((a,b)=>a+b.width,0)}set width(a){pa(0<a);a/=this.width;for(const b of this.base.mA.cols)b.width*=a}get height(){return this.base.mA.rows.reduce((a,b)=>a+b.height,0)}set height(a){pa(0<a);a/=this.height;for(const b of this.base.mA.rows)b.height*=a,b.minHeight=b.height}get cols(){return this.base.mA.cols}get wYb(){const a=new Map;for(const b of this.cols)a.set(b.id,b);return a}get rows(){return this.base.mA.rows}get qoc(){const a=
new Map;for(const b of this.rows)a.set(b.id,b);return a}get tA(){return this.base.tA}get direction(){return this.base.direction}set direction(a){this.base.direction=a}get Yt(){return this.base.Yt}get IK(){return this.base.IK}set IK(a){this.base.IK=a}get view(){return this.base.view}constructor(a){Vt.F(this);this.base=a;this.layout=this.base.mA;this.ioa=Glb(b=>this.rows.has(b)?(b=this.rows.un(b))?this.ioa(b)+1:0:-1);this.Tia=Glb(b=>this.cols.has(b)?(b=this.cols.un(b))?this.Tia(b)+1:0:-1);this.fc=Glb(b=>
(b=this.cols.un(b))?this.fc(b)+b.width:0);this.rc=Glb(b=>(b=this.rows.un(b))?this.rc(b)+b.height:0)}};Vt.prototype.qOa=fa(145);Vt.prototype.DXa=fa(144);
}).call(self, self._5880d4398c473aa67256e87589eaef11);}

}])
//# sourceMappingURL=sourcemaps/019963ecaecc7a1e.js.map