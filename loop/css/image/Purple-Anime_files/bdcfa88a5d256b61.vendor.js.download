(self.webpackChunk_canva_web=self.webpackChunk_canva_web||[]).push([[67469],{501515:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});class r extends Error{}class i extends r{}class s extends r{}class n extends r{}class a extends r{}class o extends r{}class h extends r{}class u extends r{constructor(e){super(`unhandled case: ${JSON.stringify(e)}`)}}let l=0;function c(){return l++}function f(e){return null!=e}function E(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Float32Array}function d(e){switch(e){case"i8":return 5120;case"u8":return 5121;case"i16":return 5122;case"u16":return 5123;case"i32":return 5124;case"u32":return 5125;case"f32":return 5126;default:throw new u(e)}}const T={FLOAT:{type:"float",name:"float",length:1},VEC2:{type:"float",name:"vec2",length:2},VEC3:{type:"float",name:"vec3",length:3},VEC4:{type:"float",name:"vec4",length:4}},A={MAT2:{type:"matrix",name:"mat2",length:4},MAT3:{type:"matrix",name:"mat3",length:9},MAT4:{type:"matrix",name:"mat4",length:16}},_={INT:{type:"int",name:"int",length:1},IVEC2:{type:"int",name:"ivec2",length:2},IVEC3:{type:"int",name:"ivec3",length:3},IVEC4:{type:"int",name:"ivec4",length:4},SAMPLER2D:{type:"int",name:"sampler2D",length:1}},R=new Map([[5126,T.FLOAT],[35664,T.VEC2],[35665,T.VEC3],[35666,T.VEC4],[35674,A.MAT2],[35675,A.MAT3],[35676,A.MAT4],[5124,_.INT],[35667,_.IVEC2],[35668,_.IVEC3],[35669,_.IVEC4],[35678,_.SAMPLER2D]]);class m{constructor(e){var t;this.id=c(),this.source=e,e instanceof ArrayBuffer?this.dataType="f32":(t=e,"undefined"!=typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer?this.dataType="f32":this.dataType=function(e){if(e instanceof Float32Array)return"f32";if(e instanceof Uint8Array)return"u8";if(e instanceof Int32Array)return"i32";if(e instanceof Uint32Array)return"u32";if(e instanceof Uint8ClampedArray)return"u8";if(e instanceof Int8Array)return"i8";if(e instanceof Int16Array)return"i16";if(e instanceof Uint16Array)return"u16";throw new u(e)}(e)),this.length=e.byteLength/function(e){switch(e){case"i8":case"u8":return 1;case"i16":case"u16":return 2;case"i32":case"u32":case"f32":return 4;default:throw new u(e)}}(this.dataType)}}class g extends m{constructor(){super(...arguments),this.resourceType="buffer"}}class p extends m{constructor(){super(...arguments),this.resourceType="elements"}}const b={points:0,lines:1,"line loop":2,"line strip":3,triangles:4,"triangle strip":5,"triangle fan":6},S={zero:0,one:1,"src color":768,"one minus src color":769,"dst color":774,"one minus dst color":775,"src alpha":770,"one minus src alpha":771,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},v={front:1028,back:1029,"front and back":1032},I={cw:2304,ccw:2305},C={add:32774,subtract:32778,"reverse subtract":32779},F={source:"one",destination:"zero",equation:"add"};const N={never:512,less:513,equal:514,lequal:515,greater:516,notequal:517,gequal:518,always:519};class x{constructor({primitive:e="triangles",shader:t,attributes:r,indices:i,count:s=0,instances:n,uniforms:a={},textures:o={},blend:h,depthTest:u,cullFace:l,frontFace:c,renderTarget:f}){var d;this.primitive=b[e],this.shader=t,this.attributes=function(e){const t=Object.create(null);for(const[r,i]of Object.entries(e)){let e;e="buffer"in i&&!E(i)?{...i,buffer:L(i.buffer)}:{buffer:L(i)},t[r]=e}return t}(r),this.indices=i?(d=i,Array.isArray(d)&&(d=new Uint16Array(d)),E(d)&&(d=new p(d)),d):void 0,this.count=s,this.instances=n,this.uniforms=a,this.textures=o,this._cullFace=l?v[l]:void 0,this._frontFace=c?I[c]:2305,this.blend=h?function(e){var t,r;const i={...F,...null!=(t=e.rgb)?t:e},s={...F,...null!=(r=e.alpha)?r:e};return{rgb:{source:S[i.source],destination:S[i.destination],equation:C[i.equation]},alpha:{source:S[s.source],destination:S[s.destination],equation:C[s.equation]}}}(h):void 0,this.depthTest=u?function(e){var t,r;return{mask:null==(t=e.mask)||t,func:N[null!=(r=e.func)?r:"less"],range:{near:0,far:1,...e.range}}}(u):void 0,this.renderTarget=f}get cullFace(){return this._cullFace}set cullFace(e){this._cullFace=void 0!==e?v[e]:void 0}get frontFace(){return this._frontFace}set frontFace(e){e in I&&(this._frontFace=I[e])}get resources(){return[this.shader,...Object.values(this.attributes).map((e=>e.buffer)),...Object.values(this.textures),this.indices,this.renderTarget].filter(f)}}function L(e){return Array.isArray(e)&&(e=new Float32Array(e)),E(e)&&(e=new g(e)),e}class w{constructor(e){this.id=c(),this.resourceType="shader",this.vertexSource=e.vertexSource,this.fragmentSource=e.fragmentSource}}const U="preserve",B="fixed";class M{constructor(e){this.id=c(),this.resourceType="texture",this.textureType="render",this.source=null,this.name=e.name,this.alpha=e.alpha||U,this.size=e.size||B,this.width=e.width||("fixed"===this.size?0:1),this.height=e.height||("fixed"===this.size?0:1),this.colorFormat=e.colorFormat,this.numberFormat=e.numberFormat}}function P(e,t){return{width:"fixed"===e.size?e.width||t.width:(e.width||1)*t.width,height:"fixed"===e.size?e.height||t.height:(e.height||1)*t.height}}function O(e,t){if("u32"===t.dataType&&!e.getExtension("OES_element_index_uint"))throw new a("UNSIGNED_INT indices are not supported on this device.");const r=e.createBuffer(),i="buffer"===t.resourceType?e.ARRAY_BUFFER:e.ELEMENT_ARRAY_BUFFER;return e.bindBuffer(i,r),e.bufferData(i,t.source,e.STATIC_DRAW),e.bindBuffer(i,null),r}class y{constructor(e,t,r){this.name=e.name,this.length=e.size,this.location=t;const i=R.get(e.type);if(!i)throw new o(`Type of uniform '${e.name}' is not supported.`);this.meta=i,this._data=this.parseData(r)}parseData(e){if(!e)return new Array(this.meta.length).fill(0);const t=this.meta.length*this.length;if(e.flat().length!==t)throw new o(`Could not set uniform '${this.meta.type} ${this.name}'. Expected data with a length of ${t} but your data has a length of ${e.length}.`);return e}equals(e){const t=this._data,r=e;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==r[i])return!1;return!0}get data(){return this._data}set data(e){this._data=this.parseData(e)}}function D(e,t){const{meta:r,name:i,location:s,data:n}=t,a=n.flat();if("int"===r.type)switch(r.length){case 1:e.uniform1iv(s,a);break;case 2:e.uniform2iv(s,a);break;case 3:e.uniform3iv(s,a);break;case 4:e.uniform4iv(s,a);break;default:throw new o(`Could not set the value for uniform '${i}'. Make sure its length is between 1 and 4 (inclusive).`)}else if("float"===r.type)switch(r.length){case 1:e.uniform1fv(s,a);break;case 2:e.uniform2fv(s,a);break;case 3:e.uniform3fv(s,a);break;case 4:e.uniform4fv(s,a);break;default:throw new o(`Could not set the value for uniform '${i}'. Make sure its length is between 1 and 4 (inclusive).`)}else switch(r.length){case 4:e.uniformMatrix2fv(s,!1,a);break;case 9:e.uniformMatrix3fv(s,!1,a);break;case 16:e.uniformMatrix4fv(s,!1,a);break;default:throw new o(`Could not set the value for uniform '${i}'. Make sure its length is between 2 and 4 (inclusive).`)}}function X(e,t,r){(function(e){const t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);return!!t&&t.precision>10})(e)&&(r=function(e){return e.replace("precision mediump float;","precision highp float;")}(r));const n=e.createShader(t);if(!n)throw new s("Could not create shader");if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))return n;{const r=e.getShaderInfoLog(n);e.deleteShader(n);const s=t===e.VERTEX_SHADER?"vertex":"fragment";throw new i(`Could not compile ${s} shader. Details: ${r}`)}}function G(e,t){const r=function(e,t,r){const n=e.createProgram();if(!n)throw new s("Could not create program");const a=X(e,e.VERTEX_SHADER,t),o=X(e,e.FRAGMENT_SHADER,r);if(e.attachShader(n,a),e.attachShader(n,o),e.linkProgram(n),e.deleteShader(a),e.deleteShader(o),e.getProgramParameter(n,e.LINK_STATUS))return n;throw new i(`Could not link program. Details: ${e.getProgramInfoLog(n)}`)}(e,t.vertexSource,t.fragmentSource);e.useProgram(r);const n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),a=new Map;for(let i=0;i<n;i++){const t=e.getActiveAttrib(r,i),s=t?e.getAttribLocation(r,t.name):-1;if(!t||-1===s)throw new h(`Could not cache attribute. Could not find attribute or location at index ${i}. This is likely a bug with the renderer.`);const n=R.get(t.type);if(!n)throw new o(`Type of attribute '${t.name}' is not supported.`);e.enableVertexAttribArray(s),a.set(t.name,{location:s,meta:n})}const u=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),l=new Map,c=new Map;let f=0;for(let i=0;i<u;i++){const t=e.getActiveUniform(r,i),s=t?e.getUniformLocation(r,t.name):null;if(!t||!s)throw new h(`Could not cache uniform. Could not find uniform or location at index ${i}. This is likely a bug with the renderer.`);const n=t.name.endsWith("[0]")?t.name.slice(0,-3):t.name;if(t.type===e.SAMPLER_2D||t.type===e.SAMPLER_CUBE){const r=new y(t,s,[f]);l.set(n,r),D(e,r),f++}else{const r=new y(t,s);c.set(n,r),D(e,r)}}return e.useProgram(null),{program:r,attributes:a,textures:l,uniforms:c}}function H(e,t){return P(t,{width:e.drawingBufferWidth,height:e.drawingBufferHeight})}function V(e,t,r){var i;if("undefined"!=typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext&&"f32"===t.numberFormat&&!e.getExtension("OES_texture_float"))throw new a("No support for floating point textures");const n=e.TEXTURE_2D,o=null!=(i=null==r?void 0:r.texture)?i:e.createTexture();if(!o)throw new s(`Could not create WebGLTexture for texture with ID: '${t.id}'.`);e.bindTexture(n,o),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,"premultiply"===t.alpha);const h="rgb"===t.colorFormat?e.RGB:e.RGBA,u="f32"===t.numberFormat?e.FLOAT:e.UNSIGNED_BYTE,l=function(e,t){if("image"===t.textureType){const e=t.source;if("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap)return e;if(e instanceof HTMLImageElement)return`${e.src}:${e.currentSrc}:${k(t)}`;if(e instanceof HTMLVideoElement)return`${e.src}:${e.currentSrc}:${e.currentTime}:${k(t)}`}else if("render"===t.textureType){const{width:r,height:i}=H(e,t);return`${r}:${i}`}}(e,t),c=k(t),f=!r||!l||l!==r.hash;if(c&&f)if("image"!==t.textureType){const r=t.source,i=function(e,t,r){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext?"rgb"===t?"f32"===r?e.RGB32F:e.RGB:"f32"===r?e.RGBA32F:e.RGBA:"rgb"===t?e.RGB:e.RGBA}(e,t.colorFormat,t.numberFormat),{width:s,height:a}=H(e,t);e.texImage2D(n,0,i,s,a,0,h,u,r)}else{const r=t.source;(function(e){return"tagName"in e&&"IMG"===e.tagName})(r)&&function(e){const t=document.createElement("a");return t.href=e,!("data:"===t.protocol||"blob:"===t.protocol)}(r.src)&&!r.crossOrigin&&console.warn(`Fragl warning: ${r.src} image may come from a different origin but you did not set the crossOrigin attribute.`),e.texImage2D(n,0,h,h,u,r)}const E="f32"===t.numberFormat?e.NEAREST:e.LINEAR;return e.texParameteri(n,e.TEXTURE_MIN_FILTER,E),e.texParameteri(n,e.TEXTURE_MAG_FILTER,E),e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(n,null),{texture:o,hash:l}}function k(e){if("image"===e.textureType){const t=e.source;if(t instanceof HTMLImageElement)return t.complete;if(t instanceof HTMLVideoElement)return t.readyState>=2}return!0}class W{constructor(e){this.gl=e,this.maxAttribs=Number(e.getParameter(e.MAX_VERTEX_ATTRIBS)),this.shouldEnable=Array.from({length:this.maxAttribs}).fill(!1),this.hasEnabled=Array.from({length:this.maxAttribs}).fill(!1)}setEnabled(e,t){if(e<0)throw new Error(`Attribute index ${e} is out of bounds`);if(e>=this.maxAttribs)throw new Error(`Attribute index ${e} exceeds the maximum number of attributes supported by this device: ${this.maxAttribs}`);this.shouldEnable[e]=t}update(){for(let e=0;e<this.maxAttribs;e++)this.shouldEnable[e]!==this.hasEnabled[e]&&(this.hasEnabled[e]=this.shouldEnable[e],this.shouldEnable[e]?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))}reset(){for(let e=0;e<this.maxAttribs;e++)this.shouldEnable[e]=!1}}class Y{constructor(e,t){this.gl=e,this.bufferCache=new Map,this.shaderCache=new Map,this.textureCache=new Map,this.handleContextLost=e=>{if(this.onContextLost){let t="No WebGLContextEvent";e&&(t=(null==e?void 0:e.statusMessage)||"No statusMessage"),this.onContextLost(new n(`Error: WebGL context lost - ${t}`))}},this.env=(null==t?void 0:t.env)||window||{devicePixelRatio:1};const r=e.canvas;if(!r)throw new n("Unexpected canvas type: "+typeof r);this.onDispose=null==t?void 0:t.onDispose,this.canvas=r;const[i,s]=this.canvasSize;this.canvas.width=((null==t?void 0:t.width)||i)*this.env.devicePixelRatio,this.canvas.height=((null==t?void 0:t.height)||s)*this.env.devicePixelRatio,this.canvas.addEventListener("webglcontextlost",this.handleContextLost,{once:!0}),this.fbo=e.createFramebuffer(),this.vertexAttribArrayState=new W(e)}flush(){this.gl.flush()}resize(...e){let t,r;"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?[t=this.canvas.clientWidth,r=this.canvas.clientHeight]=e:[t,r]=e,this.canvas.width=t*this.env.devicePixelRatio,this.canvas.height=r*this.env.devicePixelRatio}load(e){const t=this.gl,r=Array.isArray(e)?e:e.resources;for(const i of r)switch(i.resourceType){case"buffer":case"elements":this.bufferCache.has(i.id)||this.bufferCache.set(i.id,O(t,i));break;case"shader":this.shaderCache.has(i.id)||this.shaderCache.set(i.id,G(t,i));break;case"texture":this.textureCache.has(i.id)||this.textureCache.set(i.id,V(t,i));break;default:throw new u(i)}}update(e){const t=this.gl,r=Array.isArray(e)?e:e.resources;for(const i of r)if("texture"===i.resourceType){const e=this.textureCache.get(i.id);if(!e)throw new n(`Could not update texture with ID: '${i.id}'. Did you remember to use load()?`);this.textureCache.set(i.id,V(t,i,e))}}clear(e,t){var r;const i=this.gl;if(t){const e=null==(r=this.textureCache.get(t.id))?void 0:r.texture;if(!e)throw new n(`Could not find render target with ID: ${t.id}. Did you remember to use load()?`);i.bindFramebuffer(i.FRAMEBUFFER,this.fbo),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0)}else i.bindFramebuffer(i.FRAMEBUFFER,null);const s=Array.isArray(e),a=s?e:e.color,o=s?1:e.depth,h=s?255:e.stencil,u=void 0!==a,l=void 0!==o,c=void 0!==h;u&&i.clearColor(...a),l&&i.clearDepth(o),c&&i.clearStencil(h);const f=(u?i.COLOR_BUFFER_BIT:0)|(l?i.DEPTH_BUFFER_BIT:0)|(c?i.STENCIL_BUFFER_BIT:0);i.clear(f)}render(e){var t,r,i,s,h,u,l;const c=this.gl,f=Array.isArray(e)?e:e.renderables;for(const E of f){const e=this.shaderCache.get(E.shader.id);if(!e)throw new n(`Could not find shader with ID: ${E.shader.id}. Did you remember to use load()?`);if(E.blend){const{rgb:e,alpha:t}=E.blend;c.enable(c.BLEND),c.blendFuncSeparate(e.source,e.destination,t.source,t.destination),c.blendEquationSeparate(e.equation,t.equation)}else c.disable(c.BLEND);if(E.depthTest){const{depthTest:e}=E;c.enable(c.DEPTH_TEST),c.depthMask(e.mask),c.depthFunc(e.func),c.depthRange(e.range.near,e.range.far)}else c.disable(c.DEPTH_TEST);if(E.cullFace?(c.enable(c.CULL_FACE),c.frontFace(E.frontFace),c.cullFace(E.cullFace)):c.disable(c.CULL_FACE),c.useProgram(e.program),E.indices){const e=this.getBuffer(E.indices);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,e)}else c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);const f=E.instances?c.getExtension("ANGLE_instanced_arrays"):null;if(E.instances&&!f)throw new a("Instancing is required but not supported on this device");this.vertexAttribArrayState.reset();for(const[a,{location:o,meta:h}]of e.attributes.entries()){this.vertexAttribArrayState.setEnabled(o,!0);const e=E.attributes[a];if(!e)throw new n(`Could not locate shader attribute ${a} within Renderable's attributes.`);const u=d(null!=(t=e.type)?t:e.buffer.dataType),l=this.getBuffer(e.buffer);c.bindBuffer(c.ARRAY_BUFFER,l),c.vertexAttribPointer(o,h.length,u,null!=(r=e.normalized)&&r,null!=(i=e.stride)?i:0,null!=(s=e.offset)?s:0),E.instances&&e.divisor&&f.vertexAttribDivisorANGLE(o,e.divisor)}this.vertexAttribArrayState.update();const T={...E.uniforms,...this.commonUniforms};for(const[t,r]of e.uniforms.entries()){const e=T[t];if(!e)throw new o(`Could not find a value for uniform '${t}'. Make sure you provide a value.`);r.equals(e)||(r.data=e,D(c,r))}for(const[t,r]of e.textures.entries()){c.activeTexture(c.TEXTURE0+r.data.flat()[0]),c.bindTexture(c.TEXTURE_2D,null);const e=E.textures[t];if(!e)throw new o(`Could not find a texture associated with uniform '${t}'. Make sure you provide a value.`);const i=null==(h=this.textureCache.get(e.id))?void 0:h.texture;if(!i)throw new n(`Could not find texture with ID: ${e.id}. Did you remember to use load()?`);c.bindTexture(c.TEXTURE_2D,i)}if(E.renderTarget){const e=null==(u=this.textureCache.get(E.renderTarget.id))?void 0:u.texture;if(!e)throw new n(`Could not find render target with ID: ${E.renderTarget.id}. Did you remember to use load()?`);const{width:t,height:r}=H(c,E.renderTarget);c.bindFramebuffer(c.FRAMEBUFFER,this.fbo),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,e,0),c.viewport(0,0,t,r)}else c.bindFramebuffer(c.FRAMEBUFFER,null),c.viewport(0,0,c.drawingBufferWidth,c.drawingBufferHeight);E.instances?E.indices?f.drawElementsInstancedANGLE(E.primitive,E.indices.length,d(E.indices.dataType),0,E.instances):f.drawArraysInstancedANGLE(E.primitive,0,E.count,E.instances):E.indices?c.drawElements(E.primitive,E.indices.length,d(E.indices.dataType),0):c.drawArrays(E.primitive,0,null!=(l=E.count)?l:0)}}release(e){const t=Array.isArray(e)?e:e.resources;for(const r of t)this.deleteResource(r.id,r.resourceType)}readPixels(e){var t;const r=this.gl;let i;if(e){const s=null==(t=this.textureCache.get(e.id))?void 0:t.texture;if(!s)throw new n(`Could not find render target with ID: ${e.id}. Did you remember to use load()?`);i=H(r,e),r.bindFramebuffer(r.FRAMEBUFFER,this.fbo),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,s,0)}else r.bindFramebuffer(r.FRAMEBUFFER,null),i={width:r.drawingBufferWidth,height:r.drawingBufferHeight};const s=new Uint8Array(i.width*i.height*4);return r.readPixels(0,0,i.width,i.height,r.RGBA,r.UNSIGNED_BYTE,s),new ImageData(new Uint8ClampedArray(s.buffer),i.width,i.height)}dispose(){var e;const t=this.gl;for(const i of this.bufferCache.keys())this.deleteResource(i,"buffer");for(const i of this.shaderCache.keys())this.deleteResource(i,"shader");for(const i of this.textureCache.keys())this.deleteResource(i,"texture");this.bufferCache.clear(),this.shaderCache.clear(),this.textureCache.clear(),t.deleteFramebuffer(this.fbo),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null);const r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(let i=0;i<r;i++)t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,null),t.bindTexture(t.TEXTURE_CUBE_MAP,null);this.canvas.width=this.canvas.height=0,this.canvas.removeEventListener("webglcontextlost",this.handleContextLost),null==(e=this.onDispose)||e.call(this)}deleteResource(e,t){var r;const i=this.gl;switch(t){case"buffer":case"elements":const s=this.bufferCache.get(e)||null;i.deleteBuffer(s),this.bufferCache.delete(e);break;case"shader":const n=this.shaderCache.get(e);i.deleteProgram((null==n?void 0:n.program)||null),this.shaderCache.delete(e);break;case"texture":const a=null==(r=this.textureCache.get(e))?void 0:r.texture;i.deleteTexture(a||null),this.textureCache.delete(e);break;default:throw new u(t)}}getBuffer(e){const t=this.bufferCache.get(e.id);if(!t)throw new n(`Could not find buffer with ID: ${e.id}. Did you remember to use load()?`);return t}get commonUniforms(){return{uResolution:[this.gl.drawingBufferWidth,this.gl.drawingBufferHeight],uViewSize:this.canvasSize,uDevicePixelRatio:[this.env.devicePixelRatio]}}get canvasSize(){return"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?[this.canvas.clientWidth,this.canvas.clientHeight]:[this.canvas.width,this.canvas.height]}}const $="uPrevResult",q={attributes:{aPosition:new g(new Float32Array([-1,-1,3,-1,-1,3]))},count:3},z={attributes:{aPosition:new g(new Float32Array([-1,-1,1,1,-1,1,1,1,-1,-1,1,-1]))},count:6};function K(e){return e.replace(/void\s+main\(\s*\)\s*{([\s\S]*?)}\s*$/,((e,t)=>`void main() {${t}gl_FragColor.rgb *= gl_FragColor.a;\n}`))}function j(e){return function(e){return Array.isArray(e)}(e)?e:[e]}function Z(e,t,r,i){return new M({name:e,width:t,height:r,size:i||"relative",colorFormat:"rgba",numberFormat:"u8"})}class Q{constructor(e){this.index=0,this.buffers=null!=e?e:[new M({colorFormat:"rgba",numberFormat:"u8"}),new M({colorFormat:"rgba",numberFormat:"u8"})]}currentBuffer(){return this.buffers[this.index]}nextBuffer(){return this.index=(this.index+1)%this.buffers.length,this.buffers[this.index]}}const J=class e{static createPingpongBuffers({width:e,height:t,size:r}={}){return new Q([Z("A",e,t,r),Z("B",e,t,r)])}constructor({passes:t,uniforms:r,textures:i,options:{buffers:s,renderTarget:n,enableOneTriangleOptimisation:a}={}}){this.enableOneTriangleOptimisation=null!=a?a:e.enableOneTriangleOptimisation,s=null!=s?s:e.createPingpongBuffers(n);const{passes:o,uniforms:h}=this.convertShorthands(t,r);this.uniforms=h;const u=o[o.length-1];this.finalPassShaderForCanvas=this.getShader(u,!0),this.finalPassShaderForRenderTexture=this.getShader(u,!1);const l=this.getRenderTextures(o,n);this.renderables=this.getRenderables(o,l,s,i,n)}convertShorthands(e,t){return{passes:e.map((e=>"string"==typeof e?{fragment:e}:e)),uniforms:Object.fromEntries(Object.entries(null!=t?t:{}).map((([e,t])=>[e,j(t)])))}}getRenderTextures(e,t){const r=new Set;for(const s of e){if(s.inputs)for(const e of s.inputs)e!==$?r.add(e):console.warn(`Your render pass should not define ${$}. This will be automatically added.`);s.output&&r.add(s.output)}const i=new Map;for(const s of r)i.set(s,Z(s,null==t?void 0:t.width,null==t?void 0:t.height,null==t?void 0:t.size));return i}getRenderables(e,t,r,i,s){const n=e.slice(0,-1).map((e=>{const s=this.getShader(e,!1),n=r.currentBuffer(),a=e.output?this.getRenderTexture(e.output,t):r.nextBuffer();return this.getRenderable(e,s,n,a,t,i)})),a=s?this.finalPassShaderForRenderTexture:this.finalPassShaderForCanvas;return[...n,this.getRenderable(e[e.length-1],a,r.currentBuffer(),s,t,i)]}getRenderable(e,t,r,i,s,n){const a=this.uniforms,o=this.getTextures(e,{...n,[$]:r},s),h=this.enableOneTriangleOptimisation?q:z;return new x({...h,shader:t,uniforms:a,textures:o,renderTarget:i})}getShader(e,t){const r=`\nattribute vec2 aPosition;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    vTexCoord = aPosition * 0.5 + 0.5;\n    ${t?"vTexCoord.y = 1.0 - vTexCoord.y;":""}\n}\n  `,i=this.getFragmentSource(e.fragment,t);return new w({vertexSource:r,fragmentSource:i})}getFragmentSource(e,t){return t?K(e):e}getRenderTexture(e,t){const r=t.get(e);if(!r)throw new o(`Unable to assign texture. Could not find texture '${e}'.`);return r}getTextures(e,t,r){if(e.inputs)for(const i of e.inputs)t[i]=this.getRenderTexture(i,r);return t}update({textures:e,uniforms:t,renderTarget:r}){if(e)for(const[i,s]of Object.entries(e))if(s)for(const e of this.renderables)e.textures[i]=s;if(t)for(const[i,s]of Object.entries(t))this.uniforms[i]&&(this.uniforms[i]=j(s));if(void 0!==r){const e=this.renderables[this.renderables.length-1],t=null===r?this.finalPassShaderForCanvas:this.finalPassShaderForRenderTexture;e.renderTarget=null!=r?r:void 0,e.shader=t}}get resources(){return[...new Set([...this.renderables.flatMap((e=>e.resources)),this.finalPassShaderForCanvas,this.finalPassShaderForRenderTexture])]}};J.enableOneTriangleOptimisation=!1;let ee,te,re=J;function ie(e,t){if(!(ee&&te||(ee=document.createElement("canvas"),te=ee.getContext("2d"),te)))throw new r("Unable to establish `CanvasRenderingContext2D` for debugging");return ee.width=e,ee.height=t,{canvas:ee,context:te}}function se(e,t){const r=e.readPixels(t),{width:i,height:s}=r,{canvas:n,context:a}=ie(i,s);a.putImageData(r,0,0);const o=n.toDataURL();oe(null!=t?t:e.canvas,o,i/s)}function ne(e){const{width:t,height:r}=e,{canvas:i,context:s}=ie(t,r);e.source instanceof ImageData?s.putImageData(e.source,0,0):s.drawImage(e.source,0,0);oe(e,i.toDataURL(),t/r)}function ae(e){const{source:t,colorFormat:r,width:i,height:s}=e,{canvas:n,context:a}=ie(i,s),o="rgba"===r,h=a.createImageData(i,s),u=h.data;for(let l=0,c=0;l<t.length;l+=o?4:3,c+=4)u[c]=t[l],u[c+1]=t[l+1],u[c+2]=t[l+2],u[c+3]=o?t[l+3]:255;a.putImageData(h,0,0);oe(e,n.toDataURL(),i/s)}function oe(e,t,r){const i=`\n    font-size: 0;\n    padding-left: 256px;\n    padding-bottom: ${256/r}px;\n    vertical-align: top;\n    background-image: \n      url(${t}),\n      url('data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n    <rect width="10" height="10" fill="#ccc"/>\n    <rect x="10" y="10" width="10" height="10" fill="#ccc"/>\n    <rect x="10" y="0" width="10" height="10" fill="white"/>\n    <rect y="10" width="10" height="10" fill="white"/>\n  </svg>')}');\n    background-position: center, 0 0;\n    background-size: contain, 20px 20px;\n    background-repeat: no-repeat, repeat;\n  `;console.group("Debugging",e),console.log("%c ",i),console.groupEnd()}t.AdditiveBlending={source:"src alpha",destination:"one",equation:"add"},t.BinaryTexture=class{constructor(e){this.id=c(),this.resourceType="texture",this.textureType="binary",this.size=B,this.source=e.source,this.name=e.name,this.alpha=e.alpha||U,this.width=e.width,this.height=e.height}get colorFormat(){const e=this.source.length/(this.width*this.height);if(3===e)return"rgb";if(4===e)return"rgba";throw new o(`Invalid number of color channels for binary texture with ID: ${this.id}. Number of channels must be 3 (RGB) or 4 (RGBA) but the provided data has ${e} channels.`)}get numberFormat(){return this.source instanceof Uint8Array?"u8":"f32"}},t.Buffer=g,t.Effect=re,t.ElementsBuffer=p,t.FraglAllocationError=s,t.FraglCompilationError=i,t.FraglError=r,t.FraglInternalError=h,t.FraglPlatformError=a,t.FraglRuntimeError=n,t.FraglValidationError=o,t.ImageTexture=class{constructor(e){this.id=c(),this.resourceType="texture",this.textureType="image",this.size=B,this.colorFormat="rgba",this.numberFormat="u8",this.source=e.source,this.name=e.name,this.alpha=e.alpha||U}get width(){return this.source.width}get height(){return this.source.height}},t.MockWebGLRenderingContext=class{constructor(e){this.canvas=e,this.drawingBufferColorSpace="srgb",this.DEPTH_BUFFER_BIT=256,this.STENCIL_BUFFER_BIT=1024,this.COLOR_BUFFER_BIT=16384,this.POINTS=0,this.LINES=1,this.LINE_LOOP=2,this.LINE_STRIP=3,this.TRIANGLES=4,this.TRIANGLE_STRIP=5,this.TRIANGLE_FAN=6,this.ZERO=0,this.ONE=1,this.SRC_COLOR=768,this.ONE_MINUS_SRC_COLOR=769,this.SRC_ALPHA=770,this.ONE_MINUS_SRC_ALPHA=771,this.DST_ALPHA=772,this.ONE_MINUS_DST_ALPHA=773,this.DST_COLOR=774,this.ONE_MINUS_DST_COLOR=775,this.SRC_ALPHA_SATURATE=776,this.FUNC_ADD=32774,this.BLEND_EQUATION=32777,this.BLEND_EQUATION_RGB=32777,this.BLEND_EQUATION_ALPHA=34877,this.FUNC_SUBTRACT=32778,this.FUNC_REVERSE_SUBTRACT=32779,this.BLEND_DST_RGB=32968,this.BLEND_SRC_RGB=32969,this.BLEND_DST_ALPHA=32970,this.BLEND_SRC_ALPHA=32971,this.CONSTANT_COLOR=32769,this.ONE_MINUS_CONSTANT_COLOR=32770,this.CONSTANT_ALPHA=32771,this.ONE_MINUS_CONSTANT_ALPHA=32772,this.BLEND_COLOR=32773,this.ARRAY_BUFFER=34962,this.ELEMENT_ARRAY_BUFFER=34963,this.ARRAY_BUFFER_BINDING=34964,this.ELEMENT_ARRAY_BUFFER_BINDING=34965,this.STREAM_DRAW=35040,this.STATIC_DRAW=35044,this.DYNAMIC_DRAW=35048,this.BUFFER_SIZE=34660,this.BUFFER_USAGE=34661,this.CURRENT_VERTEX_ATTRIB=34342,this.FRONT=1028,this.BACK=1029,this.FRONT_AND_BACK=1032,this.CULL_FACE=2884,this.BLEND=3042,this.DITHER=3024,this.STENCIL_TEST=2960,this.DEPTH_TEST=2929,this.SCISSOR_TEST=3089,this.POLYGON_OFFSET_FILL=32823,this.SAMPLE_ALPHA_TO_COVERAGE=32926,this.SAMPLE_COVERAGE=32928,this.NO_ERROR=0,this.INVALID_ENUM=1280,this.INVALID_VALUE=1281,this.INVALID_OPERATION=1282,this.OUT_OF_MEMORY=1285,this.CW=2304,this.CCW=2305,this.LINE_WIDTH=2849,this.ALIASED_POINT_SIZE_RANGE=33901,this.ALIASED_LINE_WIDTH_RANGE=33902,this.CULL_FACE_MODE=2885,this.FRONT_FACE=2886,this.DEPTH_RANGE=2928,this.DEPTH_WRITEMASK=2930,this.DEPTH_CLEAR_VALUE=2931,this.DEPTH_FUNC=2932,this.STENCIL_CLEAR_VALUE=2961,this.STENCIL_FUNC=2962,this.STENCIL_FAIL=2964,this.STENCIL_PASS_DEPTH_FAIL=2965,this.STENCIL_PASS_DEPTH_PASS=2966,this.STENCIL_REF=2967,this.STENCIL_VALUE_MASK=2963,this.STENCIL_WRITEMASK=2968,this.STENCIL_BACK_FUNC=34816,this.STENCIL_BACK_FAIL=34817,this.STENCIL_BACK_PASS_DEPTH_FAIL=34818,this.STENCIL_BACK_PASS_DEPTH_PASS=34819,this.STENCIL_BACK_REF=36003,this.STENCIL_BACK_VALUE_MASK=36004,this.STENCIL_BACK_WRITEMASK=36005,this.VIEWPORT=2978,this.SCISSOR_BOX=3088,this.COLOR_CLEAR_VALUE=3106,this.COLOR_WRITEMASK=3107,this.UNPACK_ALIGNMENT=3317,this.PACK_ALIGNMENT=3333,this.MAX_TEXTURE_SIZE=3379,this.MAX_VIEWPORT_DIMS=3386,this.SUBPIXEL_BITS=3408,this.RED_BITS=3410,this.GREEN_BITS=3411,this.BLUE_BITS=3412,this.ALPHA_BITS=3413,this.DEPTH_BITS=3414,this.STENCIL_BITS=3415,this.POLYGON_OFFSET_UNITS=10752,this.POLYGON_OFFSET_FACTOR=32824,this.TEXTURE_BINDING_2D=32873,this.SAMPLE_BUFFERS=32936,this.SAMPLES=32937,this.SAMPLE_COVERAGE_VALUE=32938,this.SAMPLE_COVERAGE_INVERT=32939,this.COMPRESSED_TEXTURE_FORMATS=34467,this.DONT_CARE=4352,this.FASTEST=4353,this.NICEST=4354,this.GENERATE_MIPMAP_HINT=33170,this.BYTE=5120,this.UNSIGNED_BYTE=5121,this.SHORT=5122,this.UNSIGNED_SHORT=5123,this.INT=5124,this.UNSIGNED_INT=5125,this.FLOAT=5126,this.DEPTH_COMPONENT=6402,this.ALPHA=6406,this.RGB=6407,this.RGBA=6408,this.LUMINANCE=6409,this.LUMINANCE_ALPHA=6410,this.UNSIGNED_SHORT_4_4_4_4=32819,this.UNSIGNED_SHORT_5_5_5_1=32820,this.UNSIGNED_SHORT_5_6_5=33635,this.FRAGMENT_SHADER=35632,this.VERTEX_SHADER=35633,this.MAX_VERTEX_ATTRIBS=34921,this.MAX_VERTEX_UNIFORM_VECTORS=36347,this.MAX_VARYING_VECTORS=36348,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,this.MAX_TEXTURE_IMAGE_UNITS=34930,this.MAX_FRAGMENT_UNIFORM_VECTORS=36349,this.SHADER_TYPE=35663,this.DELETE_STATUS=35712,this.LINK_STATUS=35714,this.VALIDATE_STATUS=35715,this.ATTACHED_SHADERS=35717,this.ACTIVE_UNIFORMS=35718,this.ACTIVE_ATTRIBUTES=35721,this.SHADING_LANGUAGE_VERSION=35724,this.CURRENT_PROGRAM=35725,this.NEVER=512,this.LESS=513,this.EQUAL=514,this.LEQUAL=515,this.GREATER=516,this.NOTEQUAL=517,this.GEQUAL=518,this.ALWAYS=519,this.KEEP=7680,this.REPLACE=7681,this.INCR=7682,this.DECR=7683,this.INVERT=5386,this.INCR_WRAP=34055,this.DECR_WRAP=34056,this.VENDOR=7936,this.RENDERER=7937,this.VERSION=7938,this.NEAREST=9728,this.LINEAR=9729,this.NEAREST_MIPMAP_NEAREST=9984,this.LINEAR_MIPMAP_NEAREST=9985,this.NEAREST_MIPMAP_LINEAR=9986,this.LINEAR_MIPMAP_LINEAR=9987,this.TEXTURE_MAG_FILTER=10240,this.TEXTURE_MIN_FILTER=10241,this.TEXTURE_WRAP_S=10242,this.TEXTURE_WRAP_T=10243,this.TEXTURE_2D=3553,this.TEXTURE=5890,this.TEXTURE_CUBE_MAP=34067,this.TEXTURE_BINDING_CUBE_MAP=34068,this.TEXTURE_CUBE_MAP_POSITIVE_X=34069,this.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,this.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,this.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,this.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,this.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,this.MAX_CUBE_MAP_TEXTURE_SIZE=34076,this.TEXTURE0=33984,this.TEXTURE1=33985,this.TEXTURE2=33986,this.TEXTURE3=33987,this.TEXTURE4=33988,this.TEXTURE5=33989,this.TEXTURE6=33990,this.TEXTURE7=33991,this.TEXTURE8=33992,this.TEXTURE9=33993,this.TEXTURE10=33994,this.TEXTURE11=33995,this.TEXTURE12=33996,this.TEXTURE13=33997,this.TEXTURE14=33998,this.TEXTURE15=33999,this.TEXTURE16=34e3,this.TEXTURE17=34001,this.TEXTURE18=34002,this.TEXTURE19=34003,this.TEXTURE20=34004,this.TEXTURE21=34005,this.TEXTURE22=34006,this.TEXTURE23=34007,this.TEXTURE24=34008,this.TEXTURE25=34009,this.TEXTURE26=34010,this.TEXTURE27=34011,this.TEXTURE28=34012,this.TEXTURE29=34013,this.TEXTURE30=34014,this.TEXTURE31=34015,this.ACTIVE_TEXTURE=34016,this.REPEAT=10497,this.CLAMP_TO_EDGE=33071,this.MIRRORED_REPEAT=33648,this.FLOAT_VEC2=35664,this.FLOAT_VEC3=35665,this.FLOAT_VEC4=35666,this.INT_VEC2=35667,this.INT_VEC3=35668,this.INT_VEC4=35669,this.BOOL=35670,this.BOOL_VEC2=35671,this.BOOL_VEC3=35672,this.BOOL_VEC4=35673,this.FLOAT_MAT2=35674,this.FLOAT_MAT3=35675,this.FLOAT_MAT4=35676,this.SAMPLER_2D=35678,this.SAMPLER_CUBE=35680,this.VERTEX_ATTRIB_ARRAY_ENABLED=34338,this.VERTEX_ATTRIB_ARRAY_SIZE=34339,this.VERTEX_ATTRIB_ARRAY_STRIDE=34340,this.VERTEX_ATTRIB_ARRAY_TYPE=34341,this.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,this.VERTEX_ATTRIB_ARRAY_POINTER=34373,this.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,this.IMPLEMENTATION_COLOR_READ_TYPE=35738,this.IMPLEMENTATION_COLOR_READ_FORMAT=35739,this.COMPILE_STATUS=35713,this.LOW_FLOAT=36336,this.MEDIUM_FLOAT=36337,this.HIGH_FLOAT=36338,this.LOW_INT=36339,this.MEDIUM_INT=36340,this.HIGH_INT=36341,this.FRAMEBUFFER=36160,this.RENDERBUFFER=36161,this.RGBA4=32854,this.RGB5_A1=32855,this.RGBA8=32856,this.RGB565=36194,this.DEPTH_COMPONENT16=33189,this.STENCIL_INDEX8=36168,this.DEPTH_STENCIL=34041,this.RENDERBUFFER_WIDTH=36162,this.RENDERBUFFER_HEIGHT=36163,this.RENDERBUFFER_INTERNAL_FORMAT=36164,this.RENDERBUFFER_RED_SIZE=36176,this.RENDERBUFFER_GREEN_SIZE=36177,this.RENDERBUFFER_BLUE_SIZE=36178,this.RENDERBUFFER_ALPHA_SIZE=36179,this.RENDERBUFFER_DEPTH_SIZE=36180,this.RENDERBUFFER_STENCIL_SIZE=36181,this.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,this.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,this.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,this.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,this.COLOR_ATTACHMENT0=36064,this.DEPTH_ATTACHMENT=36096,this.STENCIL_ATTACHMENT=36128,this.DEPTH_STENCIL_ATTACHMENT=33306,this.NONE=0,this.FRAMEBUFFER_COMPLETE=36053,this.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,this.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,this.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,this.FRAMEBUFFER_UNSUPPORTED=36061,this.FRAMEBUFFER_BINDING=36006,this.RENDERBUFFER_BINDING=36007,this.MAX_RENDERBUFFER_SIZE=34024,this.INVALID_FRAMEBUFFER_OPERATION=1286,this.UNPACK_FLIP_Y_WEBGL=37440,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,this.CONTEXT_LOST_WEBGL=37442,this.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,this.BROWSER_DEFAULT_WEBGL=37444}get drawingBufferWidth(){return this.canvas.width}get drawingBufferHeight(){return this.canvas.height}activeTexture(){}attachShader(){}bindAttribLocation(){}bindBuffer(){}bindFramebuffer(){}bindRenderbuffer(){}bindTexture(){}blendColor(){}blendEquation(){}blendEquationSeparate(){}blendFunc(){}blendFuncSeparate(){}bufferData(){}bufferSubData(){}checkFramebufferStatus(){return this.FRAMEBUFFER_COMPLETE}clear(){}clearColor(){}clearDepth(){}clearStencil(){}colorMask(){}compileShader(){}compressedTexImage2D(){}compressedTexSubImage2D(){}copyTexImage2D(){}copyTexSubImage2D(){}createBuffer(){return{}}createFramebuffer(){return{}}createProgram(){return{}}createRenderbuffer(){return{}}createShader(){return{}}createTexture(){return{}}cullFace(){}deleteBuffer(){}deleteFramebuffer(){}deleteProgram(){}deleteRenderbuffer(){}deleteShader(){}deleteTexture(){}depthFunc(){}depthMask(){}depthRange(){}detachShader(){}disable(){}disableVertexAttribArray(){}drawArrays(){}drawElements(){}enable(){}enableVertexAttribArray(){}finish(){}flush(){}framebufferRenderbuffer(){}framebufferTexture2D(){}frontFace(){}generateMipmap(){}getActiveAttrib(){return{}}getActiveUniform(){return null}getAttachedShaders(){return[]}getAttribLocation(){return 0}getBufferParameter(){return 0}getContextAttributes(){return{}}getError(){return this.NO_ERROR}getExtension(){return null}getFramebufferAttachmentParameter(){return 0}getParameter(){return 0}getProgramInfoLog(){return""}getProgramParameter(){return{}}getRenderbufferParameter(){return 0}getShaderInfoLog(){return""}getShaderParameter(){return!0}getShaderPrecisionFormat(){return{rangeMin:127,rangeMax:127,precision:127}}getShaderSource(){return""}getSupportedExtensions(){return[]}getTexParameter(){return 0}getUniform(){return 0}getUniformLocation(){return null}getVertexAttrib(){return 0}getVertexAttribOffset(){return 0}hint(){}isBuffer(){return!1}isContextLost(){return!1}isEnabled(){return!1}isFramebuffer(){return!1}isProgram(){return!1}isRenderbuffer(){return!1}isShader(){return!1}isTexture(){return!1}lineWidth(){}linkProgram(){}pixelStorei(){}polygonOffset(){}readPixels(){}renderbufferStorage(){}sampleCoverage(){}scissor(){}shaderSource(){}stencilFunc(){}stencilFuncSeparate(){}stencilMask(){}stencilMaskSeparate(){}stencilOp(){}stencilOpSeparate(){}texImage2D(){}texParameterf(){}texParameteri(){}texSubImage2D(){}uniform1f(){}uniform1fv(){}uniform1i(){}uniform1iv(){}uniform2f(){}uniform2fv(){}uniform2i(){}uniform2iv(){}uniform3f(){}uniform3fv(){}uniform3i(){}uniform3iv(){}uniform4f(){}uniform4fv(){}uniform4i(){}uniform4iv(){}uniformMatrix2fv(){}uniformMatrix3fv(){}uniformMatrix4fv(){}useProgram(){}validateProgram(){}vertexAttrib1f(){}vertexAttrib1fv(){}vertexAttrib2f(){}vertexAttrib2fv(){}vertexAttrib3f(){}vertexAttrib3fv(){}vertexAttrib4f(){}vertexAttrib4fv(){}vertexAttribPointer(){}viewport(){}},t.ModelViewer=class{constructor(){this.renderables=[]}get resources(){return this.renderables.flatMap((e=>e.resources))}},t.PingpongBuffers=Q,t.PremultipliedNormalBlending={source:"one",destination:"one minus src alpha",equation:"add"},t.RenderTexture=M,t.Renderable=x,t.Renderer=class{constructor(e){this.resources=new Map,this.create=e,this.backend=this.createBackend()}createBackend(){const e=this.create();return e.onContextLost=e=>{var t;null==(t=this.onContextLost)||t.call(this,e)},e}load(e){this.backend.load(e);const t=Array.isArray(e)?e:e.resources;for(const r of t)this.resources.set(r.id,r)}update(e){this.backend.update(e)}clear(e,t){this.backend.clear(e,t)}render(e){this.backend.render(e)}readPixels(e){return this.backend.readPixels(e)}flush(){this.backend.flush()}release(e){this.backend.release(e);const t=Array.isArray(e)?e:e.resources;for(const r of t)this.resources.delete(r.id)}dispose(){this.backend.dispose(),this.resources.clear()}restore(){this.backend.dispose(),this.backend=this.createBackend(),this.backend.load(Array.from(this.resources.values()))}resize(...e){const[t,r]=e;if(t===this.canvas.width&&r===this.canvas.height)return;this.backend.resize(...e);const i=Array.from(this.resources.values()).filter((e=>"texture"===e.resourceType&&!e.source&&"relative"===e.size));this.backend.update(i)}get canvas(){return this.backend.canvas}},t.Shader=w,t.WebGlRenderer=Y,t.createWebGlRenderer=function(e,t){var r,i,n;const a=document.createElement("canvas");e.append(a),a.style.width="100%",a.style.height="100%";let o="Unknown";const h=e=>{e.statusMessage&&(o=e.statusMessage)};a.addEventListener("webglcontextcreationerror",h);const u={alpha:null==(r=null==t?void 0:t.alpha)||r,antialias:null==(i=null==t?void 0:t.antialias)||i,depth:null!=(n=null==t?void 0:t.depth)&&n,stencil:!1,preserveDrawingBuffer:!(null==t||!t.preserveDrawingBuffer),powerPreference:"high-performance",failIfMajorPerformanceCaveat:!(null==t||!t.failIfMajorPerformanceCaveat)},l=null!=t&&t.useWebGl2?a.getContext("webgl2",u):a.getContext("webgl",u);if(a.removeEventListener("webglcontextcreationerror",h),!l)throw new s(`A WebGL context could not be created. Reason: ${o}`);return new Y(l,{...t,onDispose:()=>{a.remove()}})},t.debugBinaryTexture=ae,t.debugImageTexture=ne,t.debugRenderTexture=se,t.debugTexture=function(e,t){t&&"render"!==t.textureType?"image"===t.textureType?ne(t):ae(t):se(e,t)},t.getAbsoluteTextureSize=P,t.injectAlphaPremultiplication=K,t.paddedTuple=function(e,t,r){if(e.length>r)return e.slice(0,r);const i=[...e];for(;i.length<r;)i.push(t);return i}},973173:(e,t,r)=>{"use strict";e.exports=r(501515)},468891:e=>{"use strict";var t={single_source_shortest_paths:function(e,r,i){var s={},n={};n[r]=0;var a,o,h,u,l,c,f,E=t.PriorityQueue.make();for(E.push(r,0);!E.empty();)for(h in o=(a=E.pop()).value,u=a.cost,l=e[o]||{})l.hasOwnProperty(h)&&(c=u+l[h],f=n[h],(void 0===n[h]||f>c)&&(n[h]=c,E.push(h,c),s[h]=o));if(void 0!==i&&void 0===n[i]){var d=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(d)}return s},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],i=t;i;)r.push(i),e[i],i=e[i];return r.reverse(),r},find_path:function(e,r,i){var s=t.single_source_shortest_paths(e,r,i);return t.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(e){var r,i=t.PriorityQueue,s={};for(r in e=e||{},i)i.hasOwnProperty(r)&&(s[r]=i[r]);return s.queue=[],s.sorter=e.sorter||i.default_sorter,s},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var r={value:e,cost:t};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},607789:e=>{"use strict";e.exports=function(e){for(var t=[],r=e.length,i=0;i<r;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&r>i+1){var n=e.charCodeAt(i+1);n>=56320&&n<=57343&&(s=1024*(s-55296)+n-56320+65536,i+=1)}s<128?t.push(s):s<2048?(t.push(s>>6|192),t.push(63&s|128)):s<55296||s>=57344&&s<65536?(t.push(s>>12|224),t.push(s>>6&63|128),t.push(63&s|128)):s>=65536&&s<=1114111?(t.push(s>>18|240),t.push(s>>12&63|128),t.push(s>>6&63|128),t.push(63&s|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},892729:e=>{e.exports={words:["ad","adipisicing","aliqua","aliquip","amet","anim","aute","cillum","commodo","consectetur","consequat","culpa","cupidatat","deserunt","do","dolor","dolore","duis","ea","eiusmod","elit","enim","esse","est","et","eu","ex","excepteur","exercitation","fugiat","id","in","incididunt","ipsum","irure","labore","laboris","laborum","Lorem","magna","minim","mollit","nisi","non","nostrud","nulla","occaecat","officia","pariatur","proident","qui","quis","reprehenderit","sint","sit","sunt","tempor","ullamco","ut","velit","veniam","voluptate"]}},623699:(e,t,r)=>{e.exports=function(){var t=arguments.length?arguments[0]:{},i=t.count||1,s=t.units||"sentences",n=t.sentenceLowerBound||5,a=t.sentenceUpperBound||15,o=t.paragraphLowerBound||3,h=t.paragraphUpperBound||7,u=t.format||"plain",l=t.words||r(892729).words,c=t.random||Math.random,f=t.suffix;if(!f){var E=e.exports,d="undefined"!=typeof product&&"ReactNative"===product.navigator,T="undefined"!=typeof process&&"win32"===process.platform;f=!d&&E&&T?"\r\n":"\n"}function A(e,t){return Math.floor(c()*(t-e+1)+e)}function _(e){return e[A(0,e.length-1)]}function R(e,t,r){for(var i="",s={min:0,max:A(t,r)};s.min<s.max;)i+=" "+_(e),s.min++;return i.length&&(i=(i=i.slice(1)).charAt(0).toUpperCase()+i.slice(1)),i}function m(e,t,r,i,s){for(var n="",a={min:0,max:A(t,r)};a.min<a.max;)n+=". "+R(e,i,s),a.min++;return n.length&&(n=n.slice(2),n+="."),n}s=function(e){if(-1===e.indexOf("s",e.length-1))return e+"s";return e}(s.toLowerCase());var g,p,b={min:0,max:i},S="";for("html"===u&&(g="<p>",p="</p>");b.min<b.max;){switch(s.toLowerCase()){case"words":S+=" "+_(l);break;case"sentences":S+=". "+R(l,n,a);break;case"paragraphs":var v=m(l,o,h,n,a);"html"===u?(v=g+v+p,b.min<b.max-1&&(v+=f)):b.min<b.max-1&&(v+=f+f),S+=v}b.min++}if(S.length){var I=0;0===S.indexOf(". ")?I=2:0!==S.indexOf(".")&&0!==S.indexOf(" ")||(I=1),S=S.slice(I),"sentences"===s&&(S+=".")}return S}},112581:e=>{!function(){"use strict";e.exports={polyfill:function(){var e=window,t=document;if(!("scrollBehavior"in t.documentElement.style)||!0===e.__forceSmoothScrollPolyfill__){var r,i=e.HTMLElement||e.Element,s=468,n={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:i.prototype.scroll||h,scrollIntoView:i.prototype.scrollIntoView},a=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,o=(r=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(r)?1:0);e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==u(arguments[0])?d.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):n.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(u(arguments[0])?n.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):d.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},i.prototype.scroll=i.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==u(arguments[0])){var e=arguments[0].left,t=arguments[0].top;d.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");n.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},i.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==u(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):n.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},i.prototype.scrollIntoView=function(){if(!0!==u(arguments[0])){var r=function(e){for(;e!==t.body&&!1===f(e);)e=e.parentNode||e.host;return e}(this),i=r.getBoundingClientRect(),s=this.getBoundingClientRect();r!==t.body?(d.call(this,r,r.scrollLeft+s.left-i.left,r.scrollTop+s.top-i.top),"fixed"!==e.getComputedStyle(r).position&&e.scrollBy({left:i.left,top:i.top,behavior:"smooth"})):e.scrollBy({left:s.left,top:s.top,behavior:"smooth"})}else n.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function h(e,t){this.scrollLeft=e,this.scrollTop=t}function u(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function l(e,t){return"Y"===t?e.clientHeight+o<e.scrollHeight:"X"===t?e.clientWidth+o<e.scrollWidth:void 0}function c(t,r){var i=e.getComputedStyle(t,null)["overflow"+r];return"auto"===i||"scroll"===i}function f(e){var t=l(e,"Y")&&c(e,"Y"),r=l(e,"X")&&c(e,"X");return t||r}function E(t){var r,i,n,o,h=(a()-t.startTime)/s;o=h=h>1?1:h,r=.5*(1-Math.cos(Math.PI*o)),i=t.startX+(t.x-t.startX)*r,n=t.startY+(t.y-t.startY)*r,t.method.call(t.scrollable,i,n),i===t.x&&n===t.y||e.requestAnimationFrame(E.bind(e,t))}function d(r,i,s){var o,u,l,c,f=a();r===t.body?(o=e,u=e.scrollX||e.pageXOffset,l=e.scrollY||e.pageYOffset,c=n.scroll):(o=r,u=r.scrollLeft,l=r.scrollTop,c=h),E({scrollable:o,method:c,startTime:f,startX:u,startY:l,x:i,y:s})}}}}()}}]);
//# sourceMappingURL=sourcemaps/bdcfa88a5d256b61.vendor.js.map